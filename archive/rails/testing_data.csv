IS,When LoadError path is nil LoadError is missing throws NoMethodError,It is possible for LoadError path to be nil when a mixin included in ApplicationHelper is misnamed resulting in a crash on boot with a none too useful error Everything works fine when the names are correct but when they are not say ApplicationHelper includes HelperMixins CssHelper by accident I get a crash on boot with the above stack trace It is worth noting that i'm using inflections to define a CSS acronym though when messing around it does not seem to make a difference There are actually two sub calls on the line in question L12 But I hacked a puts in there and confirmed that it is LoadError path that is nil Expected behavior The error message should reflect the problem missing module bad file name etc Actual behavior The LoadError is missing method itself errors raising a NoMethodError that does little to indicate the underlying problem System configuration Rails version 5 1 1 Ruby version 2 3 4,,"matthewd,sgrif,eileencodes,eileencodes",2017-06-29 18:48:52,2017-11-10 04:50:53
PR,Remove unused require,This is no longer used since fd6aaaa,,y-yagi,2017-11-10 06:43:03,2017-11-10 07:59:46
PR,Add missing requires,Currently executing the test with only attribute set test rb results in an error Added a missing require to fix this Also I suspect that this is the cause of failures in CI Ref,,"y-yagi,rafaelfranca",2017-11-10 05:30:49,2017-11-10 08:02:51
PR,Use e option to specify the environment in console command ci skip,Passing the environment is name as a regular argument is deprecated in 48b249927375465a7102acc71c2dfb8d49af8309,,y-yagi,2017-11-10 04:52:52,2017-11-10 08:13:50
PR,Fix ruby warnings in Active Model,Ref,,"y-yagi,kamipo,y-yagi",2017-11-10 05:07:44,2017-11-10 08:48:24
PR,Fix RDoc and Rake URL,Summary RDoc URL of Seattle rb is obsoleted and RDoc URL of Ruby core is available now So this Pull Request replaces it By the same token replaces obsoleted Rake URL of Seattle rb with new Rake URL of Ruby core,,amatsuda,2017-11-10 09:11:50,2017-11-10 09:15:51
PR,Refactor ActiveRecord Preloader associations,Removed the subclasses for Collection and Singular associations they are only different by one line of code which does not deserve a hierarchy of 6 classes Now the difference between singular and collection association looks like this Introduced only ThroughAssociation and DirectAssociation inherited from Association and implementing abstract run method The code is now well split between 2 subclasses Also the inheritance is done in classic way without method override only abstract method implementation r,,"bogdan,kamipo,bogdan,matthewd,kamipo,rafaelfranca,bogdan,rafaelfranca,kamipo",2017-11-07 09:46:50,2017-11-10 09:32:13
PR,Add missing requires,Currently executing the test with only attribute test rb results in an error Added a missing require to fix this,,"y-yagi,kamipo,y-yagi",2017-11-10 10:04:10,2017-11-10 10:34:19
PR,Remove code duplication in ActiveSupport Cache,Summary Remove code duplication in the implementation of the cache key,,"bogdan,matthewd,matthewd,matthewd,bogdan,bogdan,bogdan,matthewd,matthewd",2017-11-06 09:23:36,2017-11-10 11:11:09
IS,TypeError can not dump hash with default proc,Steps to reproduce Expected behavior I am using the rails api gem with devise token auth and after I login via oauth or email password login I should be redirected to the dashboard Actual behavior After I login I get an error System configuration Rails version 4 2 6 Ruby version 2 3 0 Rails api 0 4 0,,"pixeltrix,pixeltrix",2017-11-10 03:45:40,2017-11-10 11:48:45
IS,Nested subquery with has many relation generates invalid SQL when relation is default scope changes returned expression,Steps to reproduce Demo with test showing the failing scenario here Description A model M has many of child model C C has a default scope defined which is conditional for example it might return different clauses based on thread local storage One condition returns all records and the other returns a where filter based on a boolean The child model C is used in a subquery such as C where id m instance cs A thread exercises both conditions In this case C where id m instance cs generates invalid SQL when the default scope returns the second condition For example imagine that we have a default scope like the following where model M is User and child model C is Book Note that the user id is set to 'f' when it should be 1 However if you never ran with Thread current test true in the first place it generates correct SQL Expected behavior The generated query should be correct Actual behavior The generated query is incorrect System configuration Rails version 5 0 0 and 4 2 3 Ruby version 2 3 1,,"vipulnsward,sgrif,kamipo",2016-07-08 17:37:14,2017-11-10 13:34:46
PR,Make AR Base association to accept reflection object,It removes the necessaty to always convert reflection into name when calling a method internally I found it annoying to call association reflection name all the time intead of association reflection,,"bogdan,kamipo,kamipo,rafaelfranca",2017-11-10 16:17:07,2017-11-10 20:11:09
IS,ActionCable does not work inside Vue js webpack app,Steps to reproduce I am running Vue js with webpack inside Rails 5 1 3 app Subscribing from a javascript in regular Rails app is working fine I can see new messages as they arrive However since I'm using Vue js inside Rails when I try to subscribe ActionCable from Vue js component it is not working trades vue Guidelines for creating a bug report are available here creating a bug report Expected behavior I should see data printed to the console when a subscription message is received Actual behavior No output o the console when a subscription message is received System configuration Rails version 5 1 3 Ruby version 2 4 1,,,2017-09-29 22:08:08,2017-11-10 20:22:21
PR,Add missing autoload Type,Attribute modules Attribute Attributes AttributeSet uses Type but referencing Type before the modules still fail Probably we need more autoloading at least Type,,"kamipo,rafaelfranca,kamipo,rafaelfranca,rafaelfranca,kamipo,rafaelfranca,kamipo",2017-11-10 16:57:49,2017-11-10 21:43:55
PR,Fix 5 1 stable CI,cherry picked 0931e17ebf621e5518bc0546ea13268420f989ee and b106242f52272c4a5ced7a0e9d1dcb1b50542501 to fix the tests of 5 1 stable Ref,,y-yagi,2017-11-11 03:43:53,2017-11-11 05:07:13
PR,Fix broken bug report templates test in 5 0 stable,It seems that cause the Ruby version was old Therefore I updated the versions Ref,,y-yagi,2017-11-11 06:44:01,2017-11-11 12:41:57
IS,Unable to detect foreign key name on models in different namespaces,We have Public Profile and Market Message models and the following associations Changing the column name from public profile id to profile id changes the situation and it starts working for Public Profile but stops for Market Message,,pixeltrix,2017-11-11 09:14:28,2017-11-11 16:02:28
IS,DateTime weird behaviour,Steps to reproduce Example code def perform delivers puts DateTime now for department in user departments where next iteration DateTime now department check drop end end This is what im getting on my screen User Load 4 3ms SELECT users FROM users ORDER BY users id DESC LIMIT 1 LIMIT 1 2017 11 11T22 17 32 01 00 Look at the current DateTime UserDepartment Load 4 4ms SELECT user departments FROM user departments WHERE user departments user id 1 AND next iteration '2017 11 11 21 17 32 253687' user id 1 As you see in the query it interpolates the current timestamp with one hour less Only happens on ActiveRecord queries Expected behavior Interpolated DateTime should match Actual behavior One hour is substracted from DateTime interolation on active record queries System configuration Rails version 5 1 4 Ruby version 2 3 5,,,2017-11-11 21:28:03,2017-11-11 23:23:18
PR,Remove unused require,,,y-yagi,2017-11-12 01:56:56,2017-11-12 08:38:12
PR,Do not create credentials in dummy application,Because dummy application is only for use test so credentials is unnecessary r,,y-yagi,2017-10-01 23:17:11,2017-11-12 13:41:43
IS,rails secrets edit returns New secrets encrypted and saved since 5 1 4,I can not edit my secret file anymore And the server and the test work fine too,,"rafaelfranca,kaspth,kaspth,kaspth,kaspth",2017-11-09 19:53:07,2017-11-12 15:00:54
PR,Do not reference deleted file secrets yml,Since 30067 Rails apps do not include a config secrets yml file anymore so that file should not be referenced anymore The file was deleted in by,,"claudiob,kaspth,claudiob,kaspth,kaspth,kaspth,kaspth",2017-09-18 21:09:40,2017-11-12 16:53:01
PR,Add update only example to AR nested attributes doc ci skip,Summary Improve documentation about AR nested attributes adding an update only example,,,2017-10-03 11:59:16,2017-11-13 00:17:15
IS,maintain test schema does not work with engines,Steps to reproduce Clone this repo System configuration Rails version 5 1 4 Ruby version 2 4 1,,,2017-10-01 02:39:15,2017-11-13 00:18:50
PR,Make automatically synchronize test schema work inside engine,In Rails engine migration files are in under db migrate of engine Therefore when rake task is executed in engine db migrate is automatically added to DatabaseTasks migrations paths L39 L43 However if execute the rake task under dummy app migration files will not be loaded because engine is migration path setting process is not called Therefore in order to load migration files correctly it is necessary to execute rake task under engine Fixes 30765,,y-yagi,2017-10-02 07:02:31,2017-11-13 00:18:50
PR,Action Cable run Redis tests against a default config without a password,Simplify our dev testing and CI story since we are also testing against Redis for the Active Support cache store Directly test whether db host password etc are passed through as config instead of spinning up a Redis server with a password set on it References 31134,,jeremy,2017-11-13 07:57:41,2017-11-13 08:35:00
PR,Verify credentials format before saving,Currently credentials does not check the format when saving As a result incorrect data as yaml is also saved If credentials is used in config files an error will occur in credential yaml parsing before edit and will not be able to edit it In order to prevent this verify the format when saving Related 30851 r,,"y-yagi,eileencodes,y-yagi,kaspth,kaspth,y-yagi,y-yagi,kaspth,y-yagi",2017-10-14 23:33:59,2017-11-13 10:35:40
PR,Move touch method from Skipping Callbacks section to Running Callback,s section ci skip Summary On calling touch method after touch after commit and after rollback callbacks are executed Example provided in the gist So moving the method from Skipping callbacks section to Running callbacks section in Rails Guides,,,2017-11-13 10:37:06,2017-11-13 10:48:21
PR,Add new error class StatementTimeout which will be raised when statement timeout exceeded,We are sometimes using The MAX EXECUTION TIME hint for MySQL depending on the situation It will prevent catastrophic performance down by wrong performing queries The new error class StatementTimeout will make to be easier to handle that case optimizer hints execution time,,"kamipo,jeremy",2017-11-11 15:50:25,2017-11-13 11:15:17
PR,Make sidekiq and resque integration tests work in ci,Since 8f2490b the integration test of sidekiq and resque is not working in CI L2055 L2061 Because 8f2490b removed password from redis server So must also remove passwords from these tests Together return non zero code so as to notice it immediately when it could not connect to redis,,"y-yagi,matthewd,matthewd,y-yagi,y-yagi,jeremy",2017-11-13 09:13:15,2017-11-13 12:48:31
IS,railties 5 1 3 gem has DS Store files littered in it,If I do gem install rails then the gem railties version 5 1 3 gets installed New to this version of the railties gem there are a bunch of macOS is DS Store files laying around Probably someone forgot to do some cleanup before shipping Easy to overlook since those files are invisible I think this is new to 5 1 3 because I have a script to scour and remove DS Store from various places on my macOS machines and this is the first time that I can recall the script finding anything among my gems,,"rafaelfranca,matthewd,matthewd,kirs,kaspth,rafaelfranca",2017-08-11 15:04:53,2017-11-13 14:05:46
IS,URLs containing certain character codes break routing reprise,This was originally raised in 4450 and I see that some code was created to address this I'm not seeing this code in the rails master branch though When this url is called,,"pixeltrix,pixeltrix",2017-10-05 14:25:23,2017-11-13 14:55:05
PR,ActionCable connect to Redis through unix socket,Add option to Redis initializer,,"eileencodes,rafaelfranca",2017-10-31 14:50:54,2017-11-13 16:34:25
IS,Do not know how to build task 'active storage install',Hi I'm making a new app and needed attachments so I figured I would give ActiveStorage a try Only changes to the rails defaults I have made is using PostgreSQL for the database and Rspec for the tests Steps to reproduce 1 Create a new rails app 2 Add gem 'activestorage' ' 0 1' to Gemfile 3 bundle install 3 Run rails active storage install Expected behavior I expect the migrations to be copied over as the documentation installation suggests Actual behavior I get this error System configuration Rails version 5 1 4 Ruby version 2 4 0,,rafaelfranca,2017-11-13 18:27:16,2017-11-13 18:43:25
IS,Use rb erb file extensions for template files instead of rb,Currently some template files here have the rb file extension e g This causes problems with static analysis tools i18n tasks rubocop etc and syntax highlighting in IDEs on GitHub etc Since they are not actually valid Ruby files they should have the rb erb extension instead,,"pixeltrix,pixeltrix,Edouard-chin,pixeltrix,rafaelfranca",2017-09-24 04:53:49,2017-11-13 20:27:15
IS,erb rb generator files should be renamed to rb erb,assuming they do not contain valid ruby code they should not be named rb this would not only be cleaner but allow tools such as Warbler pre compiling rb files without hustle each sub gem seems to have these under lib rails generators e g with active record lib rails generators active record model templates model rb model rb erb lib rails generators active record model templates module rb module rb erb proposing to rename those and update the related files would this be acceptable by the team,,"rafaelfranca,rafaelfranca,rafaelfranca",2016-02-24 05:57:14,2017-11-13 20:27:15
IS,AR Base reload and ignored columns,The ignored columns list is ignored after you do reload on a record On master I guess this happens because on reload we do SELECT Do we consider it as a bug,,"kirs,guilleiguaran,maclover7,maclover7",2017-02-05 15:59:30,2017-11-13 20:28:00
PR,Do not use Arel star when ignored columns,Closes 27918 Closes 27914,,"rafaelfranca,kamipo,kamipo,kamipo,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca",2017-10-24 23:02:05,2017-11-13 20:28:00
IS,Schema cache does not work with syck,Steps to reproduce 1 Have any Rails 5 1 application with syck added to the Gemfile 2 Run rails db schema cache dump Sometimes dumping the cache crashes in our case it succeeds but crashes when parsing it Here is the failure using the template Includes a monkey patch that when uncommented makes the test pass Expected behavior Schema caching should hopefully work with syck too Actual behavior It crashes on dumping or parsing depending on the adapter I think System configuration Rails version 5 1 4 Ruby version 2 4 2 2 3 5,,"kaspth,jeremy,jeremy,jeremy",2017-11-13 17:36:54,2017-11-13 20:53:53
PR,fix bug on added method,Summary This Pull Requests fixes an issue with the added method of ActiveModel Errors When looking for an error by symbol the method is returning true even if the error is not present This happens because another error with a different symbol but same message is present,,"rafaelfranca,rafaelfranca",2017-11-10 08:41:51,2017-11-13 21:13:54
IS,Active Storage blob metadata is overwritten by analyzer,Steps to reproduce The AnalyzeJob L259 will update L252 the metadata with the metadata from the analyzer L302 The default analyzer is the NullAnalyzer L10 that just returns an empty Hash Would that make sense to return blob metadata there as well as in the ImageAnalyzer and VideoAnalyzer that could merge the metadata they fetch with the one from blob metadata Would you accept a PR for that System configuration Rails version Rails master Ruby version ruby 2 4 2p198 2017 09 14 revision 59899 x86 64 darwin16,,georgeclaghorn,2017-11-13 10:21:31,2017-11-13 21:40:41
PR,Upgrade ActiveRecordMigration version to 5 2,Summary This patch upgrades ActiveRecord Migration version to current version All updates are documentation except one ActiveRecord is bug reporting template In the docs it has been updated from ActiveRecord Migration 5 0 to ActiveRecord Migration 5 2 I have not found any occurrence for ActiveRecord Migration 5 1 in the docs It also updates the bug reporting template from ActiveRecord Migration 5 1 to ActiveRecord Migration 5 2,,"albertoalmagro,bogdanvlviv,pixeltrix,albertoalmagro,bogdanvlviv,albertoalmagro,bogdanvlviv,albertoalmagro",2017-11-13 22:42:35,2017-11-13 22:59:20
PR,Sort mailer previews alphabetically,Summary This fixes an issue where the index page of mailer previews was not sorted in any meaningful way It appears as though the methods underneath each mailer are sorted alphabetically but the mailers themselves are not Now all the mailers will be ordered alphabetically along with their methods which is more predictable and expected Other Information Here is a screenshot from my preview index as is where you can see the mailers are not in any obvious order image,,,2017-11-13 23:20:32,2017-11-13 23:50:14
PR,Cache regexps generated from acronym regex,Summary The following line from String camelize,,"matthewd,matthewd,matthewd,matthewd,rafaelfranca,matthewd,matthewd",2017-10-02 21:47:02,2017-11-14 00:40:17
PR,Built in Redis cache store,Supports vanilla Redis hiredis and Redis Distributed Supports Memcached like sharding across Redises with Redis Distributed Fault tolerant If the Redis server is unavailable no exceptions are raised Cache fetches are treated as misses and writes are dropped Local cache Hot in memory primary cache within block middleware scope read write multi support for Redis mget mset Use Redis Distributed 4 0 1 for distributed mget support delete matched support for Redis KEYS globs Deployment note Take care to use a dedicated Redis cache rather than pointing this at your existing Redis server It wo not cope well with mixed usage patterns and it wo not expire cache entries by default Redis cache server setup guide,,"jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,matthewd,matthewd,matthewd,matthewd,matthewd,matthewd,matthewd,matthewd,jeremy,jeremy,jeremy,jeremy,jeremy,matthewd,jeremy,matthewd,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,rafaelfranca,rafaelfranca,jeremy,jeremy,jeremy,rafaelfranca,jeremy",2017-11-12 23:58:35,2017-11-14 02:45:48
IS,Encrypted secrets not being read in some rake tasks,Steps to reproduce Try to perform RAILS ENV production rails db drop with correctly setup of secrets yml enc with isecret key base' variable To handy error indication also wouldevise' gem is needed so it will raise error if no isecret key base' variable was read To read the variable from new secrets store add config secret key Rails application secrets devise secret key if Rails env production to devise rb config read encrypted secrets true is set in production rb PS It is not only devise related problem some strange errors with the rest of variables happens also Expected behavior Successful database dropping for sure with correct credentials are in place Actual behavior Devise secret key was not set Please add the following to your Devise initializer Some other rake tasks still works fine db migrate etc There is no such problem in RAILS ENV development Way to solve If you move config read encrypted secrets true from environments production rb to application rb looks like every errors related to unread secrets are gone For some reason config files in different environments are loaded in different orders and probably in production a lot of them are loaded before config read encrypted secrets true will be hit System configuration Rails version 5 1 3 Ruby version ruby 2 4 2p198 Windows 7,,"kaspth,y-yagi",2017-09-26 05:33:28,2017-11-14 04:54:58
PR,Load environment fle in db tasks,Currently the environment is not loaded in some db tasks Therefore if use encrypted secrets values in database yml read encrypted secrets will not be true so the value can not be used correctly To fix this added environment task to the dependent task Fixes 30717,,"y-yagi,rafaelfranca,y-yagi,y-yagi,y-yagi,jeremy,jeremy,y-yagi,eileencodes,tenderlove,matthewd",2017-11-13 00:25:25,2017-11-14 04:54:58
PR,Cache Enable compression by default for values 1kB,Compression has long been available but opt in and at a 16kB threshold It was not enabled by default due to CPU cost Today it is cheap and typical cache data is eminently compressible such as HTML or JSON fragments Compression dramatically reduces Memcached Redis mem usage which means the same cache servers can store more data which means higher hit rates To disable compression pass compress false to the initializer,,"jeremy,schneems,jeremy",2017-11-14 02:41:54,2017-11-14 05:02:46
IS,actioncable reconnect same connection and resend same actions again,Steps to reproduce This was generated using a standalone javascript client 1 Start server then start your client 2 After actioncable on client successfully connected to server stop rails server 3 Wait until actioncable client connection fails and starts retrying to reconnect to server 4 Reboot your server Expected behavior Actioncable should not recreate duplicate connection with same messages again which duplicate whatever the behavior is in the sent to channel as an example if i create a record on a sent action called speak after reconnecting again during the same session speak action is called again which will duplicate the record with unessential call from actioncable Actual behavior Actioncable start another connection similar to the already fired 101 one at the very beginning System configuration Rails version 5 0 2 Ruby version ruby 2 3 1p112 2016 04 26 revision 54768 x86 64 darwin16,,palkan,2017-06-23 12:35:50,2017-11-14 05:54:19
PR,Specify encoding for Rails Plugin is gemspec,Summary In some cases e g when the system default encoding is Encoding US ASCII using no ascii character in Rails Plugin is gemspec causes an error when bundle command is used Specifying coding utf 8 fixes this issue Other Information bundler gem specifies encoding in the same way L1,,y-yagi,2017-03-02 02:50:25,2017-11-14 07:48:32
IS,System Test not filling in fields in chrome properly,Steps to reproduce First create test app and scaffold test failure creating a post System configuration google chrome version Google Chrome 62 0 3202 89 firefox version Mozilla Firefox 56 0 Rails version Rails 5 2 0 alpha Ruby version ruby 2 4 2p198 2017 09 14 revision 59899 x86 64 linux gnu,,"eileencodes,eileencodes",2017-11-13 20:18:06,2017-11-14 10:13:51
IS,column types for ActiveRecord Result is empty when used with MySQL,I'm guessing this is because the third column types argument for ActiveRecord Result constructor L39 is not passed with mysql adapter L34 while postgres adapter does set it L89 Is this an expected behaviour or a bug System configuration Rails version 5 1 2 Ruby version 2 3 4,,,2017-11-14 07:39:03,2017-11-14 10:25:32
PR,Disallow raw SQL in dangerous AR methods,Some AR methods allow raw SQL where raw SQL is rarely necessary This opens up applications to SQL injection vulnerabilities when a developer unwittingly passes params or a model attribute to the AR method Code like this looks innocuous though it actually is an exploitable SQL injection vulnerability A probably not comprehensive list of such dangerous APIs can be found at These APIs should be changed to not allow raw SQL In the rare case where raw SQL is needed the developer should be forced to acknowledge the risk by using an API whose name indicates the danger This would be a breaking change though which I'm assuming would not be acceptable This PR adds an AR config flag that when enabled restricts the arguments that can be passed to previously dangerous AR APIs The previous functionality can be accessed using unsafe raw prefixed APIs These changes take a bit of work so I'm opening this PR early for discussion So far I have made changes to the pluck order and reorder APIs I will be curious to hear what folks think about the idea I'm happy to try a different approach if anyone has suggestions but it would be really good to remove some sharp edges from AR,,"mastahyeti,eileencodes,eileencodes,eileencodes,eileencodes,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,mastahyeti,mastahyeti,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,mastahyeti,matthewd,matthewd,matthewd,matthewd,matthewd,mastahyeti,mastahyeti,matthewd,mastahyeti,sgrif,sgrif,sgrif,sgrif,sgrif,sgrif,matthewd,mastahyeti,kamipo,mastahyeti,matthewd,matthewd,mastahyeti,matthewd,matthewd,matthewd,mastahyeti,mastahyeti,matthewd,matthewd,matthewd,matthewd,matthewd,matthewd,kamipo,matthewd,kamipo,eileencodes,mastahyeti,mastahyeti,jeremy,jeremy,mastahyeti,jeremy,matthewd,matthewd,mastahyeti,jeremy,mastahyeti,jeremy,mastahyeti,mastahyeti,mastahyeti,mastahyeti,mastahyeti,mastahyeti,matthewd,mastahyeti,mastahyeti,eileencodes,mastahyeti,matthewd,mastahyeti,matthewd,mastahyeti,mastahyeti,matthewd,mastahyeti,mastahyeti,mastahyeti,mastahyeti,mastahyeti,matthewd,matthewd,mastahyeti,matthewd,mastahyeti,mastahyeti,matthewd",2017-02-08 18:47:59,2017-11-14 13:09:08
PR,Update layouts and rendering md ci skip,Proposed correction it seems that when rendering a collection and the name of a partial and the name of of the object do not agree it uses the title of the partial not the name of the collection for the counter variable Summary Provide a general description of the code changes in your pull request were there any bugs you had fixed If so mention them If these bugs have open GitHub issues be sure to tag them here as well to keep the conversation linked together Other Information If there is anything else that is important and relevant to your pull request mention that information here This could include benchmarks or other information If you are updating any of the CHANGELOG files or are asked to update the CHANGELOG files by reviewers please add the CHANGELOG entry at the top of the file Finally if your pull request affects documentation or any non code changes guidelines for those changes are available here contributing to the rails documentation Thanks for contributing to Rails,,"eileencodes,eileencodes",2017-10-13 13:37:43,2017-11-14 14:21:40
PR,Update exists documentation ci skip,Make it clear that exists can be chained onto a relation,,kamipo,2017-11-14 14:18:45,2017-11-14 14:24:12
PR,CI against JRuby 9 1 14 0,JRuby 9 1 14 0 has been released and this version is available on Travis CI,,koic,2017-11-14 16:44:28,2017-11-14 17:18:24
PR,fix method call for location,i had an issue with creating a method called location with some arguments in my app controller,,rafaelfranca,2017-11-14 11:24:40,2017-11-14 18:54:57
PR,Add a populate method to migrations,This is a feature suggestion and my first time contributing to the core so I'm very open to comments about whether this is a good idea etc I often find myself writing migrations that look something like this Thoughts,,"rafaelfranca,rafaelfranca,rafaelfranca,jeremy,matthewd",2017-11-07 13:05:51,2017-11-14 19:24:01
PR,Performance improvements for add method to attributes,Continuation of Add a cache to save the method to s downcase call This change prevents a string allocation for each time the method is called with performance changes within margin of error Summary Provide a general description of the code changes in your pull request were there any bugs you had fixed If so mention them If these bugs have open GitHub issues be sure to tag them here as well to keep the conversation linked together Other Information If there is anything else that is important and relevant to your pull request mention that information here This could include benchmarks or other information If you are updating any of the CHANGELOG files or are asked to update the CHANGELOG files by reviewers please add the CHANGELOG entry at the top of the file Finally if your pull request affects documentation or any non code changes guidelines for those changes are available here contributing to the rails documentation Thanks for contributing to Rails,,"oniofchaos,oniofchaos,oniofchaos,rafaelfranca,oniofchaos,matthewd,matthewd,oniofchaos,oniofchaos,oniofchaos,oniofchaos,oniofchaos,rafaelfranca,oniofchaos,eugeneius,oniofchaos,rafaelfranca,matthewd",2017-10-23 19:43:04,2017-11-14 19:28:03
PR,Fix migration version in doc of up only,Related to,,bogdanvlviv,2017-11-14 20:07:34,2017-11-14 20:38:33
PR,Fix activesupport CHANGELOG md ci skip,,,bogdanvlviv,2017-11-14 21:18:00,2017-11-14 21:25:09
PR,Update plugin generator rb,Summary Patch I ran,,"y-yagi,lugray,lugray,y-yagi,lugray,y-yagi",2017-07-30 15:26:02,2017-11-14 22:38:14
IS,Plugin generator appends gemfile entry without making sure line is empty,Steps to reproduce 1 rails new foo 2 cd foo 3 remove empty last line of Gemfile 4 rails plugin bar 5 bundle This throws the following error System configuration Rails version 5 1 3 Ruby version 2 3 1,,y-yagi,2017-09-05 08:30:49,2017-11-14 22:39:31
IS,Rack app error when using SystemTestCase alongside ActiveStorage,Steps to reproduce We are using system tests and ActiveStorage for attachments To run a set of tests that check a user choosable theme the app requires that we load real data into the app This includes loading files into our objects We have code that builds up a sample organization for each test and then we run our capybara methods and assertations based on that sample data Views that reference attached files use url for creating URLs to the blob I have isolated the storage for ActiveStorage by adding the following to storage yml and setting the service for the test environment to local test It appears that the Chrome instance driving the test is looking for a file after the test runner has cleaned up and moved to the next file and ActiveStorage is throwing an exception when it can find the file that is been deleted Is this true Is there something I should be doing differently in my test suite setup to allow these two features to interact System configuration Rails version rails master commit a52ff1b0848e8bb2310738ec7b762b82edbbfcb2 Ruby version 2 3 4,,"jeffreyguenther,rafaelfranca,jeffreyguenther,jeffreyguenther",2017-10-19 23:46:52,2017-11-14 23:03:32
PR,Update configuring md,Summary It was brought to my attention that the Rails guide suggests using filenames to ensure initializer load order so I thought I would suggest a better alternative,,"matthewd,jeremy,matthewd",2017-11-15 00:27:33,2017-11-15 01:14:04
PR,Fix polymorphic association class load fails,If we use enum to the type column of polymorphic association to access association is failed,,kamipo,2017-11-15 05:38:47,2017-11-15 06:28:32
IS,SystemStackError stack level too deep when using where with created by,Steps to reproduce I have the following model System configuration Rails version 5 0 6 Ruby version 2 4 2,,"rafaelfranca,matthewd",2017-11-09 20:09:14,2017-11-15 07:49:58
PR,Fix the International Date Line West timezone,Change the International Date Line West TZInfo timezone from Pacific Midway 11 to Etc GMT 12 12 00 Based on discussion at 29763,,matthewd,2017-07-13 04:21:30,2017-11-15 11:01:10
PR,Add the Anywhere On Earth GMT 12 00 timezone,Map the TZinfo Etc GMT 12 timezone to Anywhere On Earth GMT 12 00 00 This timezone is needed when you want to allow app users to set an an expiry time via an expiry date that will not prematurely expire no matter what the users' terrestrial locations Capital O On,,"sikachu,matthewd,matthewd,matthewd",2017-07-12 12:45:14,2017-11-15 11:01:32
PR,Handle TZInfo AmbiguousTime errors,Make ActiveSupport TimeWithZone match Ruby is handling of ambiguous times by choosing the later period e g Ruby Fixes 17395,,pixeltrix,2017-11-11 15:21:33,2017-11-15 11:25:54
PR,Allow test ignored columns not included in SELECT column names case insensitive,Summary Allow test ignored columns not included in SELECT column names case insensitive i e Oracle database identifier is UPPERCASE unlike other databases This test has been introduced at 30980,,yahonda,2017-11-15 17:45:49,2017-11-15 19:06:18
PR,Added support for managing custom encrypted files from cli,One can now generate edit file by bin rails credentials edit config staging credentials yml enc key config staging key bin rails encrypted edit config staging credentials yml enc key config staging key and display it by bin rails credentials show config staging credentials yml enc key config staging key bin rails encrypted show config staging credentials yml enc key config staging key When key option is omitted then default config master key is used This is a follow up to cc and as you introduced encrypted files,,"morgoth,rafaelfranca,morgoth,kaspth,kaspth,dhh,morgoth,kaspth,morgoth,kaspth,kaspth,morgoth,kaspth",2017-10-20 12:06:29,2017-11-15 20:35:11
PR,Add master key to gitignore on rails new,We generate master key on rails new Therefore if do not add master key to gitginore on rails new as well there is a possibility that the master key will be committed accidentally,,"y-yagi,matthewd,y-yagi",2017-11-15 23:01:39,2017-11-15 23:31:59
IS,Improving the README beginning section,The first section of README md is litterally a wall of text I would not be surprised if Trump took inspiration from it I feel as though if it was shrunk and humanised new developers would be more encouraged to adapt to Rails EDIT I mean this beginning section Yes 6 paragraphs,,"matthewd,rafaelfranca,rafaelfranca,dhh,dhh",2017-11-15 06:49:47,2017-11-16 07:48:07
PR,Fixed example of Rails application encrypted method usage,ci skip r,,"morgoth,kaspth",2017-11-16 08:54:43,2017-11-16 10:37:42
PR,Start on a guide for the Executor Load Interlock,,,"matthewd,tomkadwill,tomkadwill,matthewd,rosenfeld,matthewd,matthewd",2016-12-29 11:26:39,2017-11-16 15:05:17
IS,Ability to provide body for post request in ActionDispatch IntegrationTest,Steps to reproduce If you look into ActionController TestCase documentation you will notice this line on top Rails discourages the use of functional tests in favor of integration tests use ActionDispatch IntegrationTest 1 I have a cart controller System configuration Rails version Rails 5 1 4 Ruby version 2 4 2,,al2o3cr,2017-11-15 20:01:30,2017-11-16 15:38:23
PR,Avoid creating extra relation and build arel in create record and update record,Currently create record and update record in Persistence are creating extra unscoped and calling build arel in the relation But compile insert and compile update can be done without those expensive operation for SelectManager creation So I moved the implementation to Persistence to avoid creating extra relation and refactored to avoid calling build arel Before 30 faster for STI classes,,kamipo,2017-07-30 06:05:19,2017-11-16 18:12:58
PR,Fix links,Fixed links that did not work,,ydakuka,2017-11-16 18:16:41,2017-11-16 18:24:04
IS,ActionController Parameters issue with DELETE in Testing only,With Rails 5 1 4 I have a different param return using the GET or DELETE http verb in testing condition only Here is what I send So with DELETE I get an additional like with the previous like as a key I have no issue of that kind using Postman or when the API is called from an application It is stricly observed using the test helper lib,,"rafaelfranca,y-yagi,rafaelfranca",2017-11-14 10:16:30,2017-11-16 20:52:46
PR,Document public hooks in AS Reloader,This PR moves documentation for AS Reloader hooks outside of hidden rdoc block I think it is important to at least document to prepare as it can be quite useful,,"kirs,rafaelfranca,rafaelfranca,matthewd,kirs,matthewd,kirs",2017-08-06 18:43:05,2017-11-17 09:03:29
PR,WIP flaky actioncable test,The purpose of this PR is to debug flaky actioncable test suite Here is the failure that I have been noticing a lot for the past week build,,kirs,2017-07-24 19:02:50,2017-11-17 09:19:38
PR,Enable query cache on all connection pools,Followup to Since the query cache no longer eagerly checks out a connection we can enable it on all connection pools at the start of every request and it will only take effect for requests that actually use those pools r,,"eugeneius,eugeneius,matthewd,eugeneius,rafaelfranca,matthewd",2017-04-25 14:28:44,2017-11-17 13:02:57
PR,Switch to LIFO for the connection pool,Summary Using a FIFO for the connection pool can lead to issues when there are upstream components pgbouncer haproxy etc that terminate connections that are idle after a period of time Switching to a LIFO reduces the probability that a thread will checkout a connection that is about to be closed by an idle timeout in an upstream component Other Information I would also be interested in adding an idle timeout and a max lifetime into the connection pool itself Putting the idle timeout in the connection pool will eliminate the possibility that an upstream closes a connection as its being checked out by a thread Adding the max lifetime would create a way to drain connections from an upstream component I wanted to start with this small change to start the discussion and gauge the receptiveness to changes in this part of the code base,,"matthewd,matthewd",2017-04-12 21:25:30,2017-11-17 13:18:16
IS,Deadlocks in rails 5,Steps to reproduce Since upgrading to rails 5 we have started seeing deadlocks in development and test Using is super helpful tool we have tracked it down to a thread being blocked by the load interlocking This thread is holding the AR connection is lock while it is blocked The other threads that are sharing the load interlock are blocked waiting for the connection is lock We are using rails 5 1 4 with postgres and are seeing this in both webrick and puma I have a feature spec that reliably reproduces this issue running puma with 4 threads and the state we end up in is Puma Thread 1 This thread is updating records inside an explicit transaction block and has a record level lock on an object using lock It is waiting to autoload an association is class Has the AR connection lock Blocked waiting to get the load interlock Puma Thread 2 This thread is just fetching some data from the database Sharing the load interlock Blocked waiting to get the AR connection lock Puma Thread 3 This thread is just fetching some data from the database Sharing the load interlock Blocked waiting to get the AR connection lock Puma Thread 4 This thread is just fetching some data from the database Sharing the load interlock Blocked waiting to get the AR connection lock Removing our transaction and lock calls do not solve the problem All of the threads that are waiting on the AR connection lock are waiting in the ActiveRecord ConnectionAdapters AbstractAdapter log method L611 If I add a ActiveSupport Dependencies interlock permit concurrent loads block outside of the locking code here the problem goes away but I'm not sure exactly what the negative side effects will be Is there anything that I'm missing here I'm really not sure where to start Any help would be really appreciated System configuration Rails version 5 1 4 Ruby version 2 3 3,,"matthewd,matthewd",2017-10-31 17:54:01,2017-11-17 13:55:53
PR,Prevent deadlocks with load interlock and DB lock,Summary This fixes an issue where competing threads deadlock each other Thread A holds the load interlock but is blocked on getting the DB lock Thread B holds the DB lock but is blocked on getting the load interlock for example when there is a Model transaction block that needs to autoload This solution allows for dependency loading in other threads while a thread is waiting to acquire the DB lock Other Information I'm very open to suggestions on naming and location of the new monitor and also totally alternate approaches if folks have other thoughts Fixes 31019,,"georgeclaghorn,matthewd",2017-11-02 18:57:47,2017-11-17 13:55:53
PR,Fixes Marshalling With Autoload,Summary Active Support is Marshal load prepend does not match the signature for the overridden method This triggers crashing on the JRuby engine though not on MRI This fixes marshalling with autoload for both Other Information Only tested on JRuby and MRI,,rafaelfranca,2017-04-27 18:06:06,2017-11-17 13:56:33
PR,Backport prevent deadlocks with load interlock and DB lock to 5 1 stable,Summary This backports 31035 which fixes an issue where competing threads deadlock each other to the 5 1 branch Thread A holds the load interlock but is blocked on getting the DB lock Thread B holds the DB lock but is blocked on getting the load interlock for example when there is a Model transaction block that needs to autoload This solution allows for dependency loading in other threads while a thread is waiting to acquire the DB lock,,,2017-11-17 14:20:53,2017-11-17 20:22:23
PR,Fix tzinfo data warning,Summary This PR fixes the noisy tzinfo data warning On master Re 27830 Other Information Quoting bundler bundler 5345 fixes the problem since Bundler local platform can now be ruby on Windows,,"matthewd,rafaelfranca",2017-11-17 01:29:59,2017-11-17 20:37:13
PR,Deprecate an after bundle callback in Rails plugin templates,Since fbd1e98cf983572ca9884f17f933ffe92833632a Rails plugin does not run bundle install when generating Therefore after bundle callback is not actually executed after bundle Since there is a difference between the name and the actual behavior I think that should be remove,,y-yagi,2017-06-13 23:00:02,2017-11-18 03:23:55
PR,Bust ActiveSupport TimeZone all cache,Fixes 7245 as discussed in 22651,,"composerinteralia,composerinteralia,composerinteralia,jeremy,jeremy,rafaelfranca,composerinteralia",2017-02-05 20:46:54,2017-11-18 06:37:58
PR,Keep default ENGINE Innodb for MySQL and MariaDB if options option is provided,Summary Solves 30947 ActiveRecord ConnectionAdapters AbstractMysqlAdapter create table adds ENGINE InnoDB by default when options option is not provided Before this PR default ENGINE information was lost if some value was provided to options option This PR prepends ENGINE InnoDB to options option in case no ENGINE information is provided If options option contains ENGINE information this is kept and nothing is added This PR also improves tests to check the SQL that will be actually executed against the database server Testing the table schema dump as before was not checking the proper addition of ENGINE InnoDB This PR also improves default ENGINE InnoDB description for MySQL and MariaDB at the documentation according to the changes mentioned above Other Information I consider it necessary to update the CHANGELOG with this information Please confirm if you also consider it necessary and I will add the entry at the top of it,,"albertoalmagro,matthewd,albertoalmagro,matthewd,albertoalmagro,albertoalmagro,matthewd,albertoalmagro",2017-10-26 19:53:23,2017-11-18 11:38:55
IS,PG ConnectionBad,connected server is characteristics def connect PGconn connect connection parameters Money type has a fixed precision of 10 in PostgreSQL 8 2 and below and as of PostgreSQL 8 3 it has a fixed precision of 19 PostgreSQLColumn extract precision Rails root home ubuntu workspace Application Trace Framework Trace Full Trace activerecord 4 2 6 lib active record connection adapters postgresql adapter rb 651 in initialize' activerecord 4 2 6 lib active record connection adapters postgresql adapter rb 651 in new' activerecord 4 2 6 lib active record connection adapters postgresql adapter rb 651 in connect' activerecord 4 2 6 lib active record connection adapters postgresql adapter rb 242 in initialize' activerecord 4 2 6 lib active record connection adapters postgresql adapter rb 44 in new' activerecord 4 2 6 lib active record connection adapters postgresql adapter rb 44 in postgresql connection' activerecord 4 2 6 lib active record connection adapters abstract connection pool rb 438 in new connection' activerecord 4 2 6 lib active record connection adapters abstract connection pool rb 448 in checkout new connection' activerecord 4 2 6 lib active record connection adapters abstract connection pool rb 422 in acquire connection' activerecord 4 2 6 lib active record connection adapters abstract connection pool rb 349 in block in checkout' usr local rvm rubies ruby 2 3 4 lib ruby 2 3 0 monitor rb 214 in mon synchronize' activerecord 4 2 6 lib active record connection adapters abstract connection pool rb 348 in checkout' activerecord 4 2 6 lib active record connection adapters abstract connection pool rb 263 in block in connection' usr local rvm rubies ruby 2 3 4 lib ruby 2 3 0 monitor rb 214 in mon synchronize' activerecord 4 2 6 lib active record connection adapters abstract connection pool rb 262 in connection' activerecord 4 2 6 lib active record connection adapters abstract connection pool rb 571 in retrieve connection' activerecord 4 2 6 lib active record connection handling rb 113 in retrieve connection' activerecord 4 2 6 lib active record connection handling rb 87 in connection' activerecord 4 2 6 lib active record migration rb 383 in connection' activerecord 4 2 6 lib active record migration rb 370 in call' actionpack 4 2 6 lib action dispatch middleware callbacks rb 29 in block in call' activesupport 4 2 6 lib active support callbacks rb 88 in run callbacks ' activesupport 4 2 6 lib active support callbacks rb 778 in run call callbacks' activesupport 4 2 6 lib active support callbacks rb 81 in run callbacks' actionpack 4 2 6 lib action dispatch middleware callbacks rb 27 in call' actionpack 4 2 6 lib action dispatch middleware reloader rb 73 in call' actionpack 4 2 6 lib action dispatch middleware remote ip rb 78 in call' actionpack 4 2 6 lib action dispatch middleware debug exceptions rb 17 in call' web console 2 3 0 lib web console middleware rb 20 in block in call' web console 2 3 0 lib web console middleware rb 18 in catch' web console 2 3 0 lib web console middleware rb 18 in call' actionpack 4 2 6 lib action dispatch middleware show exceptions rb 30 in call' railties 4 2 6 lib rails rack logger rb 38 in call app' railties 4 2 6 lib rails rack logger rb 20 in block in call' activesupport 4 2 6 lib active support tagged logging rb 68 in block in tagged' activesupport 4 2 6 lib active support tagged logging rb 26 in tagged' activesupport 4 2 6 lib active support tagged logging rb 68 in tagged' railties 4 2 6 lib rails rack logger rb 20 in call' actionpack 4 2 6 lib action dispatch middleware request id rb 21 in call' rack 1 6 8 lib rack methodoverride rb 22 in call' rack 1 6 8 lib rack runtime rb 18 in call' activesupport 4 2 6 lib active support cache strategy local cache middleware rb 28 in call' rack 1 6 8 lib rack lock rb 17 in call' actionpack 4 2 6 lib action dispatch middleware static rb 120 in call' rack 1 6 8 lib rack sendfile rb 113 in call' railties 4 2 6 lib rails engine rb 518 in call' railties 4 2 6 lib rails application rb 165 in call' rack 1 6 8 lib rack lock rb 17 in call' rack 1 6 8 lib rack content length rb 15 in call' rack 1 6 8 lib rack handler webrick rb 88 in service' usr local rvm rubies ruby 2 3 4 lib ruby 2 3 0 webrick httpserver rb 140 in service' usr local rvm rubies ruby 2 3 4 lib ruby 2 3 0 webrick httpserver rb 96 in run' usr local rvm rubies ruby 2 3 4 lib ruby 2 3 0 webrick server rb 296 in block in start thread' Please Help Me,,matthewd,2017-11-19 07:08:51,2017-11-19 11:17:05
PR,Prevent extra spawn to make klass all faster,These extra spawn are called via klass all and klass all is called everywhere in the internal Avoiding the extra spawn makes klass all 30 faster for STI classes,,"kamipo,matthewd,kamipo,kamipo,kamipo",2017-05-07 22:10:00,2017-11-19 21:24:51
IS,ActiveStorage Cannot attach a has many attached attachment if model instance is not persisted,Hi guys I'm seeing a discrepancy in the attach behaviour for a has one attached and a has many attached model instance if an attachment is attached before the model instance is saved Specifically for a model w has one attached you can attach an attachment before the model instance is saved However for a model w has many attached if you try to attach an attachment before the model is saved the following exception is raised ActiveRecord RecordNotSaved You cannot call create unless the parent is saved I have done some testing below and found a temporary work around but it is not the ideal solution Steps to reproduce Weird huh I was surprised that build save works but a straight create with an included record does not Again perhaps this is by design but thought it weird that the two attachments One and Many have different behaviour here Rails version rails 5 2 0 alpha Ruby version ruby 2 4 2,,"georgeclaghorn,georgeclaghorn",2017-11-16 01:05:18,2017-11-19 22:36:43
PR,ci skip Added example for using headless chrome with SystemTest,In the beginning of the System Test section of the testing guide we mention that it is possible to use a headless browser system testing System tests allow you to test user interactions with your application running tests in either a real or a headless browser System tests uses Capybara under the hood I think it would be reasonable to give an example of using a headless browser,,"sikachu,guilleiguaran",2017-11-16 19:21:06,2017-11-19 23:44:31
IS,ActiveStorage Google Cloud Missing Require,Steps to reproduce Using ActiveStorage with GCS starting Puma I believe it is the same behavior with AWS but I did not dig too far into it because I'm using Google Cloud Expected behavior Puma Should Start Actual behavior,,"georgeclaghorn,georgeclaghorn",2017-11-20 00:07:14,2017-11-20 00:11:22
IS,rails db migrate db seed cannot be run in the same command as of v5 1,Steps to reproduce 1 Create a new Rails project with postgresql 3 Add a migration that creates a table 2 echo 'ApplicationRecord connection reconnect ' db seeds rb 3 Run rails db create db migrate db seed Expected behavior Finishes without errors Actual behavior Hangs on Rails 5 1 1 Works on Rails 5 0 3 System configuration Rails version 5 1 1 Ruby version 2 4 1 Another way to reproduce without reconnect 1 Create a User model and table with a name field 2 Add this snippet to the user model 3 echo 'User create name Joe ' db seeds rb 4 rails db create db migrate db seed boom error no superclass method name defined Running rails db create db migrate and then rails db seed works in both cases,,rafaelfranca,2017-05-16 17:59:46,2017-11-20 09:01:25
PR,Pass over Execution guide ci skip,,,vipulnsward,2017-11-20 13:53:14,2017-11-20 13:53:36
PR,Fix direct upload to local,Active Storage direct uploading to local disk failed due to missing authenticity token log example This PR fix this bug but it always send authenticity token I think it is better to send authenticity token only when uploading to local disk Please give me your advice if you have any idea,,"willnet,georgeclaghorn,willnet,georgeclaghorn,willnet,javan,georgeclaghorn,javan,willnet,willnet,georgeclaghorn",2017-08-17 07:29:24,2017-11-20 15:57:23
PR,Support expires in in ActiveSupport Cache MemCacheStore increment and decrement,Summary Previously ActiveSupport Cache MemCacheStore increment and ActiveSupport Cache MemCacheStore decrement call Dalli Client incr and Dalli Client decr as follows However considering the method arguments of Dalli Client options expires in and default value for a not stored value are not passed correctly Dalli Client incr key amt 1 ttl nil default nil Dalli Client decr key amt 1 ttl nil default nil c f L169 L202 As a result initial values for not stored values are not correctly set despite the documentation saying Calling it on a value not stored with raw will initialize that value to zero c f L117 L120 Fortunately since ttl is only applicable when the value is already set we have not encountered any bugs regarding expires in By this patch ActiveSupport Cache MemCacheStore will correctly handle initialization of counters Also test on increment decrement behavior will be fixed Other Information P S Regarding this initialization I have posted feature request on the Google Group to initialize the not stored value to amount as if it is initialized to 0 prior to the operation,,"sgrif,jeremy,jeremy,matthewd",2017-09-26 04:34:58,2017-11-20 22:52:19
PR,Provide attachment writers,Permit creating a record and attaching files in a single step Since you designed the ASt API I d like your approval on this before I merge Thanks to for taking a first stab at this in 30737 I ve credited you for the commit,,"georgeclaghorn,dhh,georgeclaghorn,rafaelfranca",2017-11-19 23:21:58,2017-11-20 23:06:06
PR,Remove unused em hiredis,em hiredis is unused since 48766e32d31651606b9f68a16015ad05c3b0de2c,,"y-yagi,matthewd,y-yagi,matthewd",2017-11-21 01:00:41,2017-11-21 03:27:31
PR,FIX rack test 0 7 1 probably got yanked,,,"tgxworld,tgxworld,y-yagi,y-yagi",2017-11-21 03:53:54,2017-11-21 04:42:35
IS,Consider reverting Raise ArgumentError when passing nil to Relation merge,Steps to reproduce Build up a query and pass in nil to merge As described in this commit an ArgumentError is raised Expected behavior I do not expect this at all and rather see the old behaviour for one simple reason you cannot merge scopes on the fly consider following example Add another 2 3 files that build up the resulting query the above statements are needed else you have to brake up the method chain and assign a variable and return early in the main method Actual behavior Raise an exception System configuration Rails version 5 1 3 Ruby version 2 4 1,,matthewd,2017-11-21 21:30:17,2017-11-21 23:12:33
PR,Fix generator suggestion raise error when I18n available locales don t include en,Summary I have some rails applications only used in Japanese So I write like following in config application rb,,"willnet,eileencodes,rafaelfranca,y-yagi,willnet,matthewd,willnet,willnet,willnet,y-yagi,willnet,y-yagi",2017-07-21 15:15:34,2017-11-22 02:13:40
IS,Error in the document about smtp configuration,Steps to reproduce Guidelines for creating a bug report are available here creating a bug report In the installation guide we can read about the smtp port config port '587' The good syntaxe is remove the quote port 587 Expected behavior Tell us what should happen Redmine word Actual behavior Tell us what happens instead Redmine do not start System configuration Rails version Ruby version,,y-yagi,2017-11-21 14:04:17,2017-11-22 02:16:07
IS,Rails route URL helpers do not handle strong parameters format correctly,Steps to reproduce Expected behavior The two URLs output should be identical Actual behavior The first example sticks a parameter in the URL for format instead of changing the extension Rails' controllers behave fine when responding to these links the controller still responds with the requested format But Turbolinks does not see this as an extension it should avoid which causes it to send a request with a different format than the server responds with System configuration Rails version 5 1 3 Ruby version 2 3 0,,"codeodor,lugray,codeodor,albertoalmagro,lugray,albertoalmagro,albertoalmagro,lugray,codeodor,lugray,codeodor,codeodor,albertoalmagro,codeodor,codeodor,albertoalmagro,codeodor,albertoalmagro",2017-08-15 16:31:03,2017-11-22 08:49:47
IS,Delete has one join table row fails,Steps to reproduce System configuration Activerecord version 5 1 0 and 4 2 1 Ruby version 2 4 1 Do I failed somewhere,,,2017-11-22 11:15:07,2017-11-22 14:45:52
PR,Make ActiveSupport TimeZone all independent of previous lookups,Summary If you call ActiveSupport TimeZone all before you look up any ActiveSupport TimeZone s by name then all calls to ActiveSupport TimeZone all for the lifetime of the program will return a collection of ActiveSupport TimeZone s corresponding to the 151 meaningful time zone identifiers described by ActiveSupport TimeZone MAPPING If however you look up a time zone by a name that is not a key of ActiveSupport TimeZone MAPPING before making a call to ActiveSupport TimeZone all then the collection returned from all calls to that method will contain the time zone you looked up Abridged Timeline August 2012 The issue is first described in 7245 It is proposed that the issue is not necessarily that ActiveSupport TimeZone all returns inconsistent output but instead that ActionView Helpers FormOptionsHelper time zone options for select should return a select element that always contained the selected time zone regardless of whether or not that time zone was a member of ActiveSupport TimeZone all November 2012 8377 is opened to fix time zone options for select I do not think this solution fixes the actual problem since it does not remove the dependency of ActiveSupport TimeZone all from time zone options for select As long as the former returns inconsistent output so will the latter December 2012 8660 is opened with changes very similar to the changes proposed by this PR April 2013 8660 was closed because it was thought that the issue was still in the view code January 2015 8377 is closed December 2015 22651 is opened to remove the cache used for ActiveSupport TimeZone all This has the effect that any time you call ActiveSupport TimeZone all you get all time zones currently known not just the ones from ActiveSupport TimeZone MAPPING This PR is closed because it would introduce a performance regression It is proposed to keep the cache around but to invalidate it when we discover a new time zone February 2017 27917 is opened to invalidate some caches when new time zones are discovered suggests that doing this behavior is actually quite strange The behavior that makes most sense is for ActiveSupport TimeZone all to return only time zones that are in ActiveSupport TimeZone MAPPING I think this is absolutely 100 correct,,"sgrif,pixeltrix,pixeltrix,pixeltrix",2017-11-17 18:46:37,2017-11-22 17:12:09
PR,Update incorrect backtick usage in RDoc to teletype,Some quick doc updates to fix code formatting replacing incorrect Markdown Github style backticks with proper RDoc teletype formatting,,tjschuck,2017-11-22 19:47:37,2017-11-22 19:53:02
PR,Fix CustomUrls direct doc formatting,Particularly the bulleted list was getting formatted as a code block because of the extra level of indentation Pulling it back to the left makes it render properly as a list instead,,tjschuck,2017-11-22 20:12:29,2017-11-22 20:45:21
PR,Update Action Cable Overview Guide ci skip,,,fgo,2017-11-22 16:40:42,2017-11-22 21:27:42
IS,Rails is not compliant with FIPS 140 2 mode,Steps to reproduce Enable FIPS 140 2 mode as outlined at by install dracut fips yum install dracut fips disable prelinking rpm q prelink sed i ' PRELINKING s yes no ' etc sysconfig prelink rpm q prelink prelink uav back up existing initramfs mv v boot initramfs uname r img bak rebuild initramfs dracut add fips 1 to kernel command in grub boot menu to enable FIPS grubby update kernel grubby default kernel args fips 1 inform kernel of boot is uuid during boot wo not boot without this in FIPS mode uuid findmnt no uuid boot n uuid grubby update kernel grubby default kernel args boot UUID uuid reboot reboot Then verify FIPS mode is enforced sysctl crypto fips enabled Now with this enabled rails applications may fail particularly anything that uses Digest MD5 For example note 5 A few ways to mitigate this Use Digest SHA256 instead Use an MD5 library that does not use OpenSSL This might be used as a backup so check if FIPS mode is enabled then use an alternate probably slower library if so,,"vipulnsward,guilleiguaran,guilleiguaran,matthewd",2017-11-22 17:19:00,2017-11-22 23:15:40
PR,No difference between JRuby and CRuby at test read attributes before,Summary ActiveRecord JDBC Adapter is actively developed and it supports Rails 5 1 now This pull request addresses one of the failures when running ActiveRecord unit tests with ActiveRecord JDBC Adapter As of right now ActiveRecord JDBC Adapter supports Rails 5 1 not master branch then this test only can run on 5 1 stable branch But I have opened this pull request to master branch since this type cast should be going to work in the future versions of ActiveRecord JDBC Adapter Steps to reproduce This is kind of reverting 230f78875999ed566cbfc54c3b824420ea082f4b cc,,yahonda,2017-11-21 18:24:53,2017-11-22 23:22:07
IS,Feature render partial dynamic true,I would like to suggest a new feature render partials should provide for dynamic reload I would expect some harness on render partial so to reload that partial upon trigger,,y-yagi,2017-11-23 02:59:16,2017-11-23 05:32:22
PR,Remove alias for cloning relations,Remove Relation SpawnMethods spawn introduced in to be overridden by Associations CollectionProxy This is no longer true and the comment is now inaccurate Also the method could be confused with Kernel spawn Since this is a public method do I need to deprecate it instead of removing it,,"composerinteralia,kamipo,composerinteralia",2017-11-23 05:25:46,2017-11-23 05:46:13
PR,Fix unstable test test delegate socket errors to on error handler,I often face the following error when running test connection client socket test rb The cause is to write io from different thread at the same time connection process sends handshake message from StreamEventLoop is thread whereas connection handle open sends welcome message from current thread StreamEventLoop is thread L75,,"mtsmfm,kamipo,mtsmfm,mtsmfm,kamipo,mtsmfm,mtsmfm,kamipo",2017-11-18 17:58:23,2017-11-23 07:55:00
PR,Use Erubi is CaptureEnd engine,Background 1 The eRuby language as defined by ERB in the Ruby standard library requires the contents of every tag to be a standalone expression As L294 shows the contents are wrapped in and to s is called This means the following is not valid in pure eRuby because the first tag contains a do without a matching end Erubis and Erubi other eRuby parsers have the same behavior 1 Rails extends eRuby to work around the above limitation The template handlers under template handlers erb use regular expressions to parse the Ruby code for do end or blocks and treat them as units L45 This is fragile it will choke on some valid Ruby and the complexity is undesirable 1 Erubi which is the default parser as of Rails 5 1 offers an alternative syntax that accomplishes the same goal in a simpler way See capturing This patch 1 Uses Erubi is CaptureEndGroup engine to add support for the new syntax No existing Rails functionality is removed or modified Performance testing I used to render two cases 1 million times each and used GNU time 1 to measure the elapsed time Results are below with this branch on the left and master on the right Changed rows are in bold As you can see the capture engine is slightly slower but I feel it is a worthwhile tradeoff for the additional capabilities and future reduction in complexity Rendering a form with form for capture engine master Command being timed bundle e rails runner benchmark rb Command being timed bundle e rails runner benchmark rb User time seconds 43 18 User time seconds 41 11 System time seconds 0 04 System time seconds 0 06 Percent of CPU this job got 99 Percent of CPU this job got 99 Elapsed wall clock time h mm ss or m ss 0 43 28 Elapsed wall clock time h mm ss or m ss 0 41 23 Average shared text size kbytes 0 Average shared text size kbytes 0 Average unshared data size kbytes 0 Average unshared data size kbytes 0 Average stack size kbytes 0 Average stack size kbytes 0 Average total size kbytes 0 Average total size kbytes 0 Maximum resident set size kbytes 88684 Maximum resident set size kbytes 88544 Average resident set size kbytes 0 Average resident set size kbytes 0 Major requiring I O page faults 0 Major requiring I O page faults 0 Minor reclaiming a frame page faults 34279 Minor reclaiming a frame page faults 34300 Voluntary context switches 245 Voluntary context switches 251 Involuntary context switches 171 Involuntary context switches 282 Swaps 0 Swaps 0 File system inputs 0 File system inputs 0 File system outputs 8 File system outputs 320 Socket messages sent 0 Socket messages sent 0 Socket messages received 0 Socket messages received 0 Signals delivered 0 Signals delivered 0 Page size bytes 4096 Page size bytes 4096 Exit status 0 Exit status 0 Rendering a list taken from the Rails Guide on rendering capture engine master Command being timed bundle e rails runner benchmark rb Command being timed bundle e rails runner benchmark rb User time seconds 42 91 User time seconds 41 50 System time seconds 0 06 System time seconds 0 07 Percent of CPU this job got 99 Percent of CPU this job got 99 Elapsed wall clock time h mm ss or m ss 0 43 02 Elapsed wall clock time h mm ss or m ss 0 41 62 Average shared text size kbytes 0 Average shared text size kbytes 0 Average unshared data size kbytes 0 Average unshared data size kbytes 0 Average stack size kbytes 0 Average stack size kbytes 0 Average total size kbytes 0 Average total size kbytes 0 Maximum resident set size kbytes 88720 Maximum resident set size kbytes 88388 Average resident set size kbytes 0 Average resident set size kbytes 0 Major requiring I O page faults 0 Major requiring I O page faults 0 Minor reclaiming a frame page faults 34303 Minor reclaiming a frame page faults 34256 Voluntary context switches 243 Voluntary context switches 232 Involuntary context switches 130 Involuntary context switches 503 Swaps 0 Swaps 0 File system inputs 0 File system inputs 0 File system outputs 328 File system outputs 8 Socket messages sent 0 Socket messages sent 0 Socket messages received 0 Socket messages received 0 Signals delivered 0 Signals delivered 0 Page size bytes 4096 Page size bytes 4096 Exit status 0 Exit status 0 Near future work 1 Update the Rails Guide Layouts and Rendering to recommend the new Erubi syntax I will open that PR if this one is approved Long term future work 1 Deprecate the old syntax and later remove support for it from Rails,,"matthewd,matthewd,pixeltrix",2017-11-22 23:00:35,2017-11-23 11:59:03
IS,Dear Active Record,I have been using Active Record for two days now and who do you think you are What kind of wizardry do you think you are capable of What gives you the right to do such magical things on my behalf In any case I love you Yours truly Sam,,jeremy,2017-08-17 16:13:28,2017-11-23 16:28:34
IS,Unexpected sudden test failures with ActiveStorage recent change,Some recent change to ActiveStorage started to mess things up Was working fine before When running tests I get odd and completely random errors Sometimes test suite passes completely more often I get random number of errors Completely inconsistent Error usually looks like this Completely random 496 runs 1717 assertions 0 failures 1 errors 0 skips 496 runs 1675 assertions 0 failures 13 errors 0 skips 496 runs 1718 assertions 0 failures 0 errors 0 skips System configuration Rails version 5 2 alpha Ruby version 2 4 1,,"georgeclaghorn,georgeclaghorn",2017-11-24 02:48:05,2017-11-24 03:57:53
PR,Moving ActiveStorage routes into engine rb and prepending them,Summary We can not leave routes for ActiveStorage in config routes rb as they load after main application routes or just randomly if you have more engines structured like that Issue is if I have a globbing route in my application like this get ' ' foo bar it will make ActiveStorage routes inaccessible This problem is pretty obvious and visible with this 30771 It is similar to what we have happening with mailer previews Those routes are correctly prepended via railtie I had to fix that too in the past 17896,,"georgeclaghorn,rafaelfranca",2017-10-02 22:39:27,2017-11-24 04:15:38
PR,Correct render method is response header is content type for option bo,dy from text html to text plain ci skip Summary On calling render method with body option content type of the response header is text plain Example provided in the gist So changing the response header is content type from text html to text plain,,prathamesh-sonpatki,2017-11-24 06:41:59,2017-11-24 08:08:21
IS,Dynamic database parameters for AWS IAM database authentication,I am looking to use IAM database authentication with Rails as it allows a convenient way for AWS users to manage permissions and avoid storing database passwords in their codebases At a high level it works by generating a password to connect to the database that is valid for only 15 minutes If you want to connect again after the 15 minutes you would need to generate a new password This password can be generating using the AWS Ruby SDK easily and thus can theoretically be embedded in config database yml like so However as far as I can tell config database yml is evaluated once on startup and remains cached in that state for Rails' lifetime Therefore by using this approach the Rails server would initially successfully connect to the database but if at any point after the first 15 minute window Rails tried to open a new DB connection or reconnect a dropped connection the expired cached credentials would be rejected Is there a sanctioned way to have database configuration that is re evaluated on each connection establishment If not this would be a useful feature to add,,prathamesh-sonpatki,2017-11-24 05:37:17,2017-11-24 09:42:47
IS,Coercion when calling DateTime utc,DateTime utc returns Time in Rails 5 1 This is implicit 2 This is bug prone,,,2017-08-18 11:49:55,2017-11-24 10:52:25
IS,Document how to provide both query string and body when posting in an integration test,Steps to reproduce Go to the documentation page Expected behavior I should be able to see the documentation for post and get particularly a whether the params keyword maps to the query string or to the request body and b how to specify the other option In fact GET is rather unusual in being the only request type you might expect to only have a single way to pass parameters Actual behavior There are just examples none of which explain the expected behavior of the method let alone talk about the params keyword In fact I am not seeing any evidence you can pass any type of query string to a POST request System configuration Rails version 5 1 Ruby version 2 3,,"rafaelfranca,rafaelfranca",2017-08-18 21:01:07,2017-11-24 10:52:26
IS,Sessions stored in the db broken in 5 1 0,It is not easy to describe this issue My app is working ok on 5 0 1 jruby 9 1 8 and puma 3 8 2 When I tried to upgrade to 5 0 2 the app did not work anymore and while the problem is not easily traceable it seems to be related to the session variables not being held between different requests I have an application controller which as first thing loads login variables from the db and put them into session I store sessions into the db also Has anything changed in the way sessions are stored or retrieved from 5 0 1 to 5 0 2 Have I to change something in the session table Thank in advance Fabio,,rafaelfranca,2017-04-07 14:44:36,2017-11-24 15:46:20
PR,Fix tld length documentation in ActionDispatch Cookies,Summary Change recommendation for tld length for sharing cookies across subdomains of a 2 token TLD to 2 instead of 1 TLD is not exactly the right name here but since that is what the option is called that is what I'm calling it This option actually specifies the number of tokens in the root domain across whose subdomains you want to share the cookie In the example given it is 2 lvh and me so recommending 1 is confusing calling it tld length is also confusing but c'est la vie wink With a setting of 2 the domain for the cookie is set to lvh me which is the desired result,,,2017-11-21 18:56:03,2017-11-24 17:02:38
PR,ci skip Rails Associations examples contains ActiveRecord Base ref,erence instead of ApplicationRecord in images,,"rafaelfranca,vipulnsward,rafaelfranca",2017-11-24 16:45:28,2017-11-24 17:08:07
PR,Update documentation to lead with ajax param event detail,Fixes issue Summary Using rails ujs not jquery ujs The following remote form This fixes the documentation and code snippets,,"eileencodes,guilleiguaran,guilleiguaran,vipulnsward,vipulnsward,vipulnsward,vipulnsward,vipulnsward",2017-10-13 13:09:10,2017-11-24 19:26:07
PR,Rubocop style Missing magic comment,Summary This PR applies frozen string literal magic comment,,dixitp012,2017-11-24 14:44:13,2017-11-24 19:47:57
PR,Fix comments,Summary This PR applies changes in comments Comment start with Uppercase and removed extra space as per guidelines,,"dixitp012,matthewd",2017-11-25 06:16:42,2017-11-25 06:33:16
PR,Improve AR connection fork safety,Use whatever adapter provided means we have available to ensure forked children do not send quit shutdown goodbye messages to the server on connections that belonged to their parent mysql2 provides a method specifically for this purpose pg is not quite so helpful but it does expose a socket io which is close enough I think sqlite3 is immune to this problem just because there is no server to confuse I believe this should eliminate the need for advice like this L35 L53 along with much of what is currently described in 29807,,"matthewd,yahonda,jeremy,matthewd,kaspth",2017-11-17 12:11:24,2017-11-25 07:23:57
IS,why not delegate broadcast to to class,L8 or make a broadcast for model method,,y-yagi,2017-09-26 07:45:24,2017-11-25 09:06:07
PR,Avoid raising ArgumentError when blank,Avoid raising ArgumentError when blank is applied to strings with invalid encodings,,"y-yagi,matthewd",2017-11-24 10:35:22,2017-11-25 09:34:51
PR,ci skip Fixed commas according to Oxford comma in Guides helpers',Summary This PR applies Oxford comma changes as per Rails Documentation guidelines and one type mistake helpers' to helpers,,"dixitp012,matthewd",2017-11-25 09:45:11,2017-11-25 10:09:20
PR,ci skip SecureRandom should mentioned Win32 CryptoAPI functions ins,tead of Win32 Summary Provide a general description of the code changes in your pull request were there any bugs you had fixed If so mention them If these bugs have open GitHub issues be sure to tag them here as well to keep the conversation linked together Other Information If there is anything else that is important and relevant to your pull request mention that information here This could include benchmarks or other information If you are updating any of the CHANGELOG files or are asked to update the CHANGELOG files by reviewers please add the CHANGELOG entry at the top of the file Finally if your pull request affects documentation or any non code changes guidelines for those changes are available here contributing to the rails documentation Thanks for contributing to Rails,,"matthewd,matthewd",2017-11-25 09:57:09,2017-11-25 10:43:18
IS,The learn more links in active record readme have broken,Steps to reproduce Click the learn more link in Active Record Readme Expected behavior Show me the detail page Actual behavior 404,,"albertoalmagro,kamipo,albertoalmagro,kamipo,albertoalmagro,matthewd,albertoalmagro,albertoalmagro,robin850,matthewd,albertoalmagro",2017-08-18 06:15:16,2017-11-25 11:00:05
IS,Objects built by ActiveRecord AssociationRelation or have incorrect associations,Hello I am fairly new to rails and I'm not sure if this is a bug or I'm understanding something wrong If it is the latter I would be really grateful if you can help me correct my understanding Thanks in advance Steps to reproduce user has many publications through user publications publication has many users through user publications user has many comments publication has many comments Loop through all publications associated with a user and build a Relation of all comments under that publication using or Now the resulting Relation seems to have the right comment objects but the wrong comment publication associations It might be more clearly described with this reproduction script that I created using the bug report template Expected behavior Comments taken from the resulting Relation should return the correct associated publication Actual behavior Comments taken from the resulting Relation always seem to return the associated publication as the first publication System configuration Rails version 5 1 1 Ruby version 2 3 1p112,,"utilum,al2o3cr",2017-06-21 07:12:37,2017-11-25 11:00:06
PR,Update guide layout ci skip,,,fgo,2017-11-25 14:07:03,2017-11-25 14:49:51
PR,Ordinal methods should respect loaded records,We should reset partially loaded offsets cache when latest records has loaded because the cache has been staled and it may not be consistent with latest records,,"kamipo,matthewd,eileencodes",2017-10-28 14:39:16,2017-11-25 15:00:38
PR,Add nodoc to activerecord ci skip,Summary Added nodoc to classes or modules which have only private methods,,yhirano55,2017-09-02 15:25:54,2017-11-25 15:04:09
PR,Backport changelog links,Backports 29650 and 29588 Means we will get the changelog links on future 5 1 x releases,,"greysteil,greysteil",2017-08-30 14:43:38,2017-11-25 15:05:13
PR,Added Oxford comma Document Example,,,"dixitp012,matthewd,dixitp012",2017-11-25 15:57:44,2017-11-25 16:01:05
PR,Improved logging of AJ is DelayedJob wrapper,Summary ActiveJob wraps every adapter into its own class that is later passed into DelayedJob which is responsible for displaying all the logs This change improves the logging so we can easily trace executed jobs and see meaningful information in the logs,,rafaelfranca,2017-10-13 12:10:32,2017-11-25 17:26:52
PR,Allow skip default ids option to be set in form with,Per ids are not outputted by default in form with Passing skip default ids false will not set the option to false as it is currently overridden and forced to true within form with This change will allow ids to be outputted if skip default ids false is passed,,"rafaelfranca,rafaelfranca,rafaelfranca,matthewd,rafaelfranca,rafaelfranca,rafaelfranca",2017-06-13 15:00:08,2017-11-25 17:48:01
PR,Fix names of http authentication modules in api only guides,Summary Hello Rails guide about api only mode adding other modules states that if you want to add support for basic token digest auth you need to include ActionController HttpAuthentication Basic or Digest or Token modules But in fact you need to include ActionController HttpAuthentication name ControllerMethods L229 L231 This PR fixes the names of needed modules to be included in the guide,,composerinteralia,2017-11-19 20:12:12,2017-11-25 20:31:35
PR,Provide arguments to RecordNotFound,ActiveRecord RecordNotFound has an inconsistent API which led to quite unexpected bug where exception instances in some cases had attributes of primary key model name and others do not This pr solves the issue and adds appropriate arguments to ActiveRecord RecordNotFound,,"prathamesh-sonpatki,rafaelfranca,rafaelfranca",2017-11-20 13:50:07,2017-11-25 20:33:04
PR,minor Engines guide copyedits neutral language verb tense comma splice ci skip,Summary Copyedit changes to the Engines guide change to gender neutral language brothers siblings correct verb tense if the table was not already existing if the table did not already exist fix comma splice They do not hook into any particular framework instead they run They do not hook into any particular framework but instead they run ci skip,,,2017-11-26 08:40:12,2017-11-26 08:46:33
PR,minor Engines guide copyedits neutral language verb tense comma splice ci skip,Summary Copyedit changes to the Engines guide change to gender neutral language brothers siblings correct verb tense if the table was not already existing if the table did not already exist fix comma splice They do not hook into any particular framework instead they run They do not hook into any particular framework but instead they run I opened a previous PR but did not put ci skip into each git commit correctly I closed that one and created this one,,matthewd,2017-11-26 08:50:02,2017-11-26 09:08:52
PR,Flush idle database connections,After 28742 this seems to be a plausible much simpler take on 23815 This is actually two features 1 What it says on the tin allow the connection pool to shrink down to zero at the moment do we want to default to keeping one when it is not seeing enough activity to justify keeping those it has 2 The on load hook which ensures a Puma master process does not keep a connection open just because it needed one during boot Slightly related to 31173 but separate that one is about being safer if we do keep the connection this is about not keeping the connection at all if we do not need it,,"matthewd,matthewd,albertoalmagro,SamSaffron,matthewd",2017-11-25 06:09:14,2017-11-26 09:32:58
IS,DOCUMENTATION Is the template option for render absent from the docs,I was trying to figure out how in a given controller I could render a view template belonging to a different resource than the one the controller was for I know there probably is not a good justification for this but bear with me In the process I chanced upon this SO answer which deals with using render in views to render whole view templates rather than partials also probably hard to justify but hey it works Try to render template render template controller index Or file render template Rails root app controllers controller index I have searched the docs high and low mostly googling site api rubyonrails org render template but have not been able to find any mention of this template option Have I missed it somewhere If not is there any chance this could be added to the appropriate docs page More importantly what use cases was this option originally designed to support Are there times when the situations I mentioned above might actually make sense,,prathamesh-sonpatki,2017-08-24 15:23:33,2017-11-26 10:20:42
IS,ActiveRecord is before update is called on create,ActiveRecord is before update is called on create This happens when the record being create has a belongs to relationship which declares back a has one relationship the common User Profile pattern This seems to be caused by the has one is autosave If the has one has autosave false the block is not called I have briefly looked at the code and what I believe it is happening is User save is triggered User save tries to save the belongs to association Profile Profile save is triggered Profile save saves the Profile record Profile save saves the has one associations though creating the User record User save continues but record is already persisted so it will trigger the update callbacks Steps to reproduce Expected behavior before update block should not be called Actual behavior before update block is called System configuration Rails version master Ruby version ruby 2 4 1p111,,"cristianbica,sgrif,al2o3cr",2017-07-20 07:02:49,2017-11-26 12:01:46
PR,WIP Make partial lookup to be consistent between PartialRenderer and Digestor,Summary Please see 30131 And this has not cause any real issue yet so I'm not sure if I need to add a test for this,,"st0012,st0012",2017-08-25 00:41:46,2017-11-26 15:13:11
PR,ci skip Fix English article,,,"dixitp012,matthewd",2017-11-26 15:29:23,2017-11-26 15:34:21
PR,Remove field ids from scaffold form,This was added with 27f103fc7e3260efe0b8dde66bf5354f2202ee32 for link labels and fields However form with changed to generates ids by default with d3893ec38ec61282c2598b01a298124356d6b35a So I think that adding an explicit ids is unnecessary,,y-yagi,2017-11-26 01:18:33,2017-11-26 18:45:30
IS,Rails warning Overwriting existing method model name open,Steps to reproduce We have a model called Issue which has an open scope scope open where not status CLOSED STATUSES When we deploy our app we are seeing the following console warning W 2017 11 24T03 58 31 015921 4 WARN Creating scope open Overwriting existing method Issue open After deploying the app we tested the Issue open and it performs as as programmed above so the warning seems to be only just a warning and does not actually overwrite the method On first googling we wondered if this old closed issue was at all related What are your thoughts on this funny warning System configuration Rails version 5 2 0 alpha Ruby version 2 4 2,,"georgeclaghorn,georgeclaghorn,matthewd",2017-11-26 20:46:36,2017-11-26 23:11:35
PR,Rename TransactionTimeout to more descriptive LockWaitTimeout,Since 31129 new error class StatementTimeout has been added TransactionTimeout is caused by the timeout shorter than StatementTimeout but its name is too generic I think that it should be a name that understands the difference with StatementTimeout,,"kamipo,matthewd,kamipo",2017-11-25 07:06:23,2017-11-27 01:30:26
PR,Add new error class QueryCanceled which will be raised when canceling statement due to user request,This changes StatementTimeout to QueryCanceled for PostgreSQL In MySQL errno 1317 ER QUERY INTERRUPTED is only used when the query is manually cancelled But in PostgreSQL QUERY CANCELED error code 57014 which is used StatementTimeout is also used when the both case And we can not tell which reason happened So I decided to introduce new error class QueryCanceled closer to the error code name,,kamipo,2017-11-27 01:12:39,2017-11-27 02:54:59
PR,Clean database naming ambiguity,Summary When I was reading this file I found out that this file referred to the database in three different ways database DB and db The last one caused confusion with the db namespace and the db folder This patch removes this ambiguity by using the whole word wouldatabase' everywhere,,"albertoalmagro,rafaelfranca,albertoalmagro,georgeclaghorn,albertoalmagro",2017-11-16 12:36:12,2017-11-27 03:00:38
PR,Use Puma 3 11 in newly generated applications,In order to use early hints need to use Puma 3 11 0 or higher So I think that should specify that version in newly generated applications Ref,,y-yagi,2017-11-27 05:31:43,2017-11-27 05:36:06
PR,Add DSL for configuring Content Security Policy header,Pushing up to get feedback on implementation Documentation Examples Global config in an initializer,,"pixeltrix,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,jeremy,pixeltrix,pixeltrix,pixeltrix,pixeltrix,pixeltrix,pixeltrix,pixeltrix,kaspth,kaspth,kaspth,kaspth,pixeltrix,kaspth,pixeltrix,pixeltrix,pixeltrix,pixeltrix,pixeltrix,pixeltrix,pixeltrix,pixeltrix",2017-11-15 21:16:04,2017-11-27 08:15:46
PR,Fix CHANGELOG for CSP PR 31162 ci skip,r,,"prathamesh-sonpatki,pixeltrix",2017-11-27 10:17:12,2017-11-27 10:32:11
PR,Added missing test for presence of CSP initializer,Followup of 31162 r,,"prathamesh-sonpatki,pixeltrix",2017-11-27 10:10:15,2017-11-27 11:40:01
PR,Added first draft of Rails 5 2 release notes ci skip,,,"prathamesh-sonpatki,prathamesh-sonpatki",2017-11-27 06:44:54,2017-11-27 17:50:50
PR,Update Rails on Rack guide ci skip,,,fgo,2017-11-27 18:46:37,2017-11-27 19:48:04
PR,ci skip Fix documentation for deprecation method wrappers,Seems like version with class methods does not work and seems like it is correct because of module prepending and define method creates instance methods,,,2017-11-27 18:52:33,2017-11-27 20:06:08
PR,Drop mysql2 version less than 0 4 3 to guarantee fork safety,Since 31173 mysql2 adapter depends on automatic close which is introduced since mysql2 0 4 3 So the adapter with the mysql2 version before does not work with fork now This drops mysql2 version less than 0 4 3 to guarantee fork safety,,kamipo,2017-11-27 19:41:14,2017-11-27 20:09:01
IS,Use of expensive Redis operations in Redis Cache Store,Hey maintainer of some sorts of the redis rb gem here I came across the new Cache thingy in Rails using Redis I briefly skimmed the implementation and found the usage of the KEYS command keys called from delete matched delete matched KEYS is a really expensive blocking command on Redis as it will always need to scan the full keyspace for matching elements It is use in production is generally not advised I'm not sure how frequently used the delete matched API is will be so I can not say for sure that it will cause problems This should at least be documented for end users delete matched L208 keys L54,,jeremy,2017-11-27 22:44:45,2017-11-27 23:12:01
IS,Rails api only app not responding to PUT request via patch from pure html forms,Steps to reproduce 1 Create new app with api option 2 Create a model and routes for the model 3 Create another seperate application Add html form in it for updating any resource 4 Form actions should be post and add hidden field with name method and value patch 5 Enter values and click the submit button example form action 3000 brands 3 method post input name method type hidden value patch Brand Name input type text name name value lg new br br Brand Description input type text name desc value india br br input type submit value Submit form Guidelines for creating a bug report are available here creating a bug report Expected behavior Put request should be fired at rails Actual behavior Rails throws error cannot POST resource 3 System configuration Rails 5 1 4 Ruby 2 3 3p222 2016 11 21 revision 56859,,rafaelfranca,2017-11-28 02:07:04,2017-11-28 04:07:43
IS,Failure to run active storage install,Should the activestorage gemspec list db migrate in the files field the Rake task runs correctly if the same app is pointed at edge Rails on GitHub Steps to reproduce System configuration Rails 5 2 0 beta1 Ruby 2 4 2,,"y-yagi,rafaelfranca",2017-11-27 22:02:15,2017-11-28 04:08:31
PR,Include migration files in gem,Fixes 31245,,"y-yagi,y-yagi,rafaelfranca,y-yagi",2017-11-27 22:51:17,2017-11-28 04:08:31
PR,Fix to wrap array literal active job arguments,Summary ActiveJob argument serializer deserializer expects array object but when I execute job with hash argument the argument converted to array object via Enumerable map method example I think it should not to be converted to array so I fix it to wrap array literal for hash object arguments,,rafaelfranca,2017-11-28 06:51:26,2017-11-28 07:20:39
PR,ci skip Update MVC wiki link,,,"dixitp012,kamipo",2017-11-28 11:13:50,2017-11-28 12:15:52
IS,append before action is run before before action,Example code to reproduce the issue Expected behavior In the above code I would expect set time zone to be executed after authenticate Actual behavior set time zone is executed before authenticate System configuration Rails 4 2 10 Ruby 2 2 2,,pixeltrix,2017-11-28 15:39:34,2017-11-28 16:25:02
IS,Rails 5 2 beta breaks javascript packs,Steps to reproduce Create new project using Rails 5 2 0 beta2 rails new webpack react scaffold a controller and page add to view javascript pack tag 'hello react' load 3000 Expected behavior Page to include Hello React Actual behavior Page does not include Hello React and JS console reports System configuration Rails version Rails 5 2 0 beta2 Ruby version ruby 2 4 1p111,,pixeltrix,2017-11-28 14:59:57,2017-11-28 16:30:29
IS,Behavior of the URL generation method is different when RAILS RELATIVE URL ROOT is present,Steps to reproduce There is no subdir System configuration Rails version 5 1 4 Ruby version ruby 2 4 1p111 2017 03 22 revision 58053 x86 64 darwin16,,pixeltrix,2017-11-25 00:39:10,2017-11-28 17:00:27
PR,Fix optimized url helpers when using relative url root,Fixes 31220,,"pixeltrix,pixeltrix,rafaelfranca,pixeltrix",2017-11-28 16:00:15,2017-11-28 17:00:27
PR,Fix minor typos and add some suggestions ci skip,This Pull Request includes some minor typo fixes and suggestions at README files and some comments inside actual code,,"tjschuck,rafaelfranca",2017-10-03 14:48:33,2017-11-28 18:31:12
PR,Fix typos and add a few suggestions,This Pull Request includes some minor typo fixes and suggestions at README files and some comments inside actual code,,,2017-11-28 18:28:39,2017-11-28 18:38:20
PR,Log the original call site for an ActiveRecord query,This is a rebase of against latest master Given the emoji responses I'm not the only one who would love to see this feature in ActiveRecord All credits go to of course,,"bdewater,eileencodes",2017-11-28 17:58:47,2017-11-28 19:44:09
IS,ActionView Helpers AssetTagHelper javascript css link helpers break if the request object is nil,Steps to reproduce 1 Create a default mailer layout mailer html erb 2 Use stylesheet link tag in the layout e g stylesheet link tag mailer media all 3 Attempt to generate an email 4 Observe that the following exception is raised Expected behavior The link should be generated without an exception and without early hints Actual behavior The helper attempts to call request send early hints which raises an exception because request is nil L143 System configuration Rails version 5 2 0 beta2 Ruby version Ruby 2 4 0,,madrobby,2017-11-28 19:18:38,2017-11-28 19:59:41
PR,ci skip Update docs ActiveRecord FinderMethods find,Updating doc comments of ActiveRecord FinderMethods find ref,,,2017-11-28 11:02:22,2017-11-28 20:33:24
PR,Scoping reserved names,Summary Suggestion for resolving 31120 Do not allow creating scopes named same as ActiveRecord Relation instance method,,"eugeneius,eugeneius,eugeneius,eugeneius,eugeneius,eugeneius,eugeneius,eugeneius,eugeneius,eugeneius,eugeneius,eugeneius,eugeneius,eugeneius,kamipo,eugeneius,eugeneius,eugeneius,kaspth",2017-11-18 19:53:14,2017-11-28 20:38:48
IS,Rails can not find fonts when assets are added with Yarn,I just added bootstrap to Rails using yarn yarn add bootstrap nothing works Rails does not see it I'm using Rails 5 1 4 with MacOS High Sierra,,"guilleiguaran,guilleiguaran,guilleiguaran,guilleiguaran",2017-11-28 20:16:48,2017-11-28 20:54:16
PR,Remove duplicate line in ActiveStorage README,Summary Provide a general description of the code changes in your pull request were there any bugs you had fixed If so mention them If these bugs have open GitHub issues be sure to tag them here as well to keep the conversation linked together Other Information If there is anything else that is important and relevant to your pull request mention that information here This could include benchmarks or other information If you are updating any of the CHANGELOG files or are asked to update the CHANGELOG files by reviewers please add the CHANGELOG entry at the top of the file Finally if your pull request affects documentation or any non code changes guidelines for those changes are available here contributing to the rails documentation Thanks for contributing to Rails,,y-yagi,2017-11-28 22:56:47,2017-11-28 23:43:22
IS,add api for SQL EXISTS queries,It should be easy to write EXISTs queries Steps to reproduce new feature Expected behavior It should be easy to write EXIST queries Actual behavior Writing EXIST queries needs me to go down into Ariel or resort to raw SQL Comment The EXIST queries are very important But the rails query api does not yet have sufficient support for that This is an old lasting problem It can be addressed via Arel with some Pain but it is not available on the rails query api I resort to write the EXIST queries in plain SQL but then I'm missing all name aliasing on that There should really be a more easy way to write that kind of queries just some thoughts maybe something like Foo exists Bar where foreign id id In that simplistic case the foreign id should reference Foo and id should reference to Bar so bar should be the self in that block But for more complicated cases we might need something like Foo exists Bar foo table bar table where It was a big step forward to have rails based on Arel but this is nowhere orthogonal yet some work still needs to be done System configuration Rails version Rails 5 1 4 Ruby version ruby 2 4 2p198 2017 09 14 revision 59899 x86 64 darwin16,,y-yagi,2017-11-28 23:01:19,2017-11-29 01:11:47
PR,Formatting fix for example code,Just cleaning up the formatting of the example code here to format an inline bit of commentary as a comment Before After,,tjschuck,2017-11-28 23:18:25,2017-11-29 01:12:18
PR,Refactor Date Time next occurring and prev occurring,I'm hoping to sneak these changes in before this API gets calcified in the pending 5 2 release These methods were originally added in This includes a couple of refactors to make these methods behave more similarly to other Date Time extensions added by Active Support 1 Use advance instead of since and ago to time travel this is particularly important to keep the returned instance s class matching self Before this change After this change a Date or Time or DateTime instance is properly returned just like is shown in the new docs This is generally how everything else in DateAndTime Calculations works 2 Move the tests from the DateTime tests to the DateAndTimeBehavior tests The latter location is mixed in to the core ext tests for all of Date Time and DateTime to test the behavior across all of the classes The previous location is for testing core ext functionality added specifically just to DateTime 3 Better docs,,tjschuck,2017-11-28 23:00:20,2017-11-29 04:06:52
PR,Add preload link tag helper,Summary This helper creates a link tag with preload keyword that allows to the browser to initiate early fetch of resources different to the specified in javascript include tag and stylesheet link tag Additionally this sends Early Hints if supported See 59a02fb for more details about Early Hints Preload spec Usage examples,,"guilleiguaran,y-yagi,guilleiguaran,y-yagi,guilleiguaran,matthewd,guilleiguaran,matthewd,guilleiguaran",2017-11-28 06:30:36,2017-11-29 06:28:23
PR,ci skip Correct output for Upcase,,,"dixitp012,matthewd,kamipo,dixitp012,matthewd,kamipo,matthewd,kamipo,kamipo",2017-11-29 06:27:39,2017-11-29 06:37:40
PR,Mention about Ruby 2 4 Unicode case mappings in mb chars example ci skip,,,"kamipo,dixitp012,kamipo,dixitp012",2017-11-29 07:54:58,2017-11-29 08:18:40
PR,ActiveCable clients do not receive update about state of a subscription,Summary ActionCable is ClientSocket is open and receives a subscription message which is discarded since the socket is not in the desired ready state at that point This leaves both server and client in a stalled state The client is waiting for a subscription update the server for a subscription message The patch idea is fairly simple Do not discard received messages but rather buffer them and process upon opening Other Information I originally assumed this might be related to 24874 and applied the WIP patch by This did not solve the problem While debugging this issue I have documented my findings in this project which contains a Rails app the required scripts to reproduce the problem Please see the README for more information As far as the patch goes Please note that this is the first and simplest solution I came up with I would love to get some feedback and help with a more robust solution I would also appreciate if someone could reproduce the original problem It might make more sense to move the message buffer from connection to the client socket Thanks for your time Have a great day Edits Formatting and typo,,palkan,2017-08-02 14:37:16,2017-11-29 14:24:25
PR,Use credentials instead of keyfile in GCS sevice,The keyfile was renamed to credentials in google cloud storage 1 8 0 180 2017 11 14 Although keyfile can still be used but it looks like deprecate L589 L590 Therefore I think that should use credentials in newly generated applications Ref,,"y-yagi,kaspth,y-yagi,kaspth,georgeclaghorn,georgeclaghorn,georgeclaghorn,y-yagi,georgeclaghorn,y-yagi",2017-11-29 04:18:43,2017-11-29 14:25:28
PR,Inverse instance should not be reloaded during autosave if called in validation,Fix for Record saved in save has one association already will make a call to association loaded from save belongs to association as before save callback but this allow owner object to reload if called from record is validation,,,2017-11-24 12:32:47,2017-11-29 15:38:28
IS,Avoid printing screenshots to terminals that do not support them,Steps to reproduce The system tests include the ability to output screenshots of tests and this happens by default for failing tests These are sent to the terminal but some terminals do not support inline images and instead print out the base64 encoded copy of the image L71 L75 I have encountered this using the default Terminal in Ubuntu 16 04 To reproduce change any system test so that it fails and run this on Ubuntu 16 04 It is hinted that this might be an expected problem in 28185 final paragraph Some terminals will swallow the image data but when images do get printed to the terminal it fills the scrollback with gobs and gobs of data screenshot from 2017 11 15 17 00 43 Expected behavior The base64 encoded image data should not be shown on terminals that do not support inline images The output should be simple rather than inline for these terminals Perhaps simple should be the default and inline only for terminals that are known to support it Actual behavior The scrollback is completely filled with base64 encoded image data System configuration Rails version 5 1 4 Ruby version 2 4,,"rafaelfranca,rafaelfranca,rafaelfranca,eileencodes,eileencodes,matthewd,eileencodes",2017-11-15 17:05:49,2017-11-29 16:02:09
IS,Unfriendly default on ApplicationSystemTestCase after teardown,Steps to reproduce Run a failing system spec from any terminal which is not iterm2 Expected behavior I would expect to see the error displayed Actual behavior Binary output is put directly into the terminal System configuration Rails version 5 1 4 Ruby version 2 4 2 Currently it is not possible to disable screenshot on failure without overriding the ApplicationSystemTestCase after teardown or take failed screenshot I found an env variable with API docs RAILS SYSTEM TESTING SCREENSHOT I propose to make the default simple instead of inline as the last option works on specific configurations only,,"rafaelfranca,eileencodes",2017-10-23 15:50:11,2017-11-29 16:02:09
IS,Referencing associated records in validation makes them disappear from instance,Steps to reproduce I was able to reproduce this issue with the template detail part disappears from detail instance when saved It is saved correctly so when reload ed the detail part is there I noticed that this validation runs twice for some reason On the second run detail parts association appears to be not loaded detail association detail parts loaded false I guess AR tries to load records from db and caches the empty result,,eileencodes,2017-11-08 16:26:29,2017-11-29 16:06:41
IS,Inconsistent return value for to sql with null conditions,This is probably an edge case but I thought the following behavior violates the principle of least surprise Steps to reproduce 1 Call none to sql on any standard AR model 2 Call where id to sql Expected behavior I would expect the resulting strings to both be valid SQL Actual behavior 9 pry main Person none arel where sql WHERE 1 0 10 pry main Person where id arel where sql WHERE 1 0 System configuration Rails version 5 1 3 Ruby version 2 3 3p222,,matthewd,2017-11-29 04:07:08,2017-11-29 16:54:40
IS,Reminder to remove redis gem version restriction,As soon as this is resolved in Rails,,,2017-11-29 17:38:33,2017-11-29 17:38:54
PR,WIP Adding ActiveStorage previewer for text files using the ImageMagick,Produces an image showing the first few lines of the text file on a blank canvas E g preview,,"georgeclaghorn,guilleiguaran",2017-11-29 16:03:08,2017-11-29 18:25:00
IS,new framework defaults rb as an initializer does not actually work as an upgrade path,If your app uses any gem that augments the behavior of ActiveRecord or ActionController that references ActiveRecord Base or ActionController Base outside of an ActiveSupport on load block the new framework defaults rb initializer has no effect This appears to happen because the framework initializers that setup the on load to copy the app config to the individual frameworks run before config initializer files Because the gems have already triggered the load the app config is copied immediately before the initializer files have set the values Steps to reproduce Super simple concrete example Generate a 5 0 app which has new framework defaults rb Load a console and check ActiveRecord Base belongs to required by default and it will be as the initializer has it set Add ActiveRecord Base after Bundler require Rails groups line in application rb to simulate a gem that augments or uses ActiveRecord Load a console and check ActiveRecord Base belongs to required by default which will now show as nil Expected behavior The upgrade config values from new framework defaults rb need to actually be applied Actual behavior The upgrade config is not actually applied System configuration Rails version Rails 5 as long as new framework defaults rb is setting something other than a default Ruby version Tested on 2 4 2 but likely an issue across the board This does have a broader impact in that any app that uses an initializer to set Rails application config action controller or Rails application config active record and is using a gem that triggers the autoload of those classes before the rails initialization kicks off is not doing what they think it is doing,,rafaelfranca,2017-11-29 17:43:13,2017-11-29 19:24:43
IS,tempdir generator ordering issue,Steps to reproduce Guidelines for creating a bug report are available here creating a bug report rails new rails52 Expected behavior Tell us what should happen The active storage generator is being run before the generator making tmp dirs meaning the generator making the tmp dir itself is not needed Actual behavior Tell us what happens instead System configuration Rails version 5 2 0 beta2 Ruby version ruby 2 4 2,,,2017-11-29 16:05:38,2017-11-29 20:00:15
IS,Credentials cleared when running credentials edit,Steps to reproduce 1 Run bundle exec rails credentials edit and add some well formed YAML to the credentials file 2 Run bundle exec rails credentials show and observe the just added YAML credentials 3 Run bundle exec rails credentials edit a second time Expected behavior The credentials loaded in the EDITOR should contain the entries added in step 1 Actual behavior The credentials are reset to the default empty condition containing secret key base entry only My hunch is that the IO backing the temporary file might need to be flush ed around line 62 L62 in ActiveSupport EncryptedFile writing this hypothesis is based on a quick skim through the source code mdash I have no evidence to support it at this stage System configuration Rails v5 2 0 beta2 Ruby 2 4 2 EDITOR set to either Emacs GNU nano or gedit,,"y-yagi,kaspth,kaspth,kaspth",2017-11-29 20:01:16,2017-11-30 01:15:47
PR,Do not overwrite by default if credentials already exists,Fixes 31286,,y-yagi,2017-11-29 23:06:23,2017-11-30 01:15:47
IS,Sprockets error when precompiling assets on new app generated with skip keeps,Steps to reproduce System configuration Rails version 5 2 0 beta2,,Edouard-chin,2017-11-29 23:33:14,2017-11-30 03:07:54
PR,Cleaning up line length in active support cache,Attempt to limit most lines of code and documentation to around 100 characters Some lines were harder to condense due to lack of domain knowledge,,matthewd,2017-11-30 03:55:52,2017-11-30 04:03:14
PR,Move system test dependencies to test group,Summary This PR moves system test dependencies to the test group so they are not installed in the development group,,eileencodes,2017-11-30 15:36:29,2017-11-30 17:22:41
IS,Streaming with ActionCable,I'm trying to implement a new feature that requires a bit of real time functionality My project is built using Rails 5 1 3 and I want to achieve my goals using ActionCable Basically I have a dashboard with multiple widgets Each widget displaying a certain informations like RAM CPU usage Git Hub Pull Requests Count Issues Count Honey Badger errors count etc There is a Sidekiq job that runs every 30 seconds that saves data and streams it to the consumer dashboards show My question is how do I stream only to dashboards that are online how do I know if the page www myapp com dashboards 1 is used Lets say I have 1000 dashboards I do not want to stream data to all of the from the job only to the dashboards that are used Thank you At the moment I have the following code but Its not working properly module DashboardTracker def self add sub dashboard id redis watch dashboard dashboard id online redis multi do redis INCR dashboard dashboard id online end end def self remove sub dashboard id redis watch dashboard dashboard id online val redis multi do redis DECR dashboard dashboard id online end if val 0 0 redis del dashboard dashboard id online end end def self sub count dashboard id redis get dashboard dashboard id online to i end end def subscribed stream from dashboard params wouldashboard id' DashboardTracker add sub params wouldashboard id' end def unsubscribed DashboardTracker remove sub params wouldashboard id' end And in the job if Dashboard online widget dashboard id stream data I can not understand why but the unsubscribe method is not called all the time there are cases when a page refresh wo not call it and everything is messed up Hope I posted the question it he right place if not I'm sorry and I will remove it Thank you,,"palkan,palkan",2017-08-24 15:36:54,2017-11-30 18:31:13
PR,Keep current Code Climate behavior before upgrade,Summary This PR means that Code Climate will continue to run the same analysis on Rails as it always has on your pull requests If you do not merge these changes when Code Climate migrates Rails to our new analysis very soon Code Climate will continue to run Rubocop but it will ALSO run Code Climate is new maintainability checks You may want this you may not Just want to make sure you knew how to tweak or disable if you so desire Other Information How to tweak the maintainability checks Blog post Code Climate is New 10 Point Technical Debt Assessment Blog post A new clearer way to understand code quality,,matthewd,2017-11-30 04:24:11,2017-11-30 19:27:08
IS,rails credentials edit does not allow user to save changes,Steps to reproduce export EDITOR vi rails credentials edit Which opens the credentials file and then using vim I make my edits and wq rails credentials edit Observe the changes made are not saved and what appears is the original default file Expected behavior Changes made and saved from vi editor should persist to the actual credentials yml enc file Actual behavior Changes are never actually saved System configuration On macOS High Sierra 10 13 1 Rails version 5 2 0 beta2 Ruby version 2 4 2,,y-yagi,2017-11-30 22:21:11,2017-11-30 23:35:12
PR,ci skip Updated links for unicorn which redirect added https for n,,,dixitp012,2017-11-30 11:38:43,2017-11-30 23:38:11
PR,Cosmetic changes for Gemfile ci skip,,,ydakuka,2017-11-30 06:37:07,2017-12-01 02:43:05
IS,Respect gems rb for Bundler 2 0 and higher do not tie to Gemfile,Hi Anyone knows that Bundler 2 0 will use gems rb instead of Gemfile for the project dependencies Actually it supports gems rb starting from current version 1 16 and everyone can but not must use it So I think it will be great to support this feature in Rails Currently it tied to Gemfile in bundle tt and boot rb tt L1 templates so if anyone will try to migrate to new dependencies format he will get an error while trying to run an application The workaround is to manually rename Gemfile to gems rb in bin bundle and config boot rb Ca not find any related issues so I created this one Steps to reproduce Install Bundler 1 16 rename Gemfile to gems rb in any RoR project run bundler install and run rails server Expected behavior Booting Puma Rails 5 1 4 application starting in development Run rails server h for more startup options Puma starting in single mode Version 3 11 0 ruby 2 4 1 p111 codename Love Song Min threads 5 max threads 5 Environment development Listening on tcp 3000 Use Ctrl C to stop Actual behavior home nbulai projects dummy app Gemfile not found System configuration Rails version any Ruby version any,,georgeclaghorn,2017-11-30 08:54:31,2017-12-01 03:11:53
IS,destroy no longer throws RecordNotFound,This may be desirable but it is odd in a minor version release It breaks the default behavior of a lot of standard controllers as in Expected behavior It should throw a RecordNotFound Actual behavior It does not System configuration Rails version 5 2 0 beta2 Ruby version 2 4 2,,"kamipo,matthewd,kamipo",2017-11-30 16:52:30,2017-12-01 03:54:43
PR,Class level update and destroy checks all the records exist before making changes,It makes more sense than ignoring invalid IDs cc,,"kamipo,matthewd,kamipo,matthewd,matthewd,kamipo",2017-12-01 05:02:28,2017-12-01 09:21:21
PR,Drop the before fork on worker boot advice,It is no longer required for Active Record and other common libraries dalli redis rb all seem to be fork proof too I was going to drop the more obscure before fork but keep on worker boot but I could not come up with a way to describe when it is necessary or what to do nor a plausible example Not because it is hard to describe the problem it fixes but because the except for all common libraries exception makes it sound silly and confusing Maybe we can just drop it entirely If most people do not need it it seems fine to treat it like any other Puma config option that exists but is not promoted in the generated file Alternatively does anyone have any other good examples of widely seen code that apps need in one or both of these CodeTriage says no Discourse does a lot but nothing that strikes me as needing general promotion cc this is follow on from 31221 and 31173 which remove the need for AR connection management,,matthewd,2017-11-27 13:32:52,2017-12-01 09:48:18
IS,render stream true always use default locale in layout,Steps to reproduce I have a waiting PR on this issue but It is stalled So I'm here to check if it is something you plan to support Here is some background 1 3 Drop the Fiber which is the root cause of this bug and use a threaded model Actual behavior Within the layout we loose all track of Thread current System configuration Rails version I tested with 5 1 3 Ruby version I tested with 2 4 1p111 But I'm not sure it is relevant Fiber does not support access to Thread current so same behaviour since the introduction of the Fiber,,,2017-09-01 10:42:47,2017-12-01 15:05:04
IS,Sending save to model returned by becomes should update type column,Steps to reproduce This test pass but should fail at expect UserBase first role to eq 'guest' Thanks,,,2017-12-01 15:37:26,2017-12-01 15:51:33
PR,Make ASt previewer analyzer binary paths configurable,cc,,georgeclaghorn,2017-12-01 03:04:22,2017-12-01 16:07:31
PR,Add ability to create validate invalid foreign keys in Postgres,Summary In Postgres adding foreign keys can cause significant downtime because the transaction needs to acquire some very heavy locks on the table being altered as well as the table being referenced To illustrate if I wanted to add a foreign key on my addresses table referencing my users table The first transaction acquires the same AccessExclusiveLock on the users table but the potentially lengthy initial check to verify that all rows in the table satisfy the constraint is skipped source postgres docs Subsequently the validation step does not block reads or writes on the users table So this PR introduces two things The ability to create invalid foreign keys by specifying the option valid false A validate foreign key method which takes the same variety of params as the other foreign key methods to validate a foreign key I have heard rumors about this being on the roadmap for the Postgres team i e skipping the check if the table being altered is empty and marking the constraint valid In any case perhaps someday this will be more easily achieved with built in Postgres but for now it is an issue,,"kamipo,kamipo,kamipo,kamipo,kamipo,kamipo,bogdanvlviv,maclover7,kaspth,kamipo,kamipo,kamipo,matthewd,schneems,matthewd",2017-01-20 23:13:33,2017-12-01 16:29:54
IS,Refused to evaluate a string as JavaScript because 'unsafe eval' is not an allowed source of script in the following Content Security Policy directive script src iself' https,Steps to reproduce I create 2 demo Rails apps One using Rails 5 1 4 rails 5 1 4 new skip coffee webpack vue demo rails vue and the second with Rails 5 2 0 beta2 rails new skip coffee webpack vue demo rails vue2 For both I created a Procfile dev with the following content System configuration Rails version 5 1 4 Working fine Rails version 5 2 0 beta2 Showing the problem Ruby version 2 4 2,,"guilleiguaran,guilleiguaran,guilleiguaran,guilleiguaran,guilleiguaran,guilleiguaran,guilleiguaran,guilleiguaran",2017-11-30 14:14:29,2017-12-01 17:25:29
IS,Group uses wrong type when column name exists on selecting table,Steps to reproduce Using postgresql gem pg v 0 18 Using this schema This does work in Rails 5 0 0 to 4 2 System configuration Rails version 5 0 1 5 1 4 Ruby version 2 3 3,,,2017-11-30 22:57:38,2017-12-01 19:35:18
IS,ActiveSupport PerThreadRegistry is pre Fiber and not PerThread,Steps to reproduce test conn swap in fiber test will fail on that gist Expected behavior When setting a new connection handler to ActiveRecord Base new Fibers running on the same thread should use that handler Actual behavior Because ActiveRecord RuntimeRegistry uses ActiveSupport PerThreadRegistry that means the attributes created there will be per thread and per fiber as PerThreadRegistry uses Thread current method System configuration Rails version Latest Ruby version Latest I wonder if this is a by design thing see comment issuecomment 94164135 The issue here though is setting a connection handler is a valid AR api And it end up been by fiber and not per thread which is a surprising behavior thoughts I found that issue when debugging some connection swapping issues at GitHub I assume Shopify would not have this problems because they use,,"arthurnn,tenderlove,matthewd,arthurnn,fxn,matthewd,sgrif,matthewd,sgrif,matthewd,arthurnn",2017-08-02 19:46:55,2017-12-01 19:54:45
PR,ci skip Add a missing space before closing curly braces,small fix for guides,,willnet,2017-12-02 07:37:24,2017-12-02 10:14:36
PR,Extract sql fragment generators from PostgreSQL adapter,This change introduces a layer of command sql helpers that generate sql fragments leaving public methods like change column as a ALTER TABLE x shell This refactor is in preparation for supporting change table bulk true Also changes Postgres adapter is change column to not apply update when passed null and default to mirror MySQL and SQLite adapters change column null still applies update,,,2017-11-26 07:31:11,2017-12-02 17:49:28
IS,Configure Content Security Policy for Action Cable,Steps to reproduce Generate a new app 5 2 0 beta2 with Action Cable Expected behavior when generating a fresh application the content security policy should add directive to connect src to work with Action Cable Should skip if action cable is ignored when generating a new app Actual behavior Content security policy has no instructions for connect src which is fine as the default setting however there should be instructions to turn it on for Action Cable For instance I added the following in config initializers content security policy rb System configuration Rails version 5 2 0 beta2 Ruby version 3 3 1,,"jeremy,guilleiguaran,pixeltrix,guilleiguaran",2017-12-01 20:08:41,2017-12-02 22:39:12
PR,Fix typo in test error message,With the current code a failing test shows this error which is missing the number of times called and has two periods at the end This was probably just a typo introduced in 31084 y yagi,,"claudiob,y-yagi",2017-12-02 20:03:27,2017-12-03 01:30:57
IS,Purge blob and all variants,Steps to reproduce I have a model named event which has a logo attachment Inside the rails console called event logo purge It only purged the main blob and did not purge all the other variants Expected behavior All variants should be purged or should exist an option to do that System configuration Rails 5 2 0 beta2,,,2017-11-30 01:03:25,2017-12-03 03:43:29
PR,Purge variants with their blobs,Fixes 31290,,"georgeclaghorn,kaspth,kaspth,kaspth,kaspth,kaspth,georgeclaghorn,georgeclaghorn,kaspth,georgeclaghorn,georgeclaghorn,kaspth,kaspth,georgeclaghorn,kaspth",2017-12-02 23:27:08,2017-12-03 03:43:29
PR,Emulate JSON types for SQLite3 adapter,Actually SQLite3 does not have JSON storage class so it is stored as a TEXT like Date and Time But emulating JSON types is convinient for making database agnostic migrations,,kamipo,2017-07-03 23:45:03,2017-12-03 06:28:10
PR,SQLite3 valid integer value should be 8 bytes 64 bit signed integer,This is a regression since Rails 4 2 SQLite3 integer is stored in 1 2 3 4 6 or 8 bytes depending on the magnitude of the value Assuming default valid value as 4 bytes caused that actual valid value in INTEGER storage class cannot be stored and existing value cannot be found We should allow valid value in INTEGER storage class in SQLite3 to fix the regression Fixes 22594,,"kamipo,pixeltrix,kamipo,kamipo",2017-03-11 07:39:21,2017-12-03 06:45:41
PR,Ignore NoDatabaseError when loading schema cache,When loading schema cache fetch current migration version However if database does not exist connection acquisition will cause an error This is a problem when create database When databas is not yet schema cache is unnecessary so fixed it to ignore errors Context issuecomment 348404326,,"y-yagi,y-yagi,matthewd,jeremy,y-yagi",2017-12-02 02:05:19,2017-12-03 17:12:40
IS,5 2 0 beta2 doesnt load in dev mode,Steps to reproduce I have just upgraged project to 5 2 0 beta2 and it does not work in dev mode I sincerely do not have a clue where to start my investigation but I think it is connected somehow to assets it works fine in production configuration with precompiled assets I tried setting config assets debug false for development but it did not work either My sidekiq jobs work correctly in dev mode Expected behavior Something should load Actual behavior Application explodes with stack overflow System configuration Rails version 5 2 0 beta2 master 4c4d092 Ruby version 4 2 1 Stacktrace,,kaspth,2017-12-02 13:34:50,2017-12-03 17:30:04
PR,Add possibility to set custom Rails application credentials object,In multi environment application one can set custom file by The last missing part of credentials feature r,,"morgoth,morgoth,kaspth,morgoth",2017-11-28 13:25:08,2017-12-03 18:06:13
PR,Update cookie store test to use encrypted cookies,Summary This now modernizes these tests to use encrypted cookies instead of using secret token HMACs This commit also adds a test diff ddd3ea55daa7e105c86ed353964cfd5bR323 to ensure session cookies with expires after set are invalidated and no longer accepted when the time has elapsed cc,,"mikeycgto,kaspth,kaspth,kaspth,rafaelfranca,kaspth,kaspth",2017-11-14 00:20:27,2017-12-03 18:10:23
PR,Include reference key type exception for SQLite,Summary Before all primary keys had type integer by default and the documentation reflected that After 26266 MySQL and PostgreSQL started using bigint as default type while SQLite continued using integer as big integer is not supported At 31007 documentation was updated to bigint but this was not accurate because SQLite does not support it This patch reflects this exception,,"albertoalmagro,sgrif,albertoalmagro,sgrif,albertoalmagro",2017-12-03 23:22:04,2017-12-03 23:24:37
PR,Update Active Record Query Interface guide ci skip,Add missing LIMIT 1 for some queries Make some examples of query more readable,,bogdanvlviv,2017-12-03 23:24:44,2017-12-03 23:25:16
IS,ActionCable cannot set websocket endpoint,Steps to reproduce in your config set config action cable url 'wss your websocket host ' Expected behavior Actioncable should be able to use third party websocket endpoint Actual behavior ActionCable returns Unexpected response 200 in javascript console System configuration Rails version 5 1 Ruby version 2 4,,,2017-11-05 17:10:37,2017-12-04 10:30:02
PR,Add tests for the webpack option,We probably do not have any tests for the webpack option Related to 27288,,guilleiguaran,2017-11-29 15:11:33,2017-12-04 15:37:55
IS,Minitest with Rails 5 2 0 Uninitialized constant Minitest Rails TestUnit NameError,While using Ruby 2 3 3 and upgrading the Rails gem from 5 1 4 to 5 2 0 beta2 rake fails I can not tell if the problem is with minitest 5 10 3 or Rails 5 2 0 beta2,,"jeremy,jeremy,jeremy",2017-12-04 17:42:39,2017-12-04 20:39:06
IS,Ca not use ActionController Parameters in URL helpers,The problem is that the keys are strings by default now It would be better if it uses Hash instead of HashWithIndifferentAccess or gives us an ability to choose System configuration Rails version 5 1 3 Ruby version 2 3 3,,,2017-08-29 06:55:19,2017-12-04 20:49:00
IS,Repeated method in same callback causes unexpected behavior,Specifying before save my before save callback my before save callback causes the specified callback to be run exactly once before a save not twice as expected Specifying after update commit my commit callback after after commit my commit callback causes the specified callback to only be run only on an update commit not e g on a create commit These may be considered desired behavior based on the Notes at the bottom of the define callback method i define callbacks documentation If this is the case better documentation and warning should be provided Steps to reproduce GIST Repeated calls to the same method in a before save callback are executed only once GIST A call to the after commit callback is not executed on create Expected behavior The my before save callback method should run twice on save The my commit callback method should run on any commit Actual behavior The my before save callback method runs once on save The my commit callback method runs only on an update commit System configuration Rails version Notes These issues seem to be very much related caused by this usage of merge L851 L853,,"sgrif,eugeneius",2017-09-05 19:41:14,2017-12-04 23:41:31
PR,Backport support for PostgreSQL 10 pg sequence,Fixes 28780 for Rails 4 2,,sgrif,2017-12-05 03:25:06,2017-12-05 03:32:09
PR,Fix CSP copy boolean directives,Summary Copying a CSP instance fails if the instance contains Boolean directives specifically this affects the block all mixed content upgrade insecure requests and sandbox directives,,"jeremy,jeremy",2017-12-04 19:14:36,2017-12-05 07:13:48
PR,Fix example code in ActiveJob Core ci skip,1 It seems that it raise error on example code in ActiveJob Core Before Then it run DeliverWebhookJob perform now in rails console And it does'nt raise error NoMethodError 2 Use Timeout Error instead of TimeoutError TimeoutError is deprecated,,yhirano55,2017-12-05 06:32:37,2017-12-05 07:32:42
IS,First request on Windows is extremely slow,Steps to reproduce Install Redmine on Windows Open Redmine in browser Open Redmine in browser again Expected behavior Similar loading times for both requests Actual behavior The first request is extremely slow 5s compared to the second one 1s Subsequent requests are fast too System configuration Rails version 4 2 8 Ruby version rubyinstaller 2 4 2 2 x64 This could be the same issue as 25805 The comments suggest that the issue is not really resolved,,vipulnsward,2017-12-05 10:34:10,2017-12-05 11:04:28
IS,Missing doc with supported ruby version for each rails version,Hi In my job we have tried to upgrade ruby to 2 4 in an application using rails 3 2 and we have found it was not possible due to an incompatibility with activesupport 3 and ruby 2 4 We have tried to find a doc with the supported ruby version for each rails version but we did not find it For example in rails 3 this doc shows it is required at least ruby 1 8 7 rails 3 requires at least ruby 1 8 7 but it does not show the maximum supported version of ruby I think it is 2 3 x Do you think this information can be placed in rails guides If yes I can send a PR with this Thanks,,rafaelfranca,2017-12-05 15:39:07,2017-12-05 16:19:51
PR,Add more tests for the webpack option,Related to 31279,,,2017-12-05 09:55:19,2017-12-05 19:32:15
PR,Speed up travis by only installing packages when needed,It appears that Travis is spending several minutes per build job installing ffmpeg and mupdf but only uses them on activestorage builds 4 of 46 builds Only installing them on builds where needed should speed up Travis quite a bit Work in progress for now I will update with stats after this build is green,,"georgeclaghorn,georgeclaghorn,guilleiguaran",2017-12-05 14:26:50,2017-12-05 19:56:33
IS,Sneaky Params via Resource Identifier Configuration,This is probably a very hypothetical problem And please do not ask how I found it But somehow it still bugs me Steps to reproduce Since Rails 4 0 it is possible to sneak in additional parameters via the param option for resources You can do something like that routes draw do resources users param 'name sneaky' end ActionDispatch Routing Mapper Resources Resource initialize L1134 just takes it as is Later the strings generated by member scope L1186 and nested param L1196 are handed over to the Journey Parser L1919 which creates an AST with the sneaked in parameters You will see that the parameters are added to the RouteSet and can be used by the controller action def show render plain params name params sneaky end Full reproduction example is available here visualizer can be commented out L21 Expected behavior I would expect the mapper to escape the colon somehow or to throw a route mapping generation error System configuration Rails version 4 0 up to master currently at 87eb1a26da0b1385af07a8347dcfd32998a614ee Ruby version Since you can write colons in symbols Further questions Is there any possibility that someone out there is using this as a feature Is there any possibility to sneak in user input into your route generation Some sort of CMS maybe Like param 'id is admin',,jeremy,2017-08-30 14:03:01,2017-12-05 20:52:02
IS,Touch does not reset previous changes like save does,Rails has before commit and after commit callbacks which run on create update destroy and also on touch which also triggers a DB commit The problem is that touch does not reset previous changes like save does So the same after commit callbacks that we run on after update also run on after touch but previous changes keeps outdated changes If you create an interest and then create a group like Market Group create market interest interest you will receive a second email System configuration Rails version 2 3 3 Ruby version 5 1 3,,,2017-08-30 13:45:20,2017-12-05 20:52:03
IS,Ca not test job with dynamic arguments,Currently if you want to test that a job was enqueued with specific arguments you can use assert enqueued with e g In the example above we already have a reservation id available however I am not able to test this if execute code is the place where the reservation is created The problem is exarcebated if there are multiple invocations of the same job as the usual workaround that is to capture the output of assert enqueued with returns a single job I see 2 solutions for this return an array of jobs on assert enqueued with with all the instances of the job that were enqueued support passing a block to evaluate the arguments to be checked after the execution of the main block pass if one invocation was made with the supplied arguments similar to how rspec does L282 L284 I support the second option as it does not break compatibility with previous versions I can work on that if it is accepted Rails version 5 1 0 Ruby version 2 4 1,,,2017-08-30 14:45:43,2017-12-05 20:52:04
PR,Execute JsonAttributeTest only if supports json returns true,Summary Oracle enhanced adapter does not fully support JSON datatype then supports json returns false I wanted to skip known failures and errors when tested with Oracle enhanced adapter Steps to reproduce,,"yahonda,sgrif,yahonda",2017-12-05 20:07:56,2017-12-05 22:12:13
IS,5 2 0 beta 'order' SQL whitelist does not treat 'lower safe thing ' as safe,Steps to reproduce In a 5 2 0 beta2 Rails app with an AR model say Blog with a string attribute say name issue a query such as Actual behavior The new SQL fragmenting whitelist code does not recognize it as safe and issues an unsafe query method deprecation warning suggesting wrapping the fragment in an invocation of Arel sql I understand not wanting to open the Pandora is box of a full SQL parse but the code already does quite a bit more than bare column names and allowing 'lower ' and possibly 'LOWER ' as prefixes on the current COLUMN NAME WHITELIST with a matching ' ' suffix would not add all that much hair And there are codebases in which this construct occurs a lot System configuration Rails 5 2 0 beta2 Ruby 2 3 4,,jeremy,2017-12-05 22:22:56,2017-12-05 23:56:56
IS,active storage install fails when gem bullet is there,Steps to reproduce Run rails active storage install while using the gem bullet with Rails 5 2 0 beta 2 Expected behavior Well the migration should run as expected Actual behavior This is the stack trace of what happens System configuration Rails version 5 2 0 beta2 Ruby version 2 4 0,,guilleiguaran,2017-12-06 07:26:36,2017-12-06 07:39:19
PR,Add assert in epsilon to Testing guide ci skip,Summary I found assert in epsilon is not be in 2 4 Available Assertions available assertions So I Added them MiniTest Assertions assert in epsilon L204 L210 Screenshot I have confirmed a html document generated by bundle exec rake guides generate html image,,yhirano55,2017-12-06 00:21:29,2017-12-06 14:21:55
PR,Yield array from AC Parameters each for block with one arg,Matches Hash each behaviour as used in Rails 4 Other Information Reproducer passes on 4 2 stable fails on 5 0 stable or master Ruby is Hash each pair implementation which also switches on the block arity L1810,,"domcleal,rafaelfranca,domcleal",2017-01-24 11:07:10,2017-12-06 16:01:45
PR,Use string instead of text for JsonAttributeTest,Since CLOB data type has many limitations in Oracle SELECT WHERE clause JsonAttributeTest is a test for JSON attribute attribute payload json on text column not for JSON data type So it should pass the test regardless of supports json I think that the oracle enhanced failure is due to CLOB data type limitations Can you confirm the test result on this branch,,"kamipo,yahonda,kamipo,yahonda",2017-12-05 23:55:28,2017-12-06 19:32:06
IS,AR model with decimal array column is dirty right after load,Steps to reproduce Here is a simple Rails 4 2 7 application demonstrating the problem It contains failing specs already For those not willing to mess with the above app here is the problem Create a model with an array column of decimals having a scale 0 Expected behavior Record should not be dirty after loading from the backend Actual behavior Record is changed right away System configuration Rails version 4 2 7 Ruby version 2 3 3,,lugray,2017-08-31 16:56:10,2017-12-06 21:35:55
IS,Counter cache updates wrong column with through relation,Steps to reproduce Expected behavior Counter articles count will be updated Actual behavior Instead of articles count counter column call of reset counters updates issues count counter column System configuration Rails version master Ruby version 2 4 0,,,2017-08-31 12:19:18,2017-12-06 21:35:56
IS,Environment specific credentials,Steps to reproduce Run Rails application credentials from the console from any environment Expected behavior Rails application secrets will return environment specific secrets from secrets yml if they are name spaced by environment I would expect Rails application credentials to do the same There are instances where data like third party API keys are still unique to the loaded environment It would be nice to be able to store these in the encrypted credentials as well Instead of having to do this Actual behavior Rails application credentials returns all credentials at root level System configuration Rails version 5 2 0 beta2 Ruby version 2 4 2,,y-yagi,2017-12-06 19:53:19,2017-12-06 22:46:48
PR,Correct routing test spelling mistake,Summary This PR simply corrects the spelling of precedence in a routing test,,y-yagi,2017-12-06 21:03:23,2017-12-06 22:51:44
IS,Actioncable does not support faye websockets in rails 5 1 any more,Hi I just saw that apparently actioncable in rails 5 1 does not have any more the option to be used with gem faye websocket which is needed for actioncable to work with some web servers like thin In rails 5 0 as it is documented here you had the option to configure the actioncable server to use faye like Rails application config action cable use faye true But in rails 5 1 you would receive the following exception And in the documentation for actioncable in rails 5 1 the property use faye seems indeed to be removed Without this property actioncable wo not work with some web servers that need faye to work with it at least thin Is there a new way to configure actioncable 5 1 with faye or support was totally removed This is related to issue 23696 Ruby version 2 2 7,,"y-yagi,y-yagi",2017-10-02 15:11:00,2017-12-07 08:19:39
IS,DEPRECATION WARNING call is deprecated and will be removed from Rails 5 1,Expected behavior Rails 5 0 0 1 warning appears here call is deprecated but not sure if there are any alternatives offered Actual behavior Rails 5 1 4 breaking behaviour in this version response call env breaking here undefined method call' for XYZController Class System configuration Rails version Rails 5 1 4 Ruby version ruby 2 3 1p112,,matthewd,2017-12-07 03:24:57,2017-12-07 11:16:21
PR,ci skip Make Todo classes inherit ApplicationRecord,Summary Example codes that use has many or before create in Module Concerning look like active record models So I have made them inherit ApplicationRecord,,"yhirano55,pixeltrix",2017-12-07 05:57:19,2017-12-07 11:20:16
PR,ci skip Error message correction Integer to Fixnum,,,"dixitp012,kaspth",2017-12-07 11:30:16,2017-12-07 12:17:25
IS,change table migration fails on sqlite if table is using id false and custom id type string for uuid,Steps to reproduce Create a table with id false in options and then create an id column with primary key true Create a record on this table Then try to create a migration to alter the table remove column for example Test case reproducing the error Expected behavior That the migration works Actual behavior An SQLite3 MismatchException datatype mismatch is raised The temporary table created seems to have fixed id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL ignoring the previous id false on table creation System configuration Rails version 5 1 2 Ruby version 2 4 1,,composerinteralia,2017-11-22 16:29:12,2017-12-07 12:58:22
PR,Fix sqlite migrations with custom primary keys,Fixes Previously if a record was created with a custom primary key that table could not be migrated using sqlite While attempting to copy the table the type of the primary key was ignored generating a DataTypeMismatch error Once that was corrected copying the indexes would fail because custom primary keys are autoindexed by sqlite by default so copying those fields would create a duplicate index To correct that this skips copying the index if the index name begins with sqlite This is a reserved word that indicates that the index is an internal schema object SQLite prohibits applications from creating objects whose names begin with sqlite so this string should be safe to use as a check ref intschema,,rafaelfranca,2017-12-04 22:14:30,2017-12-07 12:58:22
PR,Backport fix sqlite migrations with custom primary keys to 5 1 stable,This backports bbacd60 which allows a record created with a custom primary key to be migrated using sqlite Previously while attempting to copy the table the type of the primary key was ignored creating a DataTypeMismatch error This also skips copying an index if the index name begins with sqlite Previously copying the index for custom primary keys would fail because they are autoindexed by sqlite so attempting to copy them created a duplicate index sqlite is a reserved word that indicates that the index is an internal schema object SQLite prohibits applications from creating objects whose names begin with sqlite so this string should be safe to use as a check ref intschema cc,,eileencodes,2017-12-07 16:30:41,2017-12-07 18:36:11
IS,Populate from current scope attributes does not work with polymorphic associations,Steps to reproduce System configuration Rails version 5 2 0 beta2 master Ruby version 2 4 2,,,2017-12-05 13:10:53,2017-12-07 18:49:17
PR,Add headless firefox driver to System Tests,Firefox supports headless mode starting with version 56 This PR adds headless firefox support to System Tests r,,"bogdanvlviv,bogdanvlviv",2017-12-07 18:30:31,2017-12-07 19:44:06
PR,Fix issue 30658 by checking explicitly for 'null' referrer,Summary Currently when a POST request with request forgery checking enabled occurs Rails checks the request origin to see if it is either nil not sent or equal to the expected origin As mentioned in issue 30658 Chrome has begun serving a referrer of null when no referrer is specified in the referrer policy header Because of this all authenticity checking POST requests originating on a page with no referrer enabled will fail This PR adds code that checks for the explicit string null in the referrer and allows it through,,"sgrif,sgrif,sgrif,sgrif,sgrif,sgrif",2017-10-02 20:43:42,2017-12-07 21:19:40
IS,Include documentation on ar internal metadata in Active Record Migrations Guide,Steps to reproduce Go to and search for any of the following keywords NoEnvironmentInSchemaError Environment data ar internal metadata db environment set Expected behavior I should find some documentation of the behavior added in This blog post would be a good start Actual behavior No official Rails documentation for this feature exists that I can find via google and there were no updates to guides in the original PR even though it claims there is documentation issuecomment 239876192 System configuration Rails version 5 Ruby version N A,,"thewoolleyman,sgrif,sgrif,thewoolleyman,thewoolleyman,thewoolleyman",2017-02-11 19:14:41,2017-12-07 22:47:32
IS,path helpers ignore default url options,Steps to reproduce,,pixeltrix,2017-01-24 02:21:04,2017-12-07 22:47:33
IS,Production mode and assets precompile,Hello assets js files was change and run command rails assets clobber assets precompile when the rails server is work in production mode Changes is not be appling You need restart server What can apply to change js and css file without restat server Thanks config environments production rb System configuration Windows 10 x64 Rails 5 1 3 Ruby 2 4 1p111 2017 03 22 revision 58053 x64 mingw32,,,2017-09-01 14:22:52,2017-12-07 22:47:34
IS,test session store with expire after failure with JRuby,Steps to reproduce Additional information Differences are Extra script encoding comment encoding ASCII 8BIT is encoded to 3D System configuration Rails version master branch Ruby version jruby 9 1 13 0 2 3 3 2017 09 06 8e1c115 OpenJDK 64 Bit Server VM 25 141 b16 on 1 8 0 141 b16 jit linux x86 64,,"yahonda,yahonda",2017-09-08 00:48:36,2017-12-07 23:33:32
IS,validates confirmation of always return valid if confirmation is nil,Steps to reproduce 1 Create a new rails application 2 Create any simple model validating confirmation of a field Example System configuration Rails version 5 1 4 Ruby version ruby 2 3 1,,georgeclaghorn,2017-12-07 17:54:32,2017-12-08 00:47:41
PR,Considering nil confirmation value in validates confirmation of a no valid case,Summary Changing validate each method to include nil values in the validation Test added to ensure the functionality,,georgeclaghorn,2017-12-07 18:07:45,2017-12-08 00:48:33
IS,app template and dYYYYMMDD nnnnn directories not deleted after running railties unit tests,While investigating 31351 I have found that app template directory and dummy applications named like d20171208 9536 183z97g remain at tmp directory after unit tests completed Steps to reproduce System configuration Rails version master branch Ruby version ruby 2 4 2p198 2017 09 14 revision 59899 x86 64 linux gnu,,"yahonda,y-yagi,yahonda",2017-12-08 00:20:00,2017-12-08 02:50:02
IS,Documentation changes merged are not visible,My pull request for association document were merged However the they are not reflected on document yet Changes In the image models are shown to be dervied from ActiveRecord Base which should be ApplicationRecord,,y-yagi,2017-12-08 02:42:47,2017-12-08 02:51:55
PR,Raises error when truncate receives non string,Currently ActionView Helpers TextHelper truncate raises error with following message when it receives non string It is hard to understand what is wrong from this message This issue can resolve by calling to s in truncate but I thought that allowing many types is risky So I specify it accepts only string,,,2017-09-09 05:36:33,2017-12-08 07:07:41
IS,Rails 5 upgrade Halt callback config issue,I have recently upgraded from Rails 4 2 to 5 0 6 I know about the change in callback halting using throw abort instead of returning false My problem is that I can not make the deprecation warnings go away DEPRECATION WARNING Returning false in Active Record and Active Model callbacks will not implicitly halt a callback chain in Rails 5 1 To explicitly halt the callback chain please use throw abort instead I have made config initializers callback terminator rb file with following code ActiveSupport halt callback chains on return false false but I am not still not able to get rid of the warning Nor am I getting the expected behaviour It seems that this configuration is not being applied I am experiencing this in both dev and test environments Is there something I am missing,,y-yagi,2017-12-08 06:58:49,2017-12-08 07:27:24
PR,ci skip Added puts to fix output code,The previous code output as follows,,"dixitp012,kaspth,dixitp012",2017-12-08 07:30:50,2017-12-08 08:23:58
PR,Extended API for CSP,Summary To ActionDispatch ContentSecurityPolicy add merge and append e g script src append public methods This enhanced API allows for simpler code when extending the base application CSP mdash for example in a controller callback More information Perhaps merge is not the most appropriate method name after all this behaves very differently from Hash merge The append method names are not particularly elegant it would be far nicer to be able to append to a directive like this Appending to an existing directive is also potentially problematical for at least the following reasons If the directive already contains 'none' then it is not clear what the appended directive value should be It is not clear how mdash if at all mdash duplication should be handled when appending to an existing directive Both of these concerns also apply in the case of merging two or more CSPs,,"pixeltrix,guilleiguaran",2017-12-07 18:15:30,2017-12-08 10:04:55
PR,Fix Rails environment when running tests with Ruby,I frequently run tests with ruby not with a runner like rake or rails When running the test with just ruby the RAILS ENV environment variable did not get set to test and this would cause the tests to fail and even mutate the development database This commit adds integration tests for running tests with just ruby and ensures the environment gets defaulted to test I also added a test to ensure that passing an environment to e actually works and fixed that case too An interesting annoying thing is that Minitest picks up it is plugins by asking RubyGems for a list of files L92 L100 This means that RubyGems needs to somehow know about the file before it can return it to Minitest Since we are not packaging Rails as a Gem before running the integration tests on it duh why would you do that RubyGems does not know about the file so it can not tell Minitest so Minitest does not automatically require it This means I had to manually require and insert the plugin in our integration test I have left comments about that in the test as well Ugh,,"tenderlove,rafaelfranca,rafaelfranca,tenderlove,Edouard-chin,tenderlove",2017-12-07 01:34:05,2017-12-08 22:54:58
PR,docs add example for a nil name in link to,Summary Add example of nil name in link to docs,,claudiob,2017-12-07 00:48:51,2017-12-09 04:05:00
IS,ActiveRecord causes errors for rdoc 6 0,Steps to reproduce Approach 1 Use Ruby 2 4 2 and rdoc 6 0 1 1 Use rbenv to install Ruby 2 4 2 with rbenv install 2 4 2 1 2 Install rdoc 6 0 with gem install rdoc 1 3 Install ActiveRecord with gem install activerecord Approach 2 Use Ruby 2 5 0 dev 2 1 Use rbenv to install Ruby 2 5 0 dev with rbenv install 2 5 0 dev 2 2 Install activerecord with gem install activerecord Expected behavior No errors get generated Actual behavior Errors get generated rbenv shell 2 5 0 dev gem install rails Snip irrelevant output Parsing documentation for arel 8 0 0 Installing ri documentation for arel 8 0 0 Parsing documentation for activerecord 5 1 4 RDoc Parser Ruby failure around line 1 of lib rails generators active record migration templates create table migration rb Before reporting this could you check that the file you are documenting has proper syntax Users agrimm rbenv versions 2 5 0 dev bin ruby c lib rails generators active record migration templates create table migration rb RDoc is not a full Ruby parser and will fail when fed invalid ruby programs The internal error was NoMethodError undefined method ' for nil NilClass ERROR While executing gem NoMethodError undefined method ' for nil NilClass gem install rails Successfully installed rails 5 1 4 Parsing documentation for rails 5 1 4 Installing ri documentation for rails 5 1 4 Done installing documentation for rails after 0 seconds 1 gem installed Users agrimm rbenv versions 2 5 0 dev bin ruby c lib rails generators active record migration templates create table migration rb Traceback most recent call last Users agrimm rbenv versions 2 5 0 dev bin ruby No such file or directory lib rails generators active record migration templates create table migration rb LoadError gem install activerecord version 5 1 3 Fetching activesupport 5 1 3 gem 100 Successfully installed activesupport 5 1 3 Fetching activemodel 5 1 3 gem 100 Successfully installed activemodel 5 1 3 Fetching activerecord 5 1 3 gem 100 Successfully installed activerecord 5 1 3 Parsing documentation for activesupport 5 1 3 Installing ri documentation for activesupport 5 1 3 Parsing documentation for activemodel 5 1 3 Installing ri documentation for activemodel 5 1 3 Parsing documentation for activerecord 5 1 3 RDoc Parser Ruby failure around line 1 of lib rails generators active record migration templates create table migration rb Before reporting this could you check that the file you are documenting has proper syntax Users agrimm rbenv versions 2 5 0 dev bin ruby c lib rails generators active record migration templates create table migration rb RDoc is not a full Ruby parser and will fail when fed invalid ruby programs The internal error was NoMethodError undefined method ' for nil NilClass ERROR While executing gem NoMethodError undefined method ' for nil NilClass Users agrimm rbenv versions 2 5 0 dev bin ruby c activerecord 5 1 4 lib rails generators active record migration templates create table migration rb activerecord 5 1 4 lib rails generators active record migration templates create table migration rb 1 syntax error unexpected ' ' class migration class name activerecord 5 1 4 lib rails generators active record migration templates create table migration rb 1 syntax error unexpected tCONSTANT expecting end of input ord Migration ActiveRecord Migration current version Trying with Ruby 2 4 2 works fine with rdoc 5 0 but not rdoc 6 0 rbenv shell 2 4 2 gem install activerecord Fetching concurrent ruby 1 0 5 gem 100 Successfully installed concurrent ruby 1 0 5 Fetching i18n 0 9 1 gem 100 Successfully installed i18n 0 9 1 Fetching thread safe 0 3 6 gem 100 Successfully installed thread safe 0 3 6 Fetching tzinfo 1 2 4 gem 100 Successfully installed tzinfo 1 2 4 Fetching activesupport 5 1 4 gem 100 Successfully installed activesupport 5 1 4 Fetching activemodel 5 1 4 gem 100 Successfully installed activemodel 5 1 4 Fetching arel 8 0 0 gem 100 Successfully installed arel 8 0 0 Fetching activerecord 5 1 4 gem 100 Successfully installed activerecord 5 1 4 Parsing documentation for concurrent ruby 1 0 5 Installing ri documentation for concurrent ruby 1 0 5 Parsing documentation for i18n 0 9 1 Installing ri documentation for i18n 0 9 1 Parsing documentation for thread safe 0 3 6 Installing ri documentation for thread safe 0 3 6 Parsing documentation for tzinfo 1 2 4 Installing ri documentation for tzinfo 1 2 4 Parsing documentation for activesupport 5 1 4 Installing ri documentation for activesupport 5 1 4 Parsing documentation for activemodel 5 1 4 Installing ri documentation for activemodel 5 1 4 Parsing documentation for arel 8 0 0 Installing ri documentation for arel 8 0 0 Parsing documentation for activerecord 5 1 4 Installing ri documentation for activerecord 5 1 4 Done installing documentation for concurrent ruby i18n thread safe tzinfo activesupport activemodel arel activerecord after 29 seconds 8 gems installed gem install rdoc Fetching rdoc 6 0 0 gem 100 rdoc is executable rdoc conflicts with Users agrimm rbenv versions 2 4 2 bin rdoc Overwrite the executable yN y rdoc is executable ri conflicts with Users agrimm rbenv versions 2 4 2 bin ri Overwrite the executable yN y Successfully installed rdoc 6 0 0 Parsing documentation for rdoc 6 0 0 Installing ri documentation for rdoc 6 0 0 Done installing documentation for rdoc after 11 seconds 1 gem installed rbenv shell 2 4 2 gem install activerecord version 5 1 3 Fetching activesupport 5 1 3 gem 100 Successfully installed activesupport 5 1 3 Fetching activemodel 5 1 3 gem 100 Successfully installed activemodel 5 1 3 Fetching activerecord 5 1 3 gem 100 Successfully installed activerecord 5 1 3 Parsing documentation for activesupport 5 1 3 Installing ri documentation for activesupport 5 1 3 Parsing documentation for activemodel 5 1 3 Installing ri documentation for activemodel 5 1 3 Parsing documentation for activerecord 5 1 3 RDoc Parser Ruby failure around line 1 of lib rails generators active record migration templates create table migration rb Before reporting this could you check that the file you are documenting has proper syntax Users agrimm rbenv versions 2 4 2 bin ruby c lib rails generators active record migration templates create table migration rb RDoc is not a full Ruby parser and will fail when fed invalid ruby programs The internal error was NoMethodError undefined method ' for nil NilClass ERROR While executing gem NoMethodError undefined method ' for nil NilClass gem list rdoc LOCAL GEMS rdoc 6 0 0 default 5 0 0 System configuration Rails version 5 1 4 Ruby version 2 4 2,,"y-yagi,matthewd,y-yagi",2017-12-08 04:00:34,2017-12-09 04:29:33
PR,CI against JRuby 9 1 15 0,JRuby 9 1 15 0 has been released,,bogdanvlviv,2017-12-08 21:37:03,2017-12-09 06:33:54
IS,ar,Steps to reproduce Guidelines for creating a bug report are available here creating a bug report Expected behavior Tell us what should happen Actual behavior Tell us what happens instead System configuration Rails version Ruby version,,,2017-12-09 06:11:35,2017-12-09 06:38:46
IS,What does rake rails update do,I'm trying to update our version of Rails 4 2 6 to the latest version something I have never tried before so suspect is going to be a painful journey with a lot of visits to SO I started by following this guide at But the advice seems incomplete I have started out following the advice to do one minor version at time so switched to 4 2 7 ran bundle update and then ran the test suite So far so good everything passed But the guide then instructs me to run rake rails update at which point everything goes haywire The guide does not really say what the task does and its description is Update configs and some other initially generated files or use just update configs or update bin but the updates involved commenting out or deleting a bunch of config that the app relies on and adding a bunch of lines with no sense of what they do In a couple of cases it is obvious I would want to reject the change but in many I do not have a deep enough understanding of the changes I'm also suspicious that there are so many suggested changes in a single patch update which makes me wonder if it is essentially resetting these files to the state in which it would have generated them I came onto the project after the app had been set up and the people who did so no longer work on it so I can not easily confirm this What is the best way to know what if any of its suggestions to keep And should I be running it after every step of the update or just when tests break,,matthewd,2017-12-08 17:26:30,2017-12-09 08:44:38
PR,AR Connection Management Guide,A new guide for AR Connection management coming out of discussion in 27759 see rendered markdown here This is my first pass with everything relevant I could think of I have dealt with these issues in various ways over the years and I might be forgetting details or use cases Please give me any and all feedback and I will try to improve the document one question i have right off am i remembering this correctly In previous version of rails you needed to think about managing connections when spawning threads but this is no longer the case,,"gaurish,gaurish,eugeneius,arthurnn,arthurnn,bquorning,bquorning,robin850,matthewd,matthewd",2017-07-16 02:33:03,2017-12-09 11:50:43
PR,Change the system tests to set Puma as default server only when the user have not specified manually another server,In our app we are configuring a custom server for Capybara in this way But System Tests are overriding the Capybara server to puma so our configuration is not taking effect With this change the Capybara server is set only if the user has not customized it manually so it is other than default,,"guilleiguaran,eileencodes,guilleiguaran",2017-12-09 21:54:15,2017-12-09 23:34:34
PR,Reset cache before test,Currently test copy table with composite primary keys test fails depending on execution order The reproduction step is as follows The column info is cached by PrimaryKeyAnyTypeTest test any type primary key and the test seems to have failed due to the influence Therefore added a reset to fix Related L1788,,"y-yagi,y-yagi,kamipo,y-yagi",2017-12-10 03:05:41,2017-12-10 04:00:13
PR,Remove whitespace,,,eileencodes,2017-12-10 15:20:18,2017-12-10 19:22:46
PR,webpack is assigned but never used in webpack config js,Summary Removed webpack const so it is assigned but never used in webpack config js After it removed it can run yarn build and generate a file app assets javascripts activestorage js,,yhirano55,2017-12-10 15:09:27,2017-12-11 11:49:04
PR,StreamingTemplateRenderer fails to forward I18n locale in layouts,Hello I recently used the option to render some actions Ruby 2 4 1p111 Rails 5 1 3 We noticed that our layout failed to keep the current locale I18n locale After some explorations here is what happens the I18n gems stores the current config in a Thread current local the StreamingTemplateRenderer streams the response via a Fiber resume pattern unfortunatelly the Fiber does not keeps the Thread current i18n config This commit includes a simple fix keeping a reference of the I18n config above the Fiber scope and re applying this reference to I18n config Here is a link to a gist with other options FiberWithI18n copy the I18n config from caller FiberWithLocalsFromCallerThread copy all caller is threads local vars within the Fiber locals hash it is a bit overkill but it may be useful for other gems parts of rails you can switch implementations from the gist and fails the test using normal Fiber class,,eileencodes,2017-08-22 15:01:51,2017-12-11 13:08:04
PR,Set MYSQL mariadb explicitly to run CI with MariaDB at 5 0 stable,Summary This pull request aims to address 5 0 stable CI failure I think it would address the error above Since has been backported to 5 0 stable branch I have no other idea how to address it,,"yahonda,yahonda,eileencodes,yahonda",2017-12-11 17:06:27,2017-12-11 17:35:33
PR,ci skip Update instrumentation guide for ActiveStorage,Summary Added service delete prefixed active storage which is using in ActiveStorage Service delete prefixed L55 L67,,"yhirano55,georgeclaghorn,yhirano55,yhirano55",2017-12-11 18:24:05,2017-12-11 19:20:59
PR,Return nil instead of false if raise Azure Core Http HTTPError,Summary If it raise error Azure Core Http HTTPError return nil instead of false in ActiveStorage Service AzureStorageService delete Other services behave as same as this ActiveStorage Service DiskService delete L41 L49 ActiveStorage Service GCSService delete L46 L54,,"yhirano55,yhirano55",2017-12-11 18:06:12,2017-12-11 19:32:21
PR,create fixtures does not work since at least a94220b,create fixtures does not work since at least a94220b66c9e4890007f66b092b25f8a64a19d31 The namespacing should be ActiveRecord FixtureSet I might be missing something but I'm not sure why create fixtures is useful for nowaday unless for testing rails internal shrug and since it is been that long it was not working I think it should be fine to just fire it,,Edouard-chin,2017-12-11 22:22:32,2017-12-11 22:55:14
IS,Request for rails website Issue is not about Rails it is self,Steps to reproduce Guidelines for creating a bug report are available here creating a bug report Expected behavior This has to do with the guide is website rather then rails its self When scrolling through a guide the side navigation on your right side on desktop view should follow users as they scroll Actual behavior When scrolling the side navigation stays at the top of the page,,y-yagi,2017-12-11 18:14:07,2017-12-11 23:48:20
IS,Accept format 10x slower than URL format mystery,Behaviour steps to reproduce If you request a javascript view using the Accept header to specify the format Rails seems to slow down partial rendering almost 10x If you simply add js to the URL with or without Accept header Rails does its thing at normal speed Output is the same everything else is the same no DB queries just not having js on a URL results in a 10x slowdown Boom minimal repro with further details and logs Expected behavior The Accept javascript header adding js to the URL should do the same thing right Both tell Rails it is javascript format The output and logs are the same in both cases so what extra thing could Rails be doing for every partial rendered Something something caching System configuration Rails version 5 1 3 Ruby version 2 4 0,,"matthewd,matthewd",2017-09-01 16:07:32,2017-12-12 00:02:50
IS,Scope named records behaves inconsistently,Steps to reproduce Rails should raise ArgumentError that this is a dangerous method or not a valid scope name Actual behavior The method call records is handled by ActiveRecord Relation object if it is called after calling a scope and immediately executes the query Unless records is the called first in which case it seems to be working properly This was working in previous version of Rails and seems to have been broken in Rails5 0 System configuration Rails version 5 0 6 Ruby version 2 4 1,,eugeneius,2017-11-10 13:34:33,2017-12-12 05:50:25
PR,ci skip Update routing guide for Direct resolved routes,Summary Added the direct method to routing guide,,"yhirano55,yhirano55,kamipo,yhirano55,kamipo,yhirano55",2017-12-11 18:51:26,2017-12-12 05:56:22
PR,Fix secrets command deprecation message,,,,2017-12-12 05:41:37,2017-12-12 06:06:09
PR,Prevent race condition when resetting time stubs,If the current thread is preempted after the stub has been removed but before the original method has been restored then the other thread will get a NoMethodError when it tries to call the method Using silence redefinition of method instead of undef method ensures that either the stub or the original method is always in place See which fixed several similar method redefinition race conditions,,eugeneius,2017-12-12 06:41:52,2017-12-12 07:23:32
IS,Removed,Nevermind probably not an issue with rails,,,2017-12-12 08:35:47,2017-12-12 10:05:02
PR,Remove stale comment about ActiveRecord SchemaDumper ignore tables skip ci,Ignoring tables when dumping structure was introduced for sql format here So comment was no longer valid from than time,,fatkodima,2017-12-12 12:19:00,2017-12-12 12:23:09
IS,Credentials are wiped out on edit,Steps to reproduce 1 Create a new Rails project 2 rails credentials edit 3 Add new credential anywhere in the file 4 Save and exit from the editor 5 rails credentials show will show what you just added Expected behavior rails credentials edit when the editor opens I see all my added credentials Actual behavior rails credentials edit when the editor opens my added credentials are gone The message is always System configuration Rails version 5 2 0 beta2 Ruby version ruby 2 4 2p198 2017 09 14 revision 59899 x86 64 darwin16,,y-yagi,2017-12-12 05:37:10,2017-12-12 12:28:34
PR,ci skip Fix Active Support Changelog about race condition ttl,I was reading the changelog and noticed with this I do not know if this was on purpose to arrange the line length but it should have been called as race condition ttl since the option itself is called as race condition ttl cc,,meinac,2017-12-12 14:24:52,2017-12-12 14:56:39
PR,Revert only install ffmpeg and mupdf on activestorage builds,Summary This pull request reverts 6ec0ed67d9afcc666ad0424b10e9903f63e60714 changed based on the discussion issuecomment 351082441 Other Information At first I attempt to revert 7544cf7603959f25100b21f70b5e70354bed7e45 but it is a merge commit then reverted the original commit 6ec0ed67d9afcc666ad0424b10e9903f63e60714 cc,,"yahonda,eileencodes,yahonda",2017-12-12 15:35:43,2017-12-12 15:41:49
IS,GEM ar postgresql with Ruby 2 4 2 has been failing at Travis CI,Steps to reproduce Since GEM ar postgresql with Ruby 2 4 2 has been failing at Travis CI I do not think this is due to this commit Because another CI for pull requests including this commit are fine It should not be opened as Rails issue but I do not know other proper way It would be helpful if Rails committer who can change CI setting take some actions Expected behavior It should pass Actual behavior System configuration Rails version master branch Ruby version 2 4 2,,"yahonda,yahonda,yahonda,eileencodes,matthewd,eileencodes,yahonda,yahonda,eileencodes",2017-12-08 02:06:31,2017-12-12 16:31:08
PR,Quote colum names when building select,Quote colum names when building select 30980 introduced a change to not use Arel star when model have ignored columns a query used to look like SELECT FROM developers whereas now it would like SELECT column1 column2 FROM developers If a column has the same name has a reserved database specific keyword such as key where then the query would fail because the names are not quoted Quoting almost always happen unless we use a from clause in the query L1052 This PR cast all columns name to symbols in order for the quoting logic to be picked up L1054 L1055 A reproduction script can be found here,,"Edouard-chin,rafaelfranca,Edouard-chin,rafaelfranca,Edouard-chin",2017-12-11 19:31:32,2017-12-12 17:31:35
IS,ActiveStorage and Mongo,Steps to reproduce This is a possible feature request I just installed Rails 5 2 0 beta2 and created a project with the O option because I want to use Mongo instead of a relational database What I noticed is that ActiveStorage which I wanted to try out was also disabled I just saw that the gem is depending on ActiveRecord exclusively Expected behavior Create a project with O but not with skip active storage and have ActiveStorage available while ActiveRecord is disabled Actual behavior ActiveRecord is not available System configuration Rails version 5 2 0 beta2 Ruby version ruby 2 4 2p198 2017 09 14 revision 59899 x86 64 darwin16,,rafaelfranca,2017-12-12 04:55:42,2017-12-12 17:42:42
IS,before type cast does not appear to work in Rails 5 for decimal columns,Steps to reproduce Run this script Expected behavior I expected before type cast to return the data as entered by the user Actual behavior I get a BigDecimal Expected 11 Actual 0 11e2 System configuration Rails version 5 1 4 Ruby version 2 4 2p198,,"rafaelfranca,sgrif,sgrif",2017-12-11 21:17:06,2017-12-12 18:18:02
IS,ActiveStorage migration fails if encoding is not utf8,Steps to reproduce 1 Create a new rails app specifying mysql as the database rails new MyApp d mysql 1 Change database yml encoding option to utf8mb4 1 Create database and run migration rails db create db migrate Expected behavior Active storage migration should run successfully Actual behavior Active storage migration fails with the error Mysql2 Error Specified key was too long max key length is 767 bytes Emojis are pretty common making utf8mb4 a necessity and in such a case the index keys would need to be limited to 191 Could this be set as the default in the migration Or is there another solution beyond having users change the standard ActiveStorage migration Cheers System configuration Rails version 5 2 0 beta2 Ruby version 2 4 2,,rafaelfranca,2017-12-06 23:05:43,2017-12-12 19:22:19
PR,Fix doc typo ci skip,Summary Provide a general description of the code changes in your pull request were there any bugs you had fixed If so mention them If these bugs have open GitHub issues be sure to tag them here as well to keep the conversation linked together Other Information If there is anything else that is important and relevant to your pull request mention that information here This could include benchmarks or other information If you are updating any of the CHANGELOG files or are asked to update the CHANGELOG files by reviewers please add the CHANGELOG entry at the top of the file Finally if your pull request affects documentation or any non code changes guidelines for those changes are available here contributing to the rails documentation Thanks for contributing to Rails,,,2017-12-12 21:34:52,2017-12-12 21:47:20
IS,Counter cache conflicts with touch true by optimistic locking,Steps to reproduce System configuration Rails version 5 1 4 or master 858baa0 Ruby version 2 4 2,,rafaelfranca,2017-11-22 15:42:49,2017-12-12 21:47:52
PR,Fix conflicts counter cache with touch true by optimistic locking,Fixes 31199,,"bogdanvlviv,rafaelfranca,bogdanvlviv",2017-12-11 22:05:30,2017-12-12 21:47:52
IS,ActiveSupport MessageEncryptor InvalidMessage Rails 5 1 secrets,I generated secrets yml enc secrets yml key after secrets edit and deploy by capistrano I get above error I do not know why Production mode locally works fine but on real production wrong home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems activesupport 5 1 4 lib active support message encryptor rb 133 in rescue in decrypt' ActiveSupport MessageEncryptor InvalidMessage ActiveSupport MessageEncryptor InvalidMessage from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems activesupport 5 1 4 lib active support message encryptor rb 112 in decrypt' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems activesupport 5 1 4 lib active support message encryptor rb 84 in decrypt and verify' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems railties 5 1 4 lib rails secrets rb 55 in decrypt' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems railties 5 1 4 lib rails secrets rb 96 in preprocess' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems railties 5 1 4 lib rails secrets rb 27 in block in parse' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems railties 5 1 4 lib rails secrets rb 24 in each' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems railties 5 1 4 lib rails secrets rb 24 in each with object' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems railties 5 1 4 lib rails secrets rb 24 in parse' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems railties 5 1 4 lib rails application rb 391 in secrets' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems devise 4 3 0 lib devise rails rb 36 in block in class Engine ' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems railties 5 1 4 lib rails initializable rb 30 in instance exec' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems railties 5 1 4 lib rails initializable rb 30 in run' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems railties 5 1 4 lib rails initializable rb 59 in block in run initializers' from home crazypiter1990 rvm rubies ruby 2 2 5 lib ruby 2 2 0 tsort rb 226 in block in tsort each' from home crazypiter1990 rvm rubies ruby 2 2 5 lib ruby 2 2 0 tsort rb 348 in block 2 levels in each strongly connected component' from home crazypiter1990 rvm rubies ruby 2 2 5 lib ruby 2 2 0 tsort rb 429 in each strongly connected component from' from home crazypiter1990 rvm rubies ruby 2 2 5 lib ruby 2 2 0 tsort rb 347 in block in each strongly connected component' from home crazypiter1990 rvm rubies ruby 2 2 5 lib ruby 2 2 0 tsort rb 345 in each' from home crazypiter1990 rvm rubies ruby 2 2 5 lib ruby 2 2 0 tsort rb 345 in call' from home crazypiter1990 rvm rubies ruby 2 2 5 lib ruby 2 2 0 tsort rb 345 in each strongly connected component' from home crazypiter1990 rvm rubies ruby 2 2 5 lib ruby 2 2 0 tsort rb 224 in tsort each' from home crazypiter1990 rvm rubies ruby 2 2 5 lib ruby 2 2 0 tsort rb 203 in tsort each' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems railties 5 1 4 lib rails initializable rb 58 in run initializers' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems railties 5 1 4 lib rails application rb 353 in initialize ' from usr home crazypiter1990 domains crazypiter1990 usermd net releases 20171211152401 config environment rb 5 in top required ' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems activesupport 5 1 4 lib active support dependencies rb 292 in require' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems activesupport 5 1 4 lib active support dependencies rb 292 in block in require' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems activesupport 5 1 4 lib active support dependencies rb 258 in load dependency' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems activesupport 5 1 4 lib active support dependencies rb 292 in require' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems railties 5 1 4 lib rails application rb 329 in require environment ' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems railties 5 1 4 lib rails command actions rb 16 in require application and environment ' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems railties 5 1 4 lib rails commands console console command rb 96 in perform' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems thor 0 20 0 lib thor command rb 27 in run' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems thor 0 20 0 lib thor invocation rb 126 in invoke command' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems thor 0 20 0 lib thor rb 387 in dispatch' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems railties 5 1 4 lib rails command base rb 63 in perform' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems railties 5 1 4 lib rails command rb 44 in invoke' from home crazypiter1990 domains crazypiter1990 usermd net shared bundle ruby 2 2 0 gems railties 5 1 4 lib rails commands rb 16 in top required ' from bin rails 9 in require' from bin rails 9 in main ' System configuration Rails version Rails 5 1 4 Ruby version 2 2 5,,"y-yagi,rafaelfranca,kaspth",2017-12-11 16:00:29,2017-12-12 21:59:39
PR,Make sanitize sql methods public,Currently sanitize methods are private So need send to use from outside class However sometimes want to use sanitize methods from outside Class when want to generate SQL including multiple tables like search In order to avoid using send in such a case changed methods to public,,y-yagi,2017-12-11 03:38:57,2017-12-12 22:54:26
IS,Refused to execute script because its MIME type 'text html' is not executable and strict MIME type checking is enabled,Sorry this was a mistake I found out the why of the issue I was doing a jsonp call and have a return if size 0 in Rails 5 0 it was throwing an 500 Internal Server Error while now in Rails 5 1 it seems returning the error Refused to execute script because its MIME type 'text html' Please remove close this issue would be also nice if you confirm this change thanks,,,2017-09-12 15:42:36,2017-12-12 22:58:21
IS,Unexpected column added,I created a migration and noticed that an unexpected column was added checking the migration I realized there was a typo System configuration Rails version 5 1 3 Ruby version 2 3 1,,"al2o3cr,rafaelfranca",2017-12-07 19:30:39,2017-12-12 23:04:14
IS,Ordering by an associated table column breaks limit offset queries,This is similar to one of the problems described in 28364 but I m not sure it s exactly the same so I m filing separately Feel free to mark as a duplicate if it is ActiveRecord smartly breaks up a query using limit and offset into two queries if it includes an associated model table so you get one query for the primary table s IDs based on the specified limit and offset then a second query for the full joined data based on those IDs However if you add ordering by a column in the associated table that ordering is included in the first query which means you might get the wrong IDs The returned rows are not distinct records from the primary table anymore each row is now a distinct join on the primary and associated table Example below This actually seems largely correct but if you are also ordering by some aspect of the primary table first the ordering from the associated table could be left off the first query which would be really helpful Steps to reproduce I ve got an app that tracks changes to web pages over time so we have a Page and a Version model I d also love to know if there s a better way to handle this in the mean time System configuration Rails version 5 1 3 Ruby version 2 4 1,,,2017-09-06 02:37:33,2017-12-12 23:58:04
PR,Fix protected environments with symbols,Convert protected environments to an array of strings It will prevent ignoring environments name of which is a Symbol Update 'Configuring Rails Applications' guide Add mention about config active record internal metadata table name Add mention about config active record protected environments,,bogdanvlviv,2017-12-12 23:27:09,2017-12-13 03:35:25
PR,Optimizing information schema query for foreign keys,Use CONSTRAINT SCHEMA key for information schema referential constraints See,,"kamipo,kamipo",2017-12-13 04:11:54,2017-12-13 04:34:16
PR,Fix 18062 honor scope attributes on build,Summary Inheritance build does not take the current scope is attribute into account e g Company where type 'Firm' build builds a Company instead of a Firm I believe this behavior is unexpected given that Company build type 'Firm' builds a Firm this inconsistency presents itself when having a has many relationship with an STI enabled model e g company customers build can fail Other Information ref 18062 based on and supercedes 18227,,,2017-09-26 08:15:51,2017-12-13 05:16:08
IS,Join model not touching associated object on destroy,Steps to reproduce Run this test case Expected behavior It should touch the associated object on destroy It does not seem to run any callbacks on destroy but it does when the join model SitePublication in the test case is created Actual behavior It does not touch the associated object on destroy System configuration Rails version 4 2 7 1 This is what I run locally but it seems to affect master as well as seen in the test case above Ruby version 2 3 3,,al2o3cr,2017-10-09 09:31:46,2017-12-13 10:11:52
PR,updated the readme md file,Summary Edited the MVC Architecture as understandable i mean not too technical for a newbie retained older license contibution and other links readme md was too verbose and it would'nt attract newbie so changed the file as easy go through make rails great again,,eileencodes,2017-12-13 10:29:41,2017-12-13 13:00:05
PR,Fix active storage installation failure when in engine,Summary When developing an engine active storage install task should be invoked for an app instead of an engine as bin rails T says This error occurs because in activestorage lib tasks activestorage rake active storage install migrations is invoked instead of app active storage install migrations So I have added a check if in engine by checking ENGINE PATH and invoke app active storage install migrations appropriately I am still not sure if checking ENGINE PATH is the best way to do it though,,"eileencodes,eileencodes,eileencodes",2017-12-11 03:28:33,2017-12-13 13:10:44
PR,Make it same title in index and page ci skip,Summary I found some different title between index of guide and the page of guide So I fixed to make them same title If the title is different between index and page I choose more specific one Action View Form Helpers Securing Rails Application Testing Rails Applications and Upgrading Ruby on Rails were chosen from index is title,,"yhirano55,yhirano55",2017-08-30 17:13:56,2017-12-13 15:23:15
PR,Suppress expected exceptions by report on exception false,Summary This pull request suppress expected exceptions by report on exception false in Ruby 2 5 Ruby 2 4 introduces report on exception to control if it reports exceptions in thread this default value has been false in Ruby 2 4 Refer Ruby 2 5 changes report on exception default value to true since this commit This pull request suppresses expected exceptions by setting report on exception false it also supports Ruby 2 3 which does not have report on exception Other Information This pull request suppresses these traces,,yahonda,2017-12-13 16:31:42,2017-12-13 16:41:54
IS,ActiveStorage Engine routes not listed,Steps to reproduce 1 Enable active storage in your application configuration 1 Run rails routes from the root of your project Expected behavior Active storage routes should be listed with your application routes Actual behavior Routes are not listed Exposing these makes it a lot easier for the developer to understand what routes are available and how any routes they add might affect the routes added by the ActiveStorage engine This is particularly useful if you try to add your own redirection controller to authenticate users so that you can ensure you are overriding the routes that are added by the engine System configuration Rails version 5 2 0 beta2,,"rafaelfranca,georgeclaghorn",2017-12-12 18:12:47,2017-12-13 19:22:40
PR,Expose Active Storage routes,Closes 31420,,"meinac,georgeclaghorn,meinac,georgeclaghorn",2017-12-13 17:01:40,2017-12-13 19:22:40
PR,ci skip Add a space to comment in SidekiqAdapter,Summary I think it is better to have a leading space after the denoting the start of the comment,,yhirano55,2017-12-13 19:55:41,2017-12-13 20:01:29
IS,Rails env interpretation by config for,Steps to reproduce Create a file config sample yml like this development database dev test database foo In config application rb add this line config sample config for sample Run console like this with mistake rails console environment test mistake is that no sign is used before the word test but a space instead Then in console Rails configuration sample database dev but Rails env test Expected behavior Rails configuration sample database test or an error message when running console Actual behavior Rails configuration sample database dev System configuration ruby 2 3 1p112 rails 5 1 1,,"y-yagi,y-yagi,y-yagi,y-yagi,y-yagi",2017-12-11 14:01:32,2017-12-13 22:25:12
PR,Suppress warning BigDecimal new is deprecated in activerecord,Summary BigDecimal new has been deprecated in BigDecimal 1 3 3 which will be a default for Ruby 2 5 Refer,,yahonda,2017-12-13 21:30:57,2017-12-13 23:08:47
PR,Preserve original method visibility when deprecating a method,Summary This commit fixes deprecate so that it preserves method visibility like it did previously when it was utilizing alias method chain Other Information When Module prepend replaced alias method chain in a982a42 it caused deprecated methods to always become public alias method chain had this bit of code L40 L47 which preserved method visibility Without this fix a workaround would be Because the visibility needs to be fixed on the Module prepended by MethodWrapper I originally noticed this issue while writing,,rafaelfranca,2017-12-13 20:14:26,2017-12-13 23:09:02
PR,Use released resque scheduler instead of master version,The v4 3 1 has already released that includes Redis 4 0 support 431 2017 11 20,,y-yagi,2017-12-13 22:51:54,2017-12-13 23:40:44
PR,WIP warning duplicated HashWithIndifferentAccess,Summary The ruby allow different value between string key and symbol key Other Information This problem is't big problem so the user can disable this checking For example the user enable this option in development and disable in production Sorry this changes is not completed I wrote TODO comment I do not know how to switch this checking and how to show warning message from active support So please give me advise,,"rafaelfranca,matthewd",2017-10-29 05:37:03,2017-12-14 08:05:06
PR,Initial support for running Rails on FIPS certified systems,This PR introduces initial support for running Rails on system in FIPS mode These systems do not have access to commonly used hash functions and MD5 in particular Attempts to calculate MD5 hashes using openssl on a linux system will result in termination of the Rails process This PR allows to switch from MD5 hashes to SHA512 hashes by setting setting to true,,"simi,sgrif,simi,simi,bdewater,eugeneius,eugeneius,eugeneius,eugeneius,eugeneius,bdewater,bdewater,georgeclaghorn,matthewd,guilleiguaran,matthewd,simi,simi,bdewater,eileencodes,matthewd,rafaelfranca,eileencodes,simi",2017-11-30 00:40:11,2017-12-14 14:58:33
IS,postgresql view join table has and belongs to many association how to skip callbacks,Deleted,,,2017-12-14 06:53:00,2017-12-14 18:37:18
PR,Suppress expected exceptions by report on exception false in mysql2 test,Summary Follow up 31428 to address similar exceptions with mysql2 adapter This pull request suppresses this expected trace This exception is also reported at,,yahonda,2017-12-14 19:36:47,2017-12-14 23:11:05
PR,Address warning instance variable not initialized,Summary This pull request addresses this warning ruby cd activesupport bundle exec rake test snip path to rails activesupport lib active support digest rb 7 warning instance variable not initialized,,yahonda,2017-12-14 18:56:11,2017-12-14 23:15:52
PR,Suppress warning BigDecimal new is deprecated in Active Model,Summary BigDecimal new has been deprecated in BigDecimal 1 3 3 which will be a default for Ruby 2 5 Refer ruby bigdecimal 5337373 This commit has been made as follows,,yahonda,2017-12-14 19:01:40,2017-12-14 23:23:04
PR,Provide instant feedback when booting Rails,Before 2017 12 13 16 46 35 After 2017 12 13 16 47 47 I have noticed during pair mob programming sessions with peers that despite the speed boosts provided by Bootsnap and Spring there is a noticeable latency between firing a bin rails server command and any feedback being provided to the console Depending on the size of the application this lack of feedback can make it seem like something is wrong when Rails is simply busy initializing This change may seem gratuitous but by just printing one line to STDOUT we are giving a clear signal to the Rails user that their command has been received and that Rails is indeed booting It almost imperciptibly makes Rails feel more responsive Sure the code does not look very fancy but there is no other appropriate place I could think of putting it than boot rb,,"rafaelfranca,rafaelfranca,derekprior,sgrif,sgrif,eugeneius,matthewd,sgrif,matthewd,sgrif,dhh,matthewd,kaspth,sgrif,guilleiguaran",2017-12-13 21:22:38,2017-12-14 23:49:03
PR,RedisCacheStore Fix Default Error Handler,Summary Hello I noticed that there was a bug in ActiveSupport Cache RedisCacheStore is DEFAULT ERROR HANDLER definition with respect to an invalid reference to the local variable e From the code it is clear that this callback was supposed to reference the exception parameter to correctly log the error message I refactored the lambda into a do end block to reduce line length please let me know if this violates any internal code style conventions Thanks,,"jeremy,jeremy,eileencodes,jeremy",2017-12-14 03:59:42,2017-12-14 23:57:33
PR,Suppress warning BigDecimal new is deprecated in Active Support,Summary BigDecimal new has been deprecated in BigDecimal 1 3 3 which will be a default for Ruby 2 5 Refer This commit has been made as follows,,"yahonda,yahonda",2017-12-14 18:42:42,2017-12-15 00:07:35
PR,Suppress warning BigDecimal new is deprecated in Action View,Summary BigDecimal new has been deprecated in BigDecimal 1 3 3 which will be a default for Ruby 2 5 Refer ruby bigdecimal 5337373 This commit suppresses these warnings,,"yahonda,kamipo,kamipo,yahonda,kamipo,yahonda,yahonda",2017-12-14 19:59:55,2017-12-15 00:07:51
PR,Suppress warning BigDecimal new is deprecated in Active Job,Summary BigDecimal new has been deprecated in BigDecimal 1 3 3 which will be a default for Ruby 2 5 Refer ruby bigdecimal 5337373 This commit suppresses this warning,,"yahonda,yahonda",2017-12-14 20:07:18,2017-12-15 00:08:13
IS,ActiveRecord Result new shows warning BigDecimal new is deprecated,Steps to reproduce System configuration Rails version master branch Ruby version ruby 2 5 0dev 2017 12 15 trunk 61262 x86 64 linux,,"yahonda,kamipo,yahonda,yahonda",2017-12-15 01:14:17,2017-12-15 01:23:34
PR,Suppress warning BigDecimal new is deprecated,Summary Suppress warning BigDecimal new is deprecated in Action Pack Active Job Active Model Active Support and guides BigDecimal new has been deprecated in BigDecimal 1 3 3 which will be a default for Ruby 2 5 Refer This commit has been made as follows guides source 5 0 release notes md This is a Rails 5 0 release notes,,"yahonda,kamipo,kamipo,yahonda,kamipo,kamipo,yahonda,kamipo,yahonda,yahonda",2017-12-15 00:26:06,2017-12-15 01:57:53
IS,Ruby 2 5 undefined method make tmpname',Ruby 2 5 does not have Dir Tmpname make tmpname Steps to reproduce System configuration Rails version master branch Ruby version ruby 2 5 0dev 2017 12 15 trunk 61262 x86 64 linux It is related to 31099,,yahonda,2017-12-14 22:02:16,2017-12-15 02:57:45
PR,Generate tmpname on its own,make tmpname was removed by In this case we want a file name not a File So cannot use Tempfile Fixes 31458,,y-yagi,2017-12-15 02:21:22,2017-12-15 02:57:45
PR,ActiveStorage Guide,Summary This PR is meant to be a placeholder for the ActiveStorage guide Having implemented a service for OpenStack I have a sense of what is necessary to build a new service and to integrate ActiveStorage into an app This PR is a work in progress and I hope to gather feedback as the guide comes together Topics x How to attach a file s to a model x How to remove the attached file x How to link to the attached file x How to implement a download link x How to create variations of an image x How to generate a preview for files other than images x How to upload files directly to a service x How to add support for additional cloud services x How to clean up files during testing use lessons learned in 30935 x Example how to use direct upload events in a form,,"jeffreyguenther,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,jeffreyguenther,georgeclaghorn,jeffreyguenther,georgeclaghorn,jeffreyguenther,georgeclaghorn,jeffreyguenther,javan,jeffreyguenther,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,jeffreyguenther,jeffreyguenther,georgeclaghorn,jeffreyguenther,javan,jeffreyguenther,jeffreyguenther,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,jeffreyguenther,georgeclaghorn,jeffreyguenther,jeffreyguenther,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,rafaelfranca,georgeclaghorn,jeffreyguenther,jeffreyguenther,georgeclaghorn,jeffreyguenther,jeffreyguenther,jeffreyguenther,georgeclaghorn,jeffreyguenther,georgeclaghorn,rafaelfranca,jeffreyguenther,jeffreyguenther,jeffreyguenther",2017-11-03 00:03:18,2017-12-15 03:23:09
IS,PrimaryKeyAnyTypeTest test any type primary key failure,Steps to reproduce System configuration Rails version master branch Ruby version ruby 2 4 2p198 2017 09 14 revision 59899 x86 64 linux,,"yahonda,yahonda",2017-12-15 02:38:28,2017-12-15 04:07:25
PR,ci skip Update guide index for active storage,Summary Add active storage overview html link to an index page of guide Screenshot I have confirmed after rake guides generate html image,,yhirano55,2017-12-15 04:21:55,2017-12-15 04:32:30
PR,ci skip update link,,,dixitp012,2017-12-15 04:46:08,2017-12-15 04:54:26
PR,Fix guide generation error ci skip,Currently generation of guide is an error in 5 2 release notes html It seems that it is an error because there are multiple active storage anchors Since Active Storage is a Major feature it is unnecessary to show CHANGELOGs so remove from Incompatibilities section,,y-yagi,2017-12-15 06:49:28,2017-12-15 06:52:03
PR,ci skip Inherit ActiveRecord Base in example codes,Summary It seems AR models but there are not inheriting AR Base So I have fixed them,,yhirano55,2017-12-15 07:35:24,2017-12-15 07:39:27
PR,Prevent after commit callback with on create option runs when record not actually committed,Summary This is related to 28667 after commit callback with on create option should not run in transactions that record is not technically committed which means the record has both new record and destroyed states For example,,"st0012,st0012,pixeltrix,st0012,pixeltrix,st0012,st0012,matthewd,st0012,st0012",2017-04-07 16:48:08,2017-12-15 07:40:07
PR,Fix in ASt guide ci skip,,,ydakuka,2017-12-15 07:34:05,2017-12-15 07:41:38
PR,Skip record name argument when using fields for helper with nested attributes,Currently if we want to use fields for with nested attributes we need to pass record is name before record object This is inspired by 27892,,"st0012,st0012,dmitry,dmitry,dmitry,dmitry,st0012,st0012,dmitry,dmitry,st0012,st0012,st0012",2017-02-07 02:31:30,2017-12-15 07:41:57
PR,ci skip Make keys be same as a sample file of rails new,Summary L9 L30,,"yhirano55,kamipo,yhirano55,yhirano55",2017-12-15 05:10:12,2017-12-15 09:44:34
PR,Modify test to correctly pass attributes hash,instantiate takes as its first argument an attributes hash but the test is passing the attributes hash nested under a string key named attributes As a result the test is not actually testing what it says it is testing,,"shioyama,kamipo,shioyama,shioyama,shioyama,kamipo,shioyama,kamipo,shioyama,kamipo,shioyama",2017-12-15 12:26:28,2017-12-15 15:49:52
IS,Backport Ruby 2 5 support to Rails 5 0,My team is hoping to upgrade to Ruby 2 5 before upgrading to Rails 5 1 It appears that there are some fixes on the 5 1 and master branches that have not been made in Rails 5 0 I'm hoping it is useful to track those here and that they can be cherry picked into the 5 0 branch System configuration Rails version 5 0 6 Ruby version 2 5,,rafaelfranca,2017-12-15 19:45:43,2017-12-15 21:58:51
PR,ci skip Use amazon not s3 so that guides match the current code,The template L10 that generates the config storage yml file has the Amazon S3 key specified as amazon not s3 The guides should reflect the nomenclature given that every other service also has the name of the company as the key google microsoft,,claudiob,2017-12-15 23:48:10,2017-12-15 23:48:23
PR,ci skip Use amazon not s3 so that guides reflect the current code,The template L10 that generates the config storage yml file has the Amazon S3 key specified as amazon not s3 The guides should reflect the nomenclature given that every other service also has the name of the company as the key google microsoft,,claudiob,2017-12-15 23:50:38,2017-12-15 23:51:26
PR,Fix Active Storage Overview guide ci skip,,,"yhirano55,yhirano55,kamipo,yhirano55,kamipo",2017-12-16 05:08:17,2017-12-16 05:29:07
PR,Update Active Record Associations guide ci skip,Make all ActiveRecord Base find as link del Remove It also adds the additional condition that the object must be in the collection sentence for collection where since it is not correct statement Remove the sentence for collection find for consistency with others del Remove redundant sentences It also adds the additional condition that the object must be in the collection,,"bogdanvlviv,eugeneius,kaspth,eugeneius,bogdanvlviv,kaspth,kaspth,kaspth,bogdanvlviv",2017-12-02 22:34:50,2017-12-16 09:18:53
IS,An encrypted secrets file containing invalid YAML cannot be edited if used by development environment,Steps to reproduce 1 Create a rails project with encrypted secrets 2 Add config read encrypted secrets true to config environments development rb 3 Run rails secrets edit and edit the secrets file so that it contains some invalid YAML 4 Exit the editor 5 Run rails secrets edit The editor will fail to load as an attempt is made to parse the encrypted secrets file before the editor starts A workaround is to use an alternative environment which does not load the secrets file e g RAILS ENV test rails secrets edit Expected behavior The editor should load and display the encrypted secrets file even though the YAML is invalid The secrets file should not be loaded and parsed before performing a simple edit function Actual behavior An exception is raised and a stack trace is printed The editor does not start System configuration Rails version 5 1 4 Ruby version 2 4 2p198,,y-yagi,2017-12-16 19:01:52,2017-12-16 23:32:46
IS,Ca not stop remote true forms from sending request,Steps to reproduce Create a simple with form with defaulting to remote true In a javascript file attempt to stop the xhr request from sending Expected behavior Returning false from ajax beforeSend and ajax send should stop the event and the form from completing it is request The callbacks are running as I'm able to see console log output from each of them Actual behavior The form submits no matter how I try to stop it System configuration Rails version 5 1 4 Ruby version 2 4 2p198,,y-yagi,2017-12-14 19:52:16,2017-12-17 00:54:20
PR,Backport 29127 to 5 1 stable,This is a bug fix So I think we should backport to 5 1 stable,,"y-yagi,y-yagi",2017-12-17 00:59:03,2017-12-17 10:13:03
IS,Cannot execute 'rails server' missing gem json,Steps to reproduce The steps below were executed to setup a new Ruby and Rails project on a Fedora 27 machine with both Ruby and Rails already installed versions provided below rails new project cd project rails server Expected behavior The console output should display the default rails server running normally Actual behavior The console output displays an error related to a missing gem json usr local share gems gems activesupport 5 1 4 lib active support core ext object json rb 2 in require' cannot load such file json System configuration Rails version 5 1 4 Ruby version 2 4 2p198 2017 09 14 revision 59899 x86 64 linux Notes I was able to resolve the issue by manually adding the line below on the gemfile and running the bundler again but I am reporting so both helping with the report since I believe the gem should be included by default and helping others that can benefit from the temporary solution since I could not find any related answer on my researches gem 'json' '2 1 0',,"matthewd,schneems",2017-12-18 01:02:32,2017-12-18 01:36:56
PR,Do not include ellipsis in truncated digest output,Followup to Using truncate to limit the length of the digest has the unwanted side effect of adding an ellipsis when the input is longer than the limit Also Do not instantiate a new object for every digest Rename the configuration option to hash digest class Update the CHANGELOG entry to describe how to use the feature,,eugeneius,2017-12-17 01:00:37,2017-12-18 14:59:14
PR,Clarify docs for delegate allow nil option,Summary Small documentation update with the expressed goal of making it easier to grok the purpose of the allow nil option of the delegate method I hope this helps Happy to iterate on wording if there are further improvements to make,,"iamvery,eileencodes,iamvery",2017-12-15 20:35:23,2017-12-18 15:01:33
PR,Add skip bootsnap option,bootsnap is a useful gem normally However bootsnap is unnecessary when generating a Rails application to be used only for testing So I want to control whether use this or not by option,,"y-yagi,kaspth,y-yagi,eileencodes,y-yagi,rafaelfranca",2017-12-16 11:12:47,2017-12-18 15:09:13
PR,Update ActiveStorage README ci skip,Summary Add descriptions about Download Installation and Support to README of ActiveStorage,,"yhirano55,georgeclaghorn,yhirano55,prathamesh-sonpatki",2017-08-28 04:11:11,2017-12-18 16:06:10
PR,Do not run webpacker install when skip bundle is given,Summary If rails new command is given skip bundle option it should not execute webpacker install as same as spring binstub all,,"yhirano55,yhirano55",2017-09-08 00:01:54,2017-12-18 16:06:24
PR,App generator should be fail if it is given invalid options api and webpack,Summary When it was given api and webpack options app generator is better to raise error,,"yhirano55,y-yagi,yhirano55,kamipo,yhirano55",2017-09-08 01:32:53,2017-12-18 16:06:52
PR,Add headless browser support in api docs ci skip,I noticed headless firefox support was added Its mentioned in the guide that you can use headless firefox and headless chrome but it is not as clear in the api docs There is a mention of the use of these in the end of system test case rb but maybe it could deserve more explanation in the api documentation,,"bogdanvlviv,eileencodes,bogdanvlviv",2017-12-14 17:07:52,2017-12-18 17:24:44
PR,Update new framework defaults 5 2 rb tt,Be consistent in comments when mentioning AES Expand the PR to see lines 17 and 18 where it is used with a hyphen,,kaspth,2017-12-18 17:29:00,2017-12-18 18:54:22
IS,ActiveSupport EncryptedFile MissingKeyError in default generated app,Steps to reproduce Guidelines for creating a bug report are available here creating a bug report Expected behavior I have not specified that I am using the master key the line in config production rb is commented out I should be able to not have config master key and loading the environment should work correctly Actual behavior I get the ActiveSupport EncryptedFile MissingKeyError error which says that I do need the master key This happens for development as well but the config is not specified in that environment file by default The value for config require master key by default should be false System configuration Rails version 5 2 0 beta2 Ruby version ruby 2 4 2p198 2017 09 14 revision 59899 x86 64 darwin16,,"y-yagi,y-yagi,kaspth,schneems,y-yagi",2017-11-29 17:04:42,2017-12-18 18:57:36
PR,Raise an error only when require master key is specified,To prevent errors from being raise in environments where credentials is unnecessary Context issuecomment 348801489 Fixes 31283,,"y-yagi,schneems,schneems,y-yagi,kaspth,kaspth,kaspth,kaspth,kaspth,kaspth,kaspth,y-yagi,y-yagi,y-yagi,y-yagi,y-yagi,kaspth,kaspth,kaspth,y-yagi,y-yagi,kaspth,kaspth,y-yagi,y-yagi,y-yagi,kaspth",2017-12-06 08:37:45,2017-12-18 18:57:36
PR,BigDecimal duplicable returns false if Ruby is 2 5 0 or higher,Summary This pull request addresses 31465 BigDecimal dup is deprecated in BigDecimal 1 3 3 which is bundled with Ruby 2 5 0 rc1 It may not be the best idea to return false based on RUBY VESION constant but at least it addresses 31465 I would like to get feedback like It would be better to show warnings in Ruby 2 5 or something like that,,"yahonda,y-yagi,yahonda",2017-12-18 19:53:38,2017-12-18 22:26:48
IS,Ruby 2 5 BigDecimal dup is deprecated,BigDecimal dup is deprecated in BigDecimal 1 3 3 which is part of Ruby 2 5 0 rc1 Steps to reproduce System configuration Rails version master branch Ruby version ruby 2 5 0rc1 2017 12 14 trunk 61243 x86 64 linux,,"yahonda,yahonda,yahonda,rafaelfranca,y-yagi",2017-12-15 04:36:35,2017-12-19 00:11:56
IS,Inconsistent collection setter behaviour has many has many through,Collection has a different setter logic for persistent and new record New record writes changes to the database only after save is triggered persisted record on the contrary writes changes to the database once ids or array of records assigned via setter which can happen before a setter in assign attributes This inconsistency leads to a different issues even not related to the inconsistency between new and persisted record I just list some of them I already faced with in a production Validation raises an error Lets asume we have has many records which should create a has many through associations while passing ids to the parent record via collection ids In case when has many through will have a validation error this will raise an error which only could be rescued even if record is saved with soft save not save Collection assignment writes changes at the moment of passing data via setter not while save is invoked Lets asume I have a model with a lot of different associations This model feeded via large form with different ids and other fields When I set a parameters through a assign attributes method without any transaction block and save returns false because of the validation failed collection ids will be changed anyway One of the solutions would be use transactions and raise an exception with ActiveRecord Rollback Other solution would be use update attributes or update in the latest version of rails Other one is to use undocumented with transaction returning status Difference between new and persisted record I believe there are not many developers who work with rails framework know about the difference between new and persisted record with has many and has many through records has one works differently Means you can update id of a has many or belongs to via setter and it will not modify anything in the database Main case to reproduce an issue Please let me know if you would like to see the other cases I have listed above Solution would be to change behaviour for the autosave has many records so the associations of the autosave records will never modify database on data passed to a setter Please see real case of this issue here,,"dmitry,dmitry,dmitry,dmitry",2017-06-11 17:39:48,2017-12-19 00:54:51
IS,date select causing wrong date when using discard year and include blank,When using discard year together with include blank the date helper sets year to 1 using a hidden field That somehow causes the saved date value to be altered in a way that the day part of the date increases by two So choosing january 1 from the two selects saves the date 0001 01 03 instead of 0001 01 01 But if the value of the year part is set anything from 201 upto 300 or 1583 upto 2017 the day and month parts remains as entered which makes no sense to me Steps to reproduce rails new app test discard year cd app test discard year rails generate scaffold test day day date rails db migrate Add discard year true include blank true to the date select in app views test days form html erb so it looks like this f date select day discard year true include blank true 3000 test days Start server and try creating a new Test Day choosing january 1st and save Rails 5 0 2 ruby 2 4 0p0,,,2017-03-22 11:47:50,2017-12-19 00:54:52
PR,Implicitly skip bootsnap for rails new dev,Specifying the dev option is when want to change the codebase as it is not necessary to cache it Context issuecomment 352452653,,y-yagi,2017-12-18 23:56:18,2017-12-19 01:15:48
PR,Undefine attribute methods of descendants when resetting column information,I'm not quite sure if this is the right solution but while looking through these tests I notice that the test checking that reset column information resets children is not really correct I have modified the test to show that it fails in the sense that when column information is changed on the parent the child does not reset its attribute methods and thus although the current test passes the method is actually falling through to method missing which I do not believe it should do My fix is to undefine attribute methods on all descendants when they are undefined on the parent which passes this and other tests But mostly I would just like to clarify the expected behaviour,,"shioyama,shioyama,shioyama,shioyama,shioyama,matthewd,shioyama,matthewd,shioyama,matthewd,shioyama,shioyama,shioyama,shioyama,shioyama,matthewd,shioyama",2017-12-15 14:54:32,2017-12-19 01:24:39
PR,ci skip Added Object Relational Mapping wiki link,,,dixitp012,2017-12-19 05:52:50,2017-12-19 05:54:39
IS,offset and update all cause ActiveRecord StatementInvalid,Steps to reproduce SomeModel offset n update all hash Related issues I reported to kaminari I found old closed not merged pull request Expected behavior UPDATE SQL with offset Actual behavior Rails 4 2 9 works without offset Rails 5 0 5 and Rails 5 1 3 cause ActiveRecord StatementInvalid System configuration Rails version 4 2 9 5 0 5 5 1 3 Ruby version 2 3 3,,,2017-08-09 05:58:50,2017-12-19 10:02:21
PR,assert nothing raised not required here we can assert directly for the actual result,r,,"prathamesh-sonpatki,eileencodes,prathamesh-sonpatki,prathamesh-sonpatki",2017-12-17 07:48:29,2017-12-19 13:12:33
PR,Add global configuration for exception raising when skipped callback not defined,Summary After Rails 5 if we use skip XXX callback foo before foo is being set as a callback we will get an argument error The only way to avoid this is to pass raise false to the skip XXX callback call like,,"st0012,eileencodes,st0012,eileencodes,st0012,eileencodes,st0012",2017-12-09 16:59:14,2017-12-19 13:28:13
IS,Why not use absent as an alias of the inverse of present,This might be a daft question but it feels like would better follow the principle of least surprise than blank,,georgeclaghorn,2017-12-19 15:28:51,2017-12-19 15:46:48
PR,Bugfix validation callbacks on multiple context,Summary I found a bug that validation callbacks do not fire on multiple context So I have fixed it Example,,"yhirano55,eugeneius,yhirano55,kamipo,kamipo,yhirano55,yhirano55,yhirano55,kamipo",2017-12-16 02:02:16,2017-12-19 16:06:22
IS,skip coffee doesn t work,Steps to reproduce Expected behavior When I use the option skip coffee with rails new then I expect 1 the coffee rails gem to not be included in the generated Gemfile 2 the rails generate command to not create coffee files Actual behavior When I use the option skip coffee with rails new 1 the coffee rails gem is included in the generated Gemfile 2 the rails generate command creates coffee files System configuration Rails version Rails 5 1 4 Ruby version ruby 2 4 1p111 2017 03 22 revision 58053 x86 64 darwin17 Related,,,2017-12-19 16:31:35,2017-12-19 16:46:31
PR,Add FrozenError explicitly to 5 1 stable,Summary Ruby 2 5 handles FrozenError as subclass of RuntimeError AggregationsTest test immutable value objects used to raise RuntimeError in Ruby 2 4 or lower and raises FrozenError in Ruby 2 5 Current Rails master branch using minitest 5 10 3 whose assert raise handles subclasses of the expected exception However Rails 5 1 stable branch uses minitest 5 3 3 because unit tests do not run in random order Fixes 31508,,"yahonda,yahonda,yahonda,yahonda",2017-12-19 17:10:50,2017-12-19 18:46:10
IS,Error incompatible character encodings UTF 8 and ASCII 8BIT after RAILS update from 4 2 6 to 4 2 9,Steps to reproduce Rails broke Redmine after update from 4 2 6 to 4 2 9 when creating new page that contains Unicode characters page does not open error is displayed Error from Redmine log ActionView Template Error incompatible character encodings UTF 8 and ASCII 8BIT 1 wiki page breadcrumb page 2 3 h2 pretty title h2 4 5 form for as content 6 url action 'update' id title app views wiki edit html erb 3 in app views wiki edit html erb 895841188678804177 70176465922900' app controllers wiki controller rb 73 in show' lib redmine sudo mode rb 63 in sudo mode' Problem happens when you get url unicode characters parent ASCII Rails version 4 2 6 di not had this problem Guidelines for creating a bug report are available here creating a bug report Expected behavior It should open new Redmine page Actual behavior Error is displayed System configuration Rails version 4 2 9 Ruby version 2 3 1 p112 screenshot 7,,"y-yagi,y-yagi,eileencodes",2017-08-28 08:09:25,2017-12-19 19:58:23
PR,WIP Nested transactions should handle all exceptions the same,Summary Provide a general description of the code changes in your pull request were there any bugs you had fixed If so mention them If these bugs have open GitHub issues be sure to tag them here as well to keep the conversation linked together Other Information If there is anything else that is important and relevant to your pull request mention that information here This could include benchmarks or other information If you are updating any of the CHANGELOG files or are asked to update the CHANGELOG files by reviewers please add the CHANGELOG entry at the top of the file Finally if your pull request affects documentation or any non code changes guidelines for those changes are available here contributing to the rails documentation Thanks for contributing to Rails,,,2017-12-19 19:58:58,2017-12-19 20:00:11
IS,string freeze is not working ruby 2 3 4p301 rails 3 2 22 5,Steps to reproduce Create a new rails app using ruby 2 3 x and rails 3 2 22 x Open rails console and try the below System configuration Rails version 3 2 22 5 Ruby version 2 3 4p301,,eileencodes,2017-12-19 15:15:28,2017-12-19 20:25:25
PR,Fix postgresql is count with subquery,Without this change count for relation which use subquery for order clause fails on PostgresQL,,"kamipo,kamipo,kamipo,matthewd,kamipo,kamipo",2017-11-29 12:50:08,2017-12-19 21:56:31
PR,Backport 31483 to 5 1 stable,This is a bug fix So I think we should backport to 5 1 stable,,yhirano55,2017-12-19 21:17:36,2017-12-19 22:07:21
IS,Rspec rails Logger issue,Steps to reproduce Guidelines for creating a bug report are available here creating a bug report Expected behavior Im writing rspec and it is failing issue is with rails logger Actual behavior this is the code im using expect Rails logger to receive info with 'abc' its throwing error saying expected abc got Processing by App SampleController personal info as HTML System configuration Rails version 5 1 Ruby version 2 4 1,,y-yagi,2017-12-19 16:41:24,2017-12-19 23:07:37
IS,Environment variables missing depending on rails cli context,Steps to reproduce We have an application which we upgraded from 5 0 to 5 1 4 It relies on some environment variables to run correctly I created an initializer which exits if the variables are not set config initializers vars rb System configuration Rails version 5 1 4 Ruby version 2 3 1p112,,y-yagi,2017-12-18 18:14:28,2017-12-19 23:20:43
PR,Remove default ENGINE InnoDB for Mysql2 adapter,Summary Solves 30947 Before this patch ENGINE InnoDB was added by default to Mysql2 adapter create table if no options option was provided This default ENGINE was lost as soon as something was passed in at options option making its goal and propagation inconsistent as the programmer needed to remember including ENGINE InnoDB when something was passed in This patch removes default ENGINE as its use is not needed anymore for current MySQL and MariaDB versions It adds compatibility support and tests to ensure that default ENGINE is still present for migrations with version 5 1 and before It also ensures we still dump the ENGINE option to schema rb in order to avoid inconsistencies Last this patch removes default ENGINE documentation hint for MySQL and MariaDB as we are not taking measures to set the default ENGINE anymore,,"albertoalmagro,eugeneius,albertoalmagro,albertoalmagro,albertoalmagro,albertoalmagro,albertoalmagro,albertoalmagro,albertoalmagro,matthewd",2017-11-18 11:37:08,2017-12-20 00:17:37
IS,MySQL create table loses ENGINE default info if options does not provide it,Steps to reproduce In ActiveRecord ConnectionAdapters AbstractMysqlAdapter L296 the default value ENGINE InnoDB for options is provided This value is propagated unless the create table method receives another options String in that case the ENGINE reference is lost How to reproduce Expected behavior Default ENGINE InnoDB is provided by default unless options string provides a different ENGINE in which case this new engine will override the default one as documented in Rails Guides See last paragraph at point 3 1 in Rails Migrations Guides creating a table Actual behavior The generated SQL does NOT contain default ENGINE InnoDB information if an options string is provided System configuration Rails version Edge Ruby version 2 4 1 I am preparing a fix which will satisfy the expected behavior Please confirm the issue and I will submit a PR,,"albertoalmagro,eileencodes,albertoalmagro,kamipo,albertoalmagro,sgrif,albertoalmagro,sgrif,albertoalmagro,albertoalmagro,kamipo,albertoalmagro,albertoalmagro,kamipo,albertoalmagro,albertoalmagro,matthewd",2017-10-20 21:36:48,2017-12-20 00:19:41
PR,Handle FrozenError explicitly for Ruby 2 5 to 5 1 stable branch,Summary Ruby 2 5 handles FrozenError as subclass of RuntimeError These tests raise RuntimeError in Ruby 2 4 or lower FrozenError in Ruby 2 5 Current Rails master branch uses minitest 5 10 3 which handles assert raise subclasses of the expected exception since 5 7 0 However Rails 5 1 stable branch uses minitest 5 3 3 because unit tests do not run in random order It supports Ruby versions which do not have FrozenError exception Fixes 31508 Steps to reproduce,,"yahonda,yahonda,kamipo,yahonda,yahonda,yahonda",2017-12-19 19:59:05,2017-12-20 02:05:52
PR,Remove verbose query logs from new framework defaults 5 2 rb,Followup to see discussion r156957789 The app update rake task will regenerate development rb so that it contains this option that means we are currently adding it to existing apps in two places which is unnecessary and confusing Also Remove inaccurate comment about which stack frames are ignored see issuecomment 351557607 Clarify that the feature uses caller locations not caller Remove unused return value in extract callstack,,eugeneius,2017-12-20 01:13:20,2017-12-20 04:23:34
PR,Fix Illegal parameter data type bigint for operation 'get lock' error,Summary Got this error when running the db migrate command The MySQL GET LOCK function is awaiting for a string as a lock name function get lock but an integer is generated by ActiveRecord Migration generate migrator advisory lock id method,,"kamipo,kamipo",2017-12-20 09:36:16,2017-12-20 12:12:26
PR,Handle FrozenError if it is available,Summary This pull request handles FrozenError introduced by Ruby 2 5 Refer Since FrozenError is a subclass of RuntimeError minitest used by master branch can handle it though it would be better to handle FrozenError explicitly if possible FrozenError does not exist in Ruby 2 4 or lower frozen error class handles which exception is expected to be raised This pull request is intended to be merged to master then backported to 5 1 stable to address 31508,,"yahonda,kamipo,yahonda,yahonda",2017-12-20 02:04:26,2017-12-20 12:29:44
PR,skip ci Added api documentation for migration generator class methods,API documentation improvement Added description to few migration class methods,,kaspth,2017-12-20 09:58:12,2017-12-20 12:59:03
PR,Handle FrozenError if it is available to 5 1 stable,This pull request backports 31520 to 5 1 stable where the actual failures reported like Summary This pull request handles FrozenError introduced by Ruby 2 5 Refer Since FrozenError is a subclass of RuntimeError minitest used by master branch can handle it though it would be better to handle FrozenError explicitly if possible FrozenError does not exist in Ruby 2 4 or lower frozen error class handles which exception is expected to be raised,,yahonda,2017-12-20 12:48:38,2017-12-20 13:27:52
IS,AggregationsTest test immutable value objects failure with ruby 2 5 0rc1 at 5 1 stable,Ruby 2 5 introduces FrozenError AggregationsTest test immutable value objects failures are reported at 5 1 stable branch using ruby head Somehow this failure does not reproduce at Rails master branch Note I assume Rails 5 1 will support Ruby 2 5 Steps to reproduce System configuration Rails version 5 1 stable branch whose latest commit is 8598e492719dd456298af621463c9813645f0cc9 Ruby version ruby 2 5 0rc1 2017 12 14 trunk 61243 x86 64 linux,,"yahonda,yahonda,yahonda,yahonda,yahonda,yahonda,yahonda,yahonda,yahonda",2017-12-19 16:30:34,2017-12-20 14:21:10
PR,Use delayed job master branch to support Ruby 2 5,Summary Use yaml tag instead of deprecated yaml as pull request has been merged to master at delayed job but not released yet This fix should address GEM aj integration failure with ruby head,,"yahonda,yahonda,yahonda",2017-12-20 18:41:08,2017-12-20 19:52:10
IS,link to data confirm Are you sure not worked in Firefox 57,All those code which use data confirm Are you sure not worked in firefox 57 I am not sure this is a bug for Rails or Firefox But it just worked fine in chrome in firefox 57 quantium could not see any special error log in js console Thanks,,"y-yagi,eileencodes",2017-12-15 14:02:24,2017-12-20 19:58:43
PR,Support workhorse job backend,Workhorse is a multi threaded job backend that persists jobs in the database using ActiveRecord This commit adds a new queue backend that allows ActiveJob to enqueue jobs using the workhorse Gem Summary We have created a new job backend that is specifically designed for multi threaded execution within a single or multiple processes and would like to add a queue adapter so our Gem can be used with ActiveJob Thanks a lot for having a look at our PR,,eileencodes,2017-12-19 14:09:30,2017-12-20 20:37:13
IS,Which is the proper order to handle exception cause in ActiveSupport Rescuable rescue from,Summary Since Rails 5 0 the order in which handler is applied for exceptions including cause has been changed It looks like a deliberate change as written in the 25018 comment but I think there are at least the following problems Probrem if Article with id 10 does not exist handle 404 was executed in Rails 4 2 8 Since Rails 5 0 0 handle 500 is now executed Errors occurring in view are wrapped in ActionView Template Error In Rails 4 2 8 when error has cause It looked for a handler that matched exception cause For Rails 5 0 0 and later the exception cause check is done only if the wrapping error does not match any handler I think the behavior before 4 2 8 is preferable in the above case I know that should not do rescue from StandardError be listed in RailsGuide This may not be an appropriate example However I think that we always encounter this problem when we need to reference cause and want to deal with special errors and generic errors in order Solution How about restoring the logic of 24158 to activesupport lib active support rescuable rb System configuration Rails version 4 2 8 5 0 0 5 1 2 Ruby version 2 3 1,,matthewd,2017-07-10 13:07:17,2017-12-20 23:08:29
PR,Removes OS specific directory separator,Summary Removes the hardcoded OS specific directory separator Other Information Although most OS use as a directory separator this is not something 100 universal For that reason it may be appropriate to delegate the task of building the route to the class Pathname,,,2017-12-21 01:48:09,2017-12-21 03:55:31
PR,Add conditional callbacks description to Active Record Callbacks guides page,Conditional callbacks description added to Active Record Callbacks guides page,,rafaelfranca,2017-12-21 16:26:28,2017-12-21 19:08:19
PR,relation select not,Add a method for deselecting a specific column from a relation for the instance where you do not need a particularly large column but do not want to list each individual column that should be selected besides that one Additionally provide the ability to select each column name individually through relation select which grants speed improvements on certain backends Noticed that this also gives particularly good memory gains in addition to speed when there is a blob column that takes up a lot of space,,"rafaelfranca,rafaelfranca,rafaelfranca",2017-12-21 19:40:12,2017-12-21 20:00:21
PR,ci skip Remove needless from doc for ActiveStorage Variant,Summary The url for ActiveStorage Variant is resolved on routing L24 So I have removed url for from a document of ActiveStorage Variant On the example codes examples in README url for is not used,,yhirano55,2017-12-21 20:22:37,2017-12-21 20:32:33
PR,Pass options to rails blob url,Summary I found that options is not passed to inside method So I have fixed it,,yhirano55,2017-12-21 20:34:27,2017-12-21 21:00:11
PR,Temporary disabled using rubygems 2 7,Summary RubyGems 2 7 promote bundler 1 16 to default gems It conflicts Travis environment and user installed bundler I'm investigating RubyGems updater and bundler both I also maintain them Other Information This pr fixes cc,,"kamipo,kamipo,kamipo",2017-12-22 08:57:06,2017-12-22 10:02:31
PR,Relax bundler version on Travis CI,Bundler 1 16 1 fixed I believe RubyGems 2 6 and Bundler 1 16 1 works fine with Rails master,,kamipo,2017-12-22 13:24:50,2017-12-22 14:56:09
PR,Add support for combined MiniMagick transformations,Summary This adds support for MiniMagick is combine options It is needed when transformations can not be applied sequentially but need to be applied in the same step e g center weighted cropping Belongs to 31518,,eileencodes,2017-12-22 15:47:56,2017-12-22 20:26:30
PR,Add cloud service is links to README of Active Storage ci skip,Summary I have added cloud service is links to README of Active Storage For people who do not have enough knowledge about each cloud service If you feel commercial please reject this request,,yhirano55,2017-12-21 21:45:13,2017-12-22 20:26:58
IS,ActiveStorage does not respect gravity variant,Steps to reproduce Given a Rails 5 2 0beta2 app using ActiveStorage and mini magick attach a rectangular image to a model and then call it with image variant thumbnail '100x100 ' gravity 'center' extent '100x100' Expected behavior The image returned is 100px square with the excess cropped and the image centered centered cropping is described here cut and gravity is shown to work with mini magick here issuecomment 17471822 Actual behavior The image returned is 100px square with excess cropped however the image is anchored on the upper left System configuration Rails version 5 2 0beta2 Ruby version 2 4 2 mini magick version 4 8 0 ImageMagick version 7 0 7 15,,,2017-12-19 23:10:39,2017-12-22 22:36:02
IS,selenium webdriver in Rails 5 2 system tests unable to connect to chromedriver 127 0 0 1 9515,Meta OS Ubuntu Selenium webdriver Version 3 8 0 Rails Version 5 2 beta Expected Behavior Being able to run tests Actual Behavior Any clues what I might be missing here Thanks,,"y-yagi,georgeclaghorn",2017-12-22 21:34:04,2017-12-22 23:47:21
IS,Status of this ActionCable section,The section in question notes Why I'm questioning this We will get all this abstracted properly when the framework is integrated into Rails Any updates ActionCable was integrated into Rails over 2 years ago,,matthewd,2017-12-23 05:19:07,2017-12-23 05:23:59
PR,Translate to Vietnamese Association basics V1,Summary Translate to Vietnamese Association basics V1 NOT COMPLETE Other Information Nothing,,,2017-12-23 12:51:36,2017-12-23 12:52:04
PR,Use delayed job master,For pass Active Job integration tests with Ruby 2 5 Ref,,y-yagi,2017-12-23 12:11:45,2017-12-23 13:18:30
PR,docs Add mention of removal of HWIA interface from AC Parameters,ci skip Addresses 31512,,kamipo,2017-12-22 21:11:55,2017-12-23 14:23:31
IS,Active Storage Direct Upload using IE11,Steps to reproduce Using Active Storage upload a file directly to a service tested with local and s3 using Internet Explorer 11 Expected behavior The file should be properly uploaded via javascript directly to the service Actual behavior A Unable to get property 'url' of undefined or null reference is thrown img width 511 alt screen shot 2017 12 21 at 11 06 16 src This is due to a bug in IE 11 when using a XMLHttpRequest with xhr responseType json IE 11 will not automatically parse the response body see here The faulty code line is here L33 when the property direct upload is read from the response an undefined is returned since reponse is a string and not an object I did workaround this by simply checking if the response body is a string and parse it with JSON parse I can submit this fix but I'm not sure if Active Storage should support IE 11 or not If that is not the case feel free to close this issue System configuration Rails version 5 2 0 alpha 5c7e59a Ruby version ruby 2 4 2,,,2017-12-21 15:25:23,2017-12-23 16:24:07
PR,Fix activestorage direct upload on ie11,Direct upload on ie11 is not working because the response of the XMLHttpRequest is a string when xhr responseType is set to json see Parsing the response using JSON parse when the response is a string solves the issue My javascript skills are a bit rusty let me know if you see a better way to implement this fix Closes 31531,,"georgeclaghorn,javan",2017-12-22 08:22:15,2017-12-23 16:24:08
PR,Call to s before calling gsub in ActiveRecord Sanitization sanitize sql like,Summary In ActiveRecord Sanitization sanitize sql like add to s before gsub so that if argument is not string object In current specification ActiveRecord Sanitization sanitize sql like call gsub to this method argument directly So if without string object is passed as 1st argument NoMethodError is raised I do not know well about ActiveRecord Sanitization argument validation policy So it may be wrong that I implement an argument sanitization like this If so I will close this PR,,,2017-10-01 01:57:57,2017-12-23 22:37:32
IS,rake db migrate is creating tables from other rails projects in my laptop,I have created a new rails project and I have added a migration to create a table called blogs When I ran rake db migrate it created this table along with other tables I have set in other projects I have in my laptop Under db migrate I have only 1 file with the migration I added there is no reference in the project of the other tables for some reason it is pulling the migrations from other projects and adding it to my DB project Expected behavior It must run migrations that are under db migrate in my current project Actual behavior It is running migrations under db migrate of my current project and other projects System configuration Rails version 5 1 4 Ruby version 2 4 1,,y-yagi,2017-12-21 00:31:49,2017-12-23 23:37:41
IS,Update 5 1 release notes to include final removal of HashWithIndifferentAccess interface from AC Parameters,Since version 5 0 ActionController Parameters no longer inherits from HashWithIndifferentAccess however although the inheritance was removed it was still possible to call Enumerable methods on params method calls where being delegated in a afaik method missing and merely a deprecation warning was shown The removal of the actual behavior only happened in 5 1 however there is no mention of this in the release notes which think such a major change would merit I would open a PR but I am unsure of the exact wording since the release notes of 5 0 already state Make ActionController Parameters no longer inherits from HashWithIndifferentAccess Maybe something like Remove deprecated support for calling HashWithIndifferentAccess methods on ActionController Parameters Thanks,,"eileencodes,y-yagi",2017-12-19 19:06:05,2017-12-24 03:20:06
IS,Could not run my Rails project on a new PC until I removed jbuilder from gem file,Steps to reproduce I installed Rails and Ruby on a new system Mac OS High Sierra cloned my old project in Rails 5 2 0 beta2 but could not get it to work on the new system Rails is supposed to run normally as before but instead got a strange behavior started commenting out gems in Gemfile based on my understanding of the error log Here is what the log looks like Any suggestions and help to remove this error log will be appreciated Thanks System configuration Rails version 5 2 0 beta2 Ruby version 2 4 2,,"y-yagi,y-yagi",2017-12-23 00:28:39,2017-12-24 10:10:04
IS,Autoloading issue when the parent module defines the same constant,Description Class autoloading returns the wrong class when trying to load a non existing constant Its an edge case that only happens only if the parent module defines the same constant which is not yet autoloaded It also happens sometimes for existing constants but the issue is the same and this test its more obvious and easy to reproduce Steps to reproduce Here is a example minimal rails app including two test cases that reproduces the issue I have come to the conclusion that the offending code is L533 Expected behavior It should raise NameError in any case Actual behavior It returns the wrong constant on the first call after that it correctly raises NameError System configuration Rails version Rails 5 1 4 Ruby version ruby 2 3 1p112 2016 04 26 revision 54768 x86 64 darwin16,,georgeclaghorn,2017-12-14 22:28:16,2017-12-24 14:59:59
IS,test restart rails server with custom pid file path fails,Steps to reproduce System configuration Rails version master branch Ruby version ruby 2 4 2p198 2017 09 14 revision 59899 x86 64 linux,,"yahonda,yahonda,yahonda,yahonda,yahonda,yahonda,yahonda,rafaelfranca,yahonda,rafaelfranca,yahonda,rafaelfranca,rafaelfranca,yahonda,yahonda,yahonda,y-yagi,y-yagi,yahonda,y-yagi,yahonda",2017-12-06 21:20:21,2017-12-24 21:28:30
IS,I would like to improve the docs for action dispatch request session,I would like to improve the docs for action dispatch request session It seems that I should be able to use methods like ActionDispatch Request Session delete The Action Controller Overview mentions a few methods in Section 5 1 Accessing the Session 1 but it is not nor should be comprehensive I think that methods like ActionDispatch Request Session delete should appear on How can I help to make this happen Do we remove a nodoc statement somewhere 1 accessing the session,,"jaredbeck,pixeltrix,jaredbeck,jaredbeck,pixeltrix,jaredbeck,pixeltrix,jaredbeck,pixeltrix,jaredbeck,jaredbeck,jaredbeck",2017-03-17 18:06:21,2017-12-25 00:38:50
PR,save attributes changed by callbacks after update attribute,update attribute stops execution before running callbacks as part of save if the record is attributes had not changed The documentation method i update attribute says that Callbacks are invoked which was not happening if the persisted attributes had not changed before the before callbacks were run Here is a test that demonstrates the bug,,"arthurnn,arthurnn,spastorino,prathamesh-sonpatki,shioyama,pwim,kamipo",2017-01-23 17:18:46,2017-12-25 06:24:36
PR,Try to update rubygems 2 7 4,Summary RubyGems 2 7 3 broke Travis environment with Bundler 1 16 1 ref I will release RubyGems 2 7 4 after this pull request was a success status uses pre release version of RubyGems Other Information My investigation is here,,,2017-12-25 08:15:06,2017-12-25 12:11:04
IS,update attribute ignores autosave relations,Steps to reproduce Expected behavior Rails 4 2 6 The test passed update attribute saves associated Email model Actual behavior Rails 5 0 0 rc2 The test failed Nothing is saved Is it intentional System configuration Rails version Rails 5 0 0 rc2 Ruby version Ruby 2 3 1,,"alexcameron89,maclover7,rafaelfranca,kamipo",2016-06-24 05:49:00,2017-12-25 15:56:20
PR,Prevent shadowing outer variables,Summary It is shadowing two local variables method and argument this renames the variables to prevent the shadowing e g no more warnings,,y-yagi,2017-12-25 21:50:20,2017-12-25 23:05:45
IS,Railties tests using generator invoke all install Rails to gem path,While investigating 31531 There are 4 tests which install railties Rails to the gem path which trigger 31531 not reproduced 31531 itself has been addressed however these 4 tests should not install Rails to the gem path Steps to reproduce Expected behavior All of them should use Rails environment tested Actual behavior These tests successfully finished however they are using Rails installed to the gem path System configuration Rails version master branch Ruby version ruby 2 4 3p205 2017 12 14 revision 61247 x86 64 linux,,"yahonda,y-yagi,yahonda",2017-12-25 00:26:50,2017-12-25 23:23:34
PR,Prevent to install gems when run test,invoke all cause bundle install This will install gems actually defined in Gemfile To avoid this stubbed bundle command Fixes 31557,,y-yagi,2017-12-25 22:37:14,2017-12-25 23:23:34
PR,Relax bundler version in 5 1 stable,,,y-yagi,2017-12-25 22:48:14,2017-12-26 00:17:52
IS,handling of add column with primary key in migrations,is working fine with Rails 5 1 4 When using the current master I'm seeing the following full output if needed in,,y-yagi,2017-12-23 22:21:23,2017-12-26 01:43:19
PR,Fix add column with primary key type compatibility for SQLite,Fixes,,fatkodima,2017-12-25 21:43:47,2017-12-26 01:43:19
PR,Make sql type of primary key in SQLite to comparable with an integer,Originally I tried to add assert equal pk sql type ref sql type But the assert failed even though the same type due to sql type of primary key in SQLite is upper case Prefer lower case like other types,,kamipo,2017-02-14 21:31:55,2017-12-26 07:00:41
PR,Add CRuby 2 5 0 to CI,Summary Add CRuby 2 5 0 to CI build matrix,,sikachu,2017-12-26 09:20:55,2017-12-26 09:45:18
IS,With install Ruby 2 5 0 and Passenger 5 1 12 ALL sites will fail to open,With install Ruby 2 5 0 and Passenger 5 1 12 ALL sites will fail to open application out Incomplete response received from application Same problems with Ruby 2 4 3 Ruby 2 3 6 Debian 8 Jessie Apache 2 4 passenger log,,y-yagi,2017-12-26 07:53:45,2017-12-26 22:01:48
IS,delivery method in test is overriden by Rails,Steps to reproduce In config environments test rb Do you think this is normal behaviour or needs a fix One simple solution without changing how it works would be to check wether the delivery method already defined is a Mail TestMailer or inheriting from it WDYT,,,2017-09-20 15:16:50,2017-12-27 00:57:51
PR,CI against ruby 2 5 0,,,"y-yagi,sikachu,matthewd",2017-12-27 01:43:24,2017-12-27 05:27:14
IS,Rails with Ruby 2 3 6 Ruby 2 4 3 Ruby 2 5 0 fail to run with Apache Passenger,Rails with Ruby 2 3 6 Ruby 2 4 3 Ruby 2 5 0 fail to run with Apache Passenger Apache 2 4 10 Debian Passenger 5 1 12 ALL applications out Incomplete response received from application Before versions of Ruby ALL works fine In log file PLEASE HELP passenger level7 log therubyracer bug log,,kamipo,2017-12-27 07:33:48,2017-12-27 10:17:10
PR,Update Action View Overview guide ci skip,Provide full Fix generated HTML by form for in the example Provide full params in the example Express params person in the sentence,,bogdanvlviv,2017-12-26 11:46:02,2017-12-27 10:22:05
PR,ActiveStorage Call attachment destroy before calling blob purge later,When I destroyed an object has has one attached and an error happened blob is only destroyed to be retried It means everything will be rollbacked when there is an error but PurgeJob is still alive and it will be done finally A blob will be purged asynchronously but an object and an attachment is purged synchronously This problem causes an object has an attachment but it does not have a blob So I think they will be destroyed at first then blob will or retry on L6 will be removed for now I'm sorry I'm not sure this way is ok Anyway thank you for modern approach of uploading files Sample repo,,,2017-11-30 15:22:05,2017-12-28 01:20:31
PR,Fix IE 10 and IE 11 is broken preventDefault for rails ujs,IE10 11 does not set defaultPrevented when preventDefault is called on CustomEvents Same issue in Turbolinks,,javan,2017-12-27 13:47:56,2017-12-28 05:01:42
IS,How to convert mysql2 to psql in cucumber rails,System configuration Rails 4 1 11 ruby 2 2 3p173 I am trying to convert mysql2 to postgres When i run rake db create I am getting the following error rake aborted Gem LoadError You have already activated rake 12 3 0 but your Gemfile requires rake 10 4 2 Prepending bundle exec to your command may solve this home supranimbus12 rvm gems ruby 2 2 3 global gems bundler 1 16 1 lib bundler runtime rb 313 in check for activated spec ' home supranimbus12 rvm gems ruby 2 2 3 global gems bundler 1 16 1 lib bundler runtime rb 31 inblock in setup' home supranimbus12 rvm gems ruby 2 2 3 global gems bundler 1 16 1 lib bundler runtime rb 26 in map' home supranimbus12 rvm gems ruby 2 2 3 global gems bundler 1 16 1 lib bundler runtime rb 26 insetup' home supranimbus12 rvm gems ruby 2 2 3 global gems bundler 1 16 1 lib bundler rb 107 in setup' home supranimbus12 rvm gems ruby 2 2 3 global gems bundler 1 16 1 lib bundler setup rb 10 in top required ' home supranimbus12 tracks 2 3 0 config boot rb 4 in top required ' home supranimbus12 tracks 2 3 0 config application rb 1 in top required ' home supranimbus12 tracks 2 3 0 Rakefile 4 in top required ' home supranimbus12 rvm gems ruby 2 2 3 global gems rake 12 3 0 exe rake 27 in top required ' See full trace by running task with trace,,matthewd,2017-12-28 06:37:40,2017-12-28 06:45:38
IS,Nested link to do block,,,y-yagi,2017-12-28 10:14:06,2017-12-28 12:12:19
IS,How can I get image url from an ActiveStorage attachment in a worker,I have a simple worker I need an image url from ActiveStorage attachment I use Google Cloud Storage for upload images I have read this docs link to attachments Expected behavior I expect to get link to image on GCS Actual behavior I can get link in controller via image tag or rails blob path user avatar disposition attachment but I do not know how to do it from a worker System configuration Rails version 5 2 0 beta2 Ruby version 2 5 0,,prathamesh-sonpatki,2017-12-28 10:09:28,2017-12-28 13:13:17
PR,More consistent formatting of numbers in documentation,Summary From 31576 seems more consistent this way,,matthewd,2017-12-27 22:26:33,2017-12-28 16:07:39
PR,Fix english minor change ActiveStorage overview,Summary Minor english change ActiveStorage overview,,georgeclaghorn,2017-12-28 18:07:33,2017-12-28 18:52:08
IS,Active storage direct upload to GCS,Steps to reproduce cors json Expected behavior configured both s3 and gcs with relevant cors Without direct upload everything works ok s3 and gcs Direct uploads fails on gcs Actual behavior From console Failed to load Response to preflight request does not pass access control check No 'Access Control Allow Origin' header is present on the requested resource Origin ' 3000' is therefore not allowed access System configuration Rails version Rails 5 2 0 beta2 gem 'rails' git '' Ruby version ruby 2 4 2p198,,georgeclaghorn,2017-12-20 11:08:06,2017-12-28 21:47:04
IS,GCS config for ActiveStorage requires presence of file gcs keyfile,Steps to reproduce File storage yml contains example configurations for S3 and GCS To configure S3 you just need to fill values in yaml and you can do it conveniently via Rails application credentials GCS configuration is more troublesome as it requires a path to file in keyfile and this file needs to be uploaded without the usage of VCS It creates a problem in services like Heroku where all files come only from VCS Expected behaviour That would be great if there was a key for the value of gcs keyfile for example keyfile json instead of keyfile which requires path of gcs keyfile System configuration Rails version 5 2 0 beta2 Ruby version 2 4 2,,georgeclaghorn,2017-12-28 20:29:48,2017-12-28 21:49:50
IS,ActionCable Ruby 2 5 0 rc1 Argument Error,Steps to reproduce Install Ruby 2 5 0 rc1 Load a page with ActionCable listening Expected behavior Log should be free of errors Actual behavior wrong number of arguments given 283856384 expected 0 System configuration Rails 5 1 4 Ruby 2 5 0 rc1,,"eileencodes,y-yagi",2017-12-19 22:03:03,2017-12-29 00:39:29
IS,ActiveRecord relation 'merge' merges bind values only by column name only,Steps to reproduce When using the relation merge functionality in ActiveRecord we noticed that in the rare case that we used merge with two models that coincidentally happened to have an identically named column those bind values were getting blown out irrespective of which table was being merged from to Unit test to reproduce in merging test rb Expected behavior Bind values for Essay model 'test value2' should remain Actual behavior The bind value for Essay 'test value2' is blown away System configuration Rails version Rails 4 2 10 Ruby version ruby 2 4 1p111 2017 03 22 revision 58053 x86 64 darwin16,,y-yagi,2017-12-28 17:07:25,2017-12-29 00:42:46
IS,ActiveRecord validations being disabled on unicorn restart,ActiveRecord validation rules and callbacks for all models of app has been disabled after unicorn restart from log rotation script Here it is After this we kill unicorn and start it manually with command bundle exec unicorn D c var www fitness crm shared config unicorn rb E production After this everything is good and validations and callbacks are enabled again Please help to find out what is the reason of such a behavior and how to fix it We use Ruby v2 2 3 Rails v4 2 4 Unicorn v5 1 0 in production,,al2o3cr,2017-09-14 08:37:53,2017-12-29 01:30:27
IS,ActionCable disconnect unsubscribed never called,Steps to reproduce Create an ActionCable channel and subscribe to it Unplug the client from the Internet and immediately call on server side pre ActionCable server remote connections where some identifier isome suitable value for the disconnected client' disconnect pre Expected behavior Client should be unsubscribed from his channels and disconnect method on connection should be called Actual behavior unsubscribed and disconnect methods do not get called System configuration Rails version Rails 5 1 0 ActionCable 5 1 0 default setup Ruby version ruby 2 2 3p173 mac os 10 12 4 But should also affect other versions,,,2017-05-24 13:10:26,2017-12-29 01:30:28
IS,mail to return nil if invalid mail address,Steps to reproduce Expected behavior Return an empty array Actual behavior Return an array with nil System configuration Rails 5 1 3 Ruby 2 4 1,,georgeclaghorn,2017-12-29 03:10:22,2017-12-29 03:51:25
IS,How to fix issue POST xhr with 401 unauthorised error When i create a new announcement in canvas lms,I implemented new Project in Ruby on Rails In my project I Created page Announcement with Topic tittle field text message field Attachment field and save button Whenever I try to create new Announcement I enter something in topic title text message attached image in Attachment feild and finally click the save button its works properly then it automatically moves to next page But My Issue is By clicking the save button with out attaching any image in attachment feild I Got the error in console tab POST XHR http mydomain api v1 courses 1016 discussion topics along with 401 unauthorised And In network tab status unauthorized message Invalid access token But it work properly few day before now I'm getting issue I dont know How to solve Thanks,,y-yagi,2017-12-29 05:22:55,2017-12-29 06:59:09
IS,Rails application credentials on development,Should Rails application credentials load the credentials even if config require master key is false Rails application secrets does not load the secrets if config read encrypted secrets is false Steps to reproduce Add some credentials using rails credentials edit On the rails console using the development environment run Rails application credentials Expected behavior I do not know what the expected behavior is But Rails application secrets on 5 1 wo not read the encrypted secrets if config read encrypted secrets is not set Actual behavior Rails application credentials foo is set to bar If this is intended behavior there seems to be a danger of using the production credentials in development mode System configuration Rails version Rails 5 2 0 beta2 c383c4142a1c Ruby version Ruby 2 4 2p198,,y-yagi,2017-12-05 06:15:52,2017-12-29 07:26:24
PR,Add suggestions for configuring CORS on direct uploads with ActiveStorage,References 31523 Summary Modified README md to include suggestions on configuring CORS on remote in this case GCS to allow direct uploads with ActiveStorage,,,2017-12-29 12:14:21,2017-12-29 14:28:29
PR,let drb make temprary server,Summary cc0d272 does not guarantee uniqueness It is the wrong usage that is the reason make tmpname has been removed Other Information If there is anything else that is important and relevant to your pull request mention that information here This could include benchmarks or other information If you are updating any of the CHANGELOG files or are asked to update the CHANGELOG files by reviewers please add the CHANGELOG entry at the top of the file Finally if your pull request affects documentation or any non code changes guidelines for those changes are available here contributing to the rails documentation Thanks for contributing to Rails,,y-yagi,2017-12-29 15:04:03,2017-12-29 23:30:25
IS,Unable to create new rails projects on Raspberry Pi,Hi I have developed a rails application on my PC and now I try to get it running on a raspberry pi On the pi is a fresh Raspbian and RVM curl L get rvm io bash s stable rails installed But I'm unable to start the application so I tried to create a new one This results in the same error Ruby applications are working fine Steps to reproduce Creating a new project with rails rails new abcdef on raspberry pi Expected behavior A new project Actual behavior System configuration Rails version Rails 5 2 0 beta2 Ruby version ruby 2 4 1p111 2017 03 22 revision 58053 armv7l linux eabihf,,y-yagi,2017-12-29 17:49:31,2017-12-29 23:44:10
IS,Scaffold Hang Rails 4 2 10 Ruby 2 4 0,Steps to reproduce Create new project Go in Run generator screen shot 2017 12 30 at 2 21 53 am Possible Duplicate of this issue 27310 Rails 5 1 4 though Probably not Expected behavior Generator should complete creating scaffold Actual behavior It hangs for several minutes I have restarted both machine terminal session,,y-yagi,2017-12-29 19:37:18,2017-12-29 23:45:18
PR,Allow the use of callable objects as group methods for grouped selects,The option groups from collection for select helper could only take method names as group method and group label method parameters This was not consistent with option from collection for select which could take either method names or callable objects This PR replaces the uses of group send in the helper by calls to value for collection group allowing the use of procs lambdas and other callable objects as parameters,,georgeclaghorn,2017-12-27 17:00:02,2017-12-30 01:15:27
IS,ActiveRecord Relation cache key throws error for some distinct collections,When retrieving the cache key of a distinct ordered ActiveRecord Relation a PG InvalidColumnReference error is thrown Steps to reproduce Run the test template It tries to use a postgres database named test by default Expected behavior The cache key is returned Actual behavior A PG InvalidColumnReference error is thrown System configuration Rails version 5 1 2 Ruby version 4 2 1,,"meinac,meinac,meinac,meinac",2017-07-13 14:24:48,2017-12-30 09:54:18
IS,Improving ActionMailer new Documentation,Hey Rails Devs A bit of a newbie here but it seems that following the ActionMailer documentation is messed up Further this change seems to be ill documented in changelogs as I could not find any breaking change notifications There is a bunch of code floating around using new with constructions like send new args message from which should now be broken Cheers Jeremy,,"georgeclaghorn,georgeclaghorn",2017-12-30 19:39:31,2017-12-30 20:05:52
IS,ActiveStorage using local direct upload url even when set to amazon,It seems the development environment is defaulting to local storage service regardless of what is set in development rb I have chosen to use S3 in development or at least use it temporarily to make sure things are working but storage is still using localhost Steps to reproduce create a dev bucket on S3 add the following to storage yml amazon dev service S3 access key id Rails application credentials dig aws access key id secret access key Rails application credentials dig aws secret access key region us east 1 bucket development bucket add the following to development rb config active storage service amazon dev restart server refresh form page that includes form with the following f file field avatar direct upload true inspect html on that form element Expected behavior I would expect since amazon dev is set as the service in development rb that files would be uploaded to S3 I would expect to see the file field direct upload url to be an S3 url Actual behavior The file field is still pointing to localhost storage even though amazon dev set as storage service in development rb input data direct upload url 3000 rails active storage direct uploads type file name user avatar id user avatar System configuration Rails version Rails 5 2 0 beta2 Ruby version ruby 2 4 3p205 2017 12 14 revision 61247 x86 64 darwin17,,"georgeclaghorn,georgeclaghorn",2017-12-30 22:04:54,2017-12-30 22:23:56
IS,rails ujs not trigger events when we replace dom,When we send remote form and render js erb that will replace current form with new one for example validation errors we are not longer able to observer ajax complete event because original form is removed from dom end event triggered by rails wont work Before removing jquery there was possibility to observer ajaxStop event now this is not longer working Maybe there should be also global event for ajax complete System configuration Rails 5 1 4,,,2017-09-24 16:04:56,2017-12-31 02:25:10
IS,has many dependent destroy causes ids unassignment to delete child objects,Steps to reproduce System configuration Rails version 5 0 2 Ruby version 2 4 0p0,,"al2o3cr,al2o3cr",2017-09-23 04:17:58,2017-12-31 02:25:11
PR,Clarify that config eager load controls eager loading ci skip,Before Rails 4 0 config cache classes determined whether application code was eager loaded The config eager load option was introduced in to allow the two behaviours to be configured independently but this documentation was never updated to reflect that change,,eugeneius,2017-12-30 23:13:43,2017-12-31 06:07:58
IS,Partial indexes not recreated correctly after migrations on SQLite,Steps to reproduce I created an executable test case for this bug Expected behavior The test case schema creates a table with a partial unique index on the test1 column for rows where test1 t This works as expected Multiple rows with test1 f can be inserted at this point as the index ignores them The migration then performs any operation that requires the table to be dropped and recreated which is pretty much anything other than adding a column or renaming the table in SQLite So removing a column is sufficient When the table is recreated the partial aspect of the index should be retained as was originally specified Actual behavior When the table is recreated as part of a migration that has to recreate the table the partial aspect of the index is lost Accordingly the tests I provided fail because now the unique index covers rows where test1 f as well so only one can be inserted and the tests fail with a unique index violation System configuration Rails version 5 1 0 Ruby version 2 4 2p198,,fatkodima,2017-12-31 00:33:02,2017-12-31 15:34:54
PR,Fix recreating partial indexes after alter table for sqlite,Fixes,,fatkodima,2017-12-31 14:56:08,2017-12-31 15:34:54
IS,0 ActiveSupport Duration returns unexpected result,Steps to reproduce From the Rails console a 0 1 second a Expected behavior a should report its existence as 0 Actual behavior a returns nothing at all No 0 no nil no indication of what it is However a zero true System configuration Rails version 5 1 4 Ruby version 2 3 5,,georgeclaghorn,2017-11-30 20:57:27,2017-12-31 16:03:17
PR,Duration created with no parts will have a default seconds part eqaul to 0,Added a default value to seconds part with parts are empty Fixes 31302,,"eugeneius,eugeneius,eugeneius,pixeltrix,pixeltrix,eugeneius",2017-12-01 20:21:06,2017-12-31 16:03:17
PR,Bugfix foreign key replacement in inverse association,when model is added to collection association Summary The foreign key is not updated while the associated model is updated in the following scenario,,"bogdan,kamipo",2017-12-27 13:58:29,2017-12-31 16:40:24
IS,Fragment Cache always cold on server restart reload,Steps to reproduce 1 Fragement cache some pages using any caching engine 2 Restart your server 3 Cache is cold Expected behavior I would like the ability to keep my cache warm between server restarts Actual behavior Cache is not warm between restarts System configuration Rails version 4 2 10 Ruby version 2 2 1p85,,georgeclaghorn,2017-12-31 17:00:00,2017-12-31 17:24:44
PR,Bump license years for 2018,Summary Bump license years for 2018,,"yhirano55,arunagw,kamipo,shime",2017-12-31 13:38:03,2017-12-31 18:25:46
IS,ActiveStorage ActiveStorage AnalyzeJob no delegate for this image format '' w SVG image,We are using rails 5 2 0 beta2 and encountering what we think might be an ActiveStorage issue While uploading an SVG image via direct uploads to s3 in our case the ActiveStorage AnalyzeJob encounters the following error I found it interesting that this worked but the seemingly same operation was failing in the job So we looked a little upstream of that We took a closer look at the initial error and noticed that the error message gives a blank image format which looked suspicious So we removed the svg file extension from the file and we received the same error shown above as expected to be honest So I'm not sure if we encountered a bug here with ActiveStorage Is it possible that the download blob to tempfile method is returning a file w o a file extension and causing the above error Also worth nothing that the ActiveStorage Blob created during our upload that is failing does correctly store the filename with extension and the content type image svg xml System configuration Rails 5 2 0 beta2 mini magick 4 8 0 ImageMagick 7 0 7 13 Q16 x86 64 2017 12 01 Ruby version 2 4 2,,"pixeltrix,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn",2017-12-07 02:05:07,2017-12-31 20:59:10
IS,Documentation text mistake,I was reading through you documentation and realised the return of Numeric in milliseconds is not accurate It says It is peanuts but I figure I will inform you of it Edit actually you have the same on megabytes and so on It might be a visibility think I just realise,,"prathamesh-sonpatki,prathamesh-sonpatki,georgeclaghorn",2017-12-27 15:05:07,2018-01-01 18:00:28
PR,Correction of api documentation,Related to,,georgeclaghorn,2018-01-01 17:07:44,2018-01-01 18:00:44
IS,Should channel prefix support be rolled into the ActionCable Redis adapter,In 27425 I added channel prefix support to the redis evented redis ActionCable connection adapters The decision to abstract channel prefixes to it is own module was due to there being two redis adapters at the time After 30945 there is only one redis adapter so the abstraction is not needed I see two options and am seeking feedback Option 1 Just leave it alone It could potentially be useful for some unknown adapter that is added in the future but seems to violate the YAGNI principal Option 2 Roll the channel prefix support directly into the redis adapter and drop the abstraction It would clean up the code a bit and hopefully reduce technical debt Thoughts,,georgeclaghorn,2017-12-31 06:37:32,2018-01-01 18:26:25
IS,Performance speeding up relation values,In profiling our application I have found that ActiveRecord QueryMethods get value and ActiveRecord QueryMethods default value for keep showing up near the top of the list get value is called for every component of a relation whenever the arel AST needs to be generated and default value for fetches the default value for a specific component whenever it was not provided by the user We can speed these up by putting the code for each individual method into their own definitions instead of centralizing into get value Here is a gist with the proposed solution Basically every component gets its own instance variable and we use those to track the provided values instead of the values hash Using this code I'm getting about a 20 35 speed increase on generating SQL depending heavily on the query I suspect we could get further gains by using an attr writer for each of the components as those methods are further optimized by ruby itself I have not been able to think of too many downsides for this but I would love someone with more intimate knowledge of the inner workings of AR to take a look and make sure I'm not crazy If it is accepted I will be happy to put up a PR with the new code For easier comparison with the existing code here is the meat of what is changing versus L61 L77,,georgeclaghorn,2017-12-30 19:12:08,2018-01-01 18:30:25
IS,Unable to send Rails ajax request with Content Type application json,Steps to reproduce Hello I am trying to send JSON data using Rails ajax rails ujs method the problem is I am unable to set content type to application json because the configuration is very limited Is this method even designed to be used directly There is little documentation about that part of Rails I have reviewed and what concerns me is that fragment Expected behavior I should be able to set my Content Type or it should be set automatically if I send JSON object Actual behavior Content Type is magically overridden System configuration Rails version 5 1 4 Ruby version 2 4 2,,georgeclaghorn,2017-12-19 16:20:24,2018-01-01 22:01:20
IS,Do not want coffee,Steps to reproduce not having coffee Install Rails as new I followed this particular guide because I wanted to track master and also install Rails via Bundler but I'm presuming that makes no difference to the outcome please correct me if I'm wrong Choose the System configuration Rails version 5 2 0 beta2 Ruby version ruby 2 5 0 p0,,"matthewd,matthewd",2018-01-02 00:27:12,2018-01-02 00:35:51
IS,bin rails db setup ignores application configuration Rails application config active record schema format sql,Steps to reproduce 1 Install ruby 2 4 1 via rbenv Install rails 5 4 1 Running them in Fedora 25 is a plus 2 Download clone this source code 3 Note that config initializers 0 custom config rb says Rails application config active record schema format sql 4 Run bin setup which runs bin rails db setup' Guidelines for creating a bug report are available here creating a bug report Expected behavior The database loads structure sql' Actual behavior I get a runtime error instead This did not happen until a few commits were made System configuration Operating System Fedora 25 Rails version 5 1 4 Ruby version 2 4 1,,y-yagi,2018-01-01 19:28:33,2018-01-02 01:18:56
PR,ci skip Updated the links to images in association basics md,Summary Some links to images has expired in association basics md so I updated them so that the page shows the images correctly,,y-yagi,2018-01-02 06:05:04,2018-01-02 06:46:15
IS,DEPRECATION WARNING Passing a class to the class name is deprecated and will raise an ArgumentError in Rails 5 2 It eagerloads more classes than necessary and potentially creates circular dependencies Please pass the class name as a string has many transactions class name 'BitcoinPayable BitcoinPaymentTransaction' called from class BitcoinPayment at home Ammad rvm gems ruby 2 3 1 bundler gems bitcoin payable 7af6f7d51d69 lib bitcoin payable bitcoin payment rb 9,Steps to reproduce Guidelines for creating a bug report are available here creating a bug report Expected behavior Tell us what should happen Actual behavior Tell us what happens instead System configuration Rails version Ruby version,,,2018-01-02 14:37:20,2018-01-02 18:28:30
PR,fix the dirty tracking code is save hook overwriting missing attribute,Summary Fixes issue 29017 This was causing subtle errors where an attribute appeared to be loaded on a record that was actually loaded without selecting those columns but only after the record was saved again,,"willbryant,maclover7,matthewd,willbryant",2017-05-09 10:19:16,2018-01-02 20:22:58
IS,MissingAttributeError goes away after save,Steps to reproduce Take a record from a scope that uses select to load only some columns If you try to reference once of the other columns that you did not load you will get a MissingAttributeError But if you first save or save the record you get nil instead of an error Expected behavior You should continue to get MissingAttributeError after save Actual behavior You get a nil from the attribute reader System configuration Rails version 5 0 2 and 5 1 0 Ruby version 2 3 1 This is because dirty rb uses attributes map forgetting assignment which converts the Attribute Uninitialized to an Attribute FromDatabase,,"willbryant,alexcameron89",2017-05-09 09:36:25,2018-01-02 20:23:31
PR,Use count all in HasManyAssociation count records,Problem Calling count on an association can cause invalid SQL queries to be created where the SELECT COUNT a b c function receives multiple columns This will cause a StatementInvalid exception later on Solution Use count all which generates a SELECT COUNT query independently of the association Background This appears to be previously an known problem see and Hit me with your feedback,,rafaelfranca,2017-01-04 00:40:04,2018-01-02 20:48:03
IS,Primary key issues with really long table names,Steps Actual Behaviour Example app demonstrating the issue here with instructions in the README Here is the full steps Create a new Rails 5 1 app I used Rails 5 1 4 Ruby 2 4 1 and postgres as the db I'm running 9 6 Create a table with a really long name long enough that it will get truncated when generating the name for the seq for the primary key Examine the schema rb you will see that rather than id serial you will have something like that looks like This would fix the issue that the schema produced cannot be loaded I consider the UndefinedTable error to be expected given what was in the schema System configuration Rails version 5 1 4 Ruby version 2 4 1 Postgresql version 9 6 6,,kamipo,2018-01-02 23:17:01,2018-01-02 23:23:04
PR,Add bulk alter support for PostgreSQL,30176f2 introduced a bulk true option to MySQL adapter is change table which aggregates multiple column changes into a single complex ALTER TABLE statement This change extends the feature to PostgreSQL Considerations MySQL is bulk change table lives in ConnectionAdapters AbstractMysqlAdapter perhaps these methods should be moved to ConnectionAdapters PostgreSQLAdapter,,matthewd,2017-12-05 05:44:14,2018-01-03 02:45:08
IS,Hide date select tag rails 5 with jquey not working,I'm trying to hide a date select tag in rails 5 on document ready with jquey the tag looks like this date select search input params search input class form control mr sm 2 id date select and the jquery code document on 'turbolinks load' function date select hide Expected behavior The element should hide Actual behavior The element doesnt hide but with other tags the element does hide System configuration Rails version Rails 5 1 4 Ruby version ruby 2 4 1p111 2017 03 22 revision 58053 x86 64 linux,,y-yagi,2018-01-02 19:31:44,2018-01-03 06:26:54
PR,Move config action view cache template loading to proper section in configuring md ci skip,,,fatkodima,2018-01-03 17:52:42,2018-01-03 19:02:40
IS,POSTing doubles up on parameters,Steps to reproduce Manually declare a POST route to example an AuthController and post JSON parameters Route System configuration Rails version 5 1 4 Ruby version 2 3 1p112,,,2018-01-03 15:23:51,2018-01-03 19:44:31
IS,ActiveRecord 5 2 0 beta2 Float INFINITY not serialized correctly with PostgreSQL Range type,With changes within PR 30725 I can not store a Range object with Float INFINITY e g 1 Float INFINITY into PostgreSQL Range type column Steps to reproduce 1 Start PostgreSQL server 1 Create test ar range database createdb test ar range 1 Run ruby test rb Expected behavior I can set and store a Range object with Float INFINITY to PostgreSQL Range type column details summary Test results with activerecord 5 1 4 summary details System configuration Rails version 5 2 0 beta2 Ruby version 2 5 0 PostgreSQL version 9 6 6,,,2018-01-01 14:48:08,2018-01-03 21:44:55
PR,Correctly handle infinity value in PostgreSQL range type,An empty string is an invalid value in Ruby is range class So need to handle Float INFINITY as it is and cast it in encode range Fixes 31612,,y-yagi,2018-01-02 03:05:42,2018-01-03 21:44:55
IS,Turn secrets yml into credentials yml enc,The combination of config secrets yml config secrets yml enc and SECRET BASE KEY is confusing It is not clear what you should be putting in these secrets and whether the SECRET BASE KEY is related to the setup in general I would like to propose that we deprecate secrets yml and instead adopt config credentials yml enc to signify what these secrets are specifically for Keeping API keys database passwords and any other integration credentials in one place This new file would have a flat format not divided by environments like secrets yml has been Most of the time these credentials are only relevant in production and if someone does need to have some keys duplicated for different environments it can be done by hand This leaves us with what to do with SECRET BASE KEY Here I would like to propose that we for test and development simply derive values for both based off a known constant it could simply be the application name It does not really matter These secrets are not supposed to withstand any sort of attack in test or development It is only in production and derivative environments like exposed betas where the secret actually needs to be secret So we can simply insert this secret into the new flat credentials yml enc file I would suggest we think of a better name though Maybe something like app key generator secret or the likes This change would also enable us to setup the encrypted credentials along with the new application skeleton because even if you make a mistake and forget your key it is only production that is impacted So it wo not slow down anyone just getting started with development or test Finally this would leave us with a single RAILS CREDENTIALS KEY for services like Heroku to set Once this has become the standard they could even ask for this key when it is missing on the rails buildkit deploy such that the setup is all smooth Note We should just keep Rails secrets and friends around The Rails credentials setup would be a new concurrent approach All new apps would use it but we would not need to screw existing apps,,"dhh,dhh,kirs,dhh,dhh,morgoth,dhh,dhh,kaspth",2017-07-30 23:31:05,2018-01-04 03:37:20
PR,Remove the cache key with version method,Summary Remove the cache key with version method ActiveSupport Cache now use 2 conventional methods cache key and cache version instead of 3 The concatenation of key with version is now performed inside AS Cache expand cache key instead of cache key with version r,,"bogdan,georgeclaghorn,bogdan,georgeclaghorn,bogdan,georgeclaghorn",2018-01-03 14:24:00,2018-01-04 11:13:51
PR,Refactor tests for request parameters to use more realistic setup,While I was looking into I noticed that some tests were out of date so I thought I should refactor them before actually fixing the bug These assertions did matter due to the inconsistent behavior of the parameters method 1 Today it behaves consistently and they could be removed Also one of the methods was stubbed somewhat incorrectly so it is better not to stub and instead make them close to more realistic use cases 1 issuecomment 34601746,,"yuki24,eileencodes,yuki24",2017-12-29 20:20:23,2018-01-04 13:23:26
IS,HasManyThroughOrderError when redefining association in a subclass,Steps to reproduce I do have two classes called Foo and Bar Bar being a subclass of Foo with some associations defined for them The critical point is that I am using a has many through association in a parent class and I try to redefine the association in a subclass to go through an other class than I used in the parent one This is my stripped down example Expected behavior I expect things like Bar first targets to be a working association in this setting Actual behavior Instead I'm getting this error ActiveRecord HasManyThroughOrderError Cannot have a has many through association 'Bar targets' which goes through 'Bar bar refs' before the through association is defined I think that the error is in active record reflection rb in add reflection line 35 the new defined associations are merged into the existing ones That leads to a wrong position in the hash for the redefined association what will then fail in line 943 As I do not have the overview over the whole Rails stack I did not try to fix it myself System configuration Rails version Rails 5 1 4 Ruby version ruby 2 3 3p222 2016 11 21 x86 64 linux gnu Tested on Ubuntu 17 04,,,2017-11-06 13:44:25,2018-01-04 14:00:20
PR,assert changes should always assert some change,Summary While using assert changes I came across some unexpected behavior if you provide a to argument and the expression matches but did not actually change the assertion will pass The way assert changes reads I assumed that it would both assert that there was any change at all and that the expression changed to match my to argument In the case of just a from argument assert changes does what I expect as well It asserts that the before value from and that the after value changed My key change is that assert changes will now always assert that expression changes no matter what combination of from and to arguments,,"sgrif,rafaelfranca",2017-10-30 18:31:00,2018-01-04 14:17:31
PR,Add support for multiple encodings in String blank,Motivation When strings are encoded with encode UTF 16LE blank throws an Encoding CompatibilityError exception We tested multiple implementation to see what the fastest implementation was rescueing the execption seems to be the fastest option we could find Related Issues 28953 Changes Add a rescue to catch the exception Added a Concurrent Map to store a cache of encoded regex objects for requested encoding types Use the new Concurrent Map cache to return the correct regex for the string being checked cc for review,,"rafaelfranca,rafaelfranca,rafaelfranca,matthewd",2017-11-04 01:32:02,2018-01-04 14:22:22
IS,blank fails on non UTF8 strings,Steps to reproduce Expected behavior blank should return false if the string is not blank Actual behavior An Encoding CompatibilityError error is raised System configuration Rails version 5 1 0 also tested on 5 0 2 Ruby version 2 4 0,,"alexcameron89,alexcameron89,fxn,fxn,matthewd,schneems,matthewd,kamipo",2017-05-02 13:01:01,2018-01-04 16:12:17
IS,after update running inappropriately when no changes occurred,Separated into a new issue from issuecomment 233399289 With help from Steps to reproduce System configuration Rails version tested this with versions 4 2 5 2 4 2 6 4 2 7 and 5 0 0 Ruby version 2 3 1 but should be unrelated,,"maclover7,kamipo",2016-08-24 14:05:42,2018-01-04 17:46:18
PR,Add missing require for strip heredoc,In some cases it was possible to load request forgery protection without the strip heredoc helper being loaded which caused an exception Explicitly require the helper as done in other file,,georgeclaghorn,2018-01-04 23:51:58,2018-01-05 00:54:13
IS,ActiveRecord HasManyThroughNestedAssociationsAreReadonly when using has many through belongs to relation,Steps to reproduce Create model Document Create model Version Create model Section Add HABTM between versions and sections Document belongs to current version class name Version Document has many sections through current version Document accepts nested attributes for current version sections Try to update sections from a document level Expected behavior document update sections sections should work the same as document current version update sections sections Actual behavior ActiveRecord HasManyThroughNestedAssociationsAreReadonly Cannot modify association 'Document sections' because it goes through more than one other association System configuration Rails version 5 0 5 Ruby version 2 4 1p111,,alexcameron89,2017-09-11 11:38:53,2018-01-05 03:46:41
IS,Documentation guidance on transaction restarts is overbroad,The transaction restart guidance in the Active Record Transactions documentation that appears in transactions rb L132 L133 and is seen here is overbroad One should restart the entire transaction if an ActiveRecord StatementInvalid occurred It is not the case that restarting the transaction is an appropriate response to every ActiveRecord StatementInvalid exception The example given immediately above L115 in those same docs is a proof of this That transaction would not make sense to restart because it will fail every time with the same exception Instead the guidance should indicate that only in the case of some StatementInvalid errors is an attempt to restart the entire transaction appropriate In particular the errors which should be retried are the two TransactionRollbackError is L313 L331 namely Postgres is SerializationFailure and MySQL is Deadlocked These two errors are ones which can occur in almost any transaction in Postgres or MySQL if there is another transaction running simultaneously that happens to obtain locks on the wrong data at the wrong time In a loose sense we can think of them as being errors that are not the transaction is fault rather it just got unlucky For the Deadlocked error MySQL gives a direct recommendation that a restart is appropriate Always be prepared to re issue a transaction if it fails due to deadlock Deadlocks are not dangerous Just try again And for SerializationFailure Postgres recommends the same When an application receives this error message it should abort the current transaction and retry the whole transaction from the beginning Therefore the documentation should be changed to specifically recommend restarting a transaction if and only if an ActiveRecord TransactionRollbackError is raised,,,2017-09-29 20:13:03,2018-01-05 03:46:42
IS,Deadlocks in nested transactions attempt rollback,Steps to reproduce If a MySQL deadlock occurs thus raising an ActiveRecord Deadlocked exception inside a nested transaction i e a SavepointTransaction Rails' rescue handler attempts to roll back to the most recent savepoint calling rollback transaction L233 rollback L221 and then exec rollback to savepoint L15 However after a deadlock the MySQL server has already rolled back the entire transaction including any savepoints InnoDB automatically detects transaction deadlocks and rolls back a transaction or transactions to break the deadlock This means when the ROLLBACK TO SAVEPOINT query is sent the savepoint is never valid and always raises an unnecessary and incorrect Mysql2 Error L4 with the message SAVEPOINT active record n does not exist ROLLBACK TO SAVEPOINT active record n A test file appears below Expected behavior When a MySQL deadlock happens inside a nested within new transaction requires new true block within new transaction should cleanly roll back and raise an ActiveRecord Deadlocked exception Actual behavior Nested within new transaction requires new true raises a Mysql2 Error exception System configuration Rails version seen in production 5 0 2 with slightly different symptoms local testing on master c9527652c753 Ruby version production 2 3 3 2 3 5 local testing 2 4 2 Proposed fix From my understanding of the Rails Transaction and TransactionState classes I think the best fix would be to introduce a new TransactionState L5 maybe invalidated This state would be applied to each item in the TransactionManager is stack as soon as ActiveRecord Deadlocked is rescued L231 When a transaction is state is invalidated each Transaction subclass would change the behavior of rollback in the minimal possible way here L147 and here L170 by omitting the connection rollback call but continuing with all other behavior including rolling back records right Additionally they would change the behavior of commit to raise a different error a commit during an exception handler would be ill advised and probably already raise an exception but we can at least make the language of that exception more precise This same error probably also happens with Postgres My guess is that SerializationFailure should be handled this way exactly as Deadlocked is I have not tried it Test case This is a simple modification of the existing Mysql2TransactionTest,,,2017-09-29 20:28:31,2018-01-05 03:46:43
IS,ActionCable Connections hanging,I'm not sure if I'm missing something but here it goes Steps to reproduce 1 Given an actioncable connection with two identifiers 2 Connect one user passing both identifiers 3 Close the browser or call unsubscribe 4 Open rails console and disconnect that specific connection manually image Expected behavior After unsubscribing manually disconnecting I would expect the connection to no longer be listed in Redis pubsub or at least some state change on ActionCable server remote connections Actual behavior The connection seems to live in redis pubsub and ActionCable server remote connections System configuration Rails version Rails 5 1 4 Ruby version 2 4 2,,,2017-09-29 22:40:29,2018-01-05 03:46:44
IS,dddddddddddddddd socket io,Steps to reproduce Guidelines for creating a bug report are available here creating a bug report Expected behavior Tell us what should happen Actual behavior Tell us what happens instead System configuration Rails version Ruby version,,,2018-01-05 08:53:20,2018-01-05 08:53:40
PR,Force attachment as content disposition for some content types,Summary Currently unless a value for disposition is passed to ActiveStorage Blob service url we use inline for everything However some content types should not be rendered inline by default For example Sending ai files as application postscript to Safari opens them in a blank grey screen and downloading ai as application postscript files in Safari appends ps to the extension Sending HTML SVG XML and SWF files as binary closes XSS vulnerabilities Even if these are mitigated by serving the blobs from a different domain from your application having an HTML file rendered by the browser instead of downloaded opens the door for more realistic phishing attacks Sending JS files as binary avoids InvalidCrossOriginRequest without compromising security This pull request modifies this behaviour to force attachment as disposition for specific content types like the above configured in config active storage content types to serve as binary Other Information I have included a default list of content types for this new config option but it could be left empty if you think that makes more sense and let users decide what they want to be treated as attachments I think the default list makes sense though r,,"georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn",2018-01-05 11:13:10,2018-01-05 16:55:41
IS,Could not find template for digesting error with js erb views,Steps to reproduce I have created the code and steps to reproduce the problem at Expected behavior Should do fragment caching without any issues Actual behavior Error Could not find template for digesting System configuration Rails version 5 1 1 Ruby version 2 3 3 May be similar to 15255 but suggested hack like using full paths did not fix the issue,,,2017-06-11 23:50:32,2018-01-06 05:14:39
IS,development dependencies are installed when running bundle install,Steps to reproduce Gemfile The actual code change for this should be straight forward and I would be willing to contribute if this is approved as a legitimate change Expected behavior Only runtime dependencies are installed by using add development dependency add development dependency Actual behavior As you can see from Gemfile lock there are many testing and development dependencies installed e g minitest and rails dom testing With add development dependency these will not be installed System configuration Rails version Any version Ruby version Any version,,georgeclaghorn,2018-01-06 02:08:57,2018-01-06 06:52:05
IS,Russian Doll Caching with Rails 5 2,I have upgraded an application to Rails 5 2 from 5 1 and all of my tests pass but caching is not working I believe there is something wrong with recyclable cache keys I did not see anything in the documentation for configuring cache versioning but maybe I have missed something Steps to reproduce With Rails 5 2 0 beta2 and caching configured Expected behavior The cache should automatically bust when the product is updated Actual behavior The cache never busts From looking at the logs the cache helper does not appear to pass version information in to the cache get request Cache read views admin productss index f6730463a833fc7265c145e311fd4ea9 products 391526183,,"georgeclaghorn,georgeclaghorn",2018-01-04 14:40:41,2018-01-06 17:09:51
IS,ActiveRecord HasManyThroughOrderError,I have a has one association between 3 models but it have an error that says ActionView Template Error Cannot have a has many through association 'Policy intermediary' which goes through 'Policy invoice' before the through association is defined,,"maclover7,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,kamipo,kamipo",2017-05-17 09:52:21,2018-01-06 17:56:13
IS,Possible AR Polymorphic Association Regression 5 2 0 beta2,Steps to reproduce I have reduced the models in my application to the essential association Post parent has a Tracker polymorphic child association Given a child I need to get it is parent record class Post ActiveRecord Base Note that Post uses an UUID id has one tracker as track end class Tracker ActiveRecord Base attributes include track type varchar and track id uuid belongs to track polymorphic true end In the context of the Bug Report Template My Template Source the association works as expected for the simplified case not full application I have been trying to identify a failing case for it unsuccessfully Expected behavior In Rails 5 1 4 this works finding a parent from a polymorphic child Tracker find 31 track Post 0x00007ffbf38531c0 id a85c5f88 6fca 473a bdc0 205002907972 Actual behavior After upgrading to Rails 5 0 2 beta2 as well as on edge I now get an exception t Tracker find 31 Tracker 0x00007fd2eaca8360 id 31 track type Post track id a85c5f88 6fca 473a bdc0 205002907972 Tracker find 31 track ActiveRecord InverseOfAssociationNotFoundError Could not find the inverse association for track nil in Post from Users allen rvm gems ruby 2 4 2 bundler gems rails c383c4142a1c activerecord lib active record reflection rb 527 in polymorphic inverse of' Though I can get the association starting from the final point Parent Child Parent Post find t track id Post 0x00007fd2ebaa3668 id a85c5f88 6fca 473a bdc0 205002907972 Post find t track id tracker Tracker 0x00007fd2eb99b3d8 id 31 track type Post track id a85c5f88 6fca 473a bdc0 205002907972 Post find t track id tracker track Post 0x00007fd2ec22a328 id a85c5f88 6fca 473a bdc0 205002907972 Digging into active record reflection rb for 5 1 4 I see has inverse returns false because can find invserse of automatically returns false def polymorphic inverse of associated class can find inverse of automatically self false if has inverse false end end While in 5 2 0 beta2 has inverse now returns tracker and tries to get the inverse relationship Since inverse of Does not work in combination with the polymorphic options api docs this fails and raises the Exception It seems can find inverse of automatically now returns true which it should not The documentation block says Third we must not have options such as tt polymorphic tt which this is def polymorphic inverse of associated class can find inverse of automatically self true if has inverse tracker associated class Post options polymorphic true if inverse relationship associated class reflect on association options inverse of nil inverse relationship else raise InverseOfAssociationNotFoundError new self associated class end end end System configuration Rails version Rails 5 2 0 beta2 and edge Ruby version Ruby MRI 2 4 2 Thank you for your time I appreciate all you do for the project,,"fatkodima,kamipo",2017-12-04 23:05:38,2018-01-06 18:34:55
PR,Document usage of QueryMethods references with QueryMethods or,Summary QueryMethods or prohibits to connect relations with different references However it should be still valid if the author of the query is aware that references in the relations connected by or requires to add JOIN in the whole connected query QueryMethods references is an appropriate method for developers to show they know such consequences That is probably what issuecomment 282289397 want Other Information There is no additional information,,kamipo,2017-05-20 09:09:49,2018-01-06 20:43:35
IS,ActiveRecord finders last and last index behave unexpectedly with offset,Given ActiveRecord objects called Topic and numbered 1 2 3 4 and 5 for short I would expect the following,,"brchristian,brchristian,brchristian,brchristian,kamipo",2016-02-23 19:55:01,2018-01-07 10:56:13
IS,Error in Rails Guides Asset Pipeline tag helpers' debug option,From Section 3 3 of the Edge Guides on the Asset Pipeline turning debugging off Debug mode can also be enabled in Rails helper methods The debug option is redundant if debug mode is already on When I try this in Rails 5 1 it simply adds a debug true HTML attribute to the corresponding tag rather than enabling debug mode on the specified tag helper Furthermore the Edge API documentation method i javascript include tag makes no mention of a debug option I have also looked into the source for the javascript include tag method as far back as it goes in the repo 4 1 stable and I see no mention of such an option Am I missing something or is this information incorrect If so would the team accept a PR amending this portion of the guides,,georgeclaghorn,2018-01-06 09:14:39,2018-01-07 13:59:06
PR,Improve the deprecation message for using subclass of Rails Application to start the Rails server,,,"prathamesh-sonpatki,georgeclaghorn,prathamesh-sonpatki,eileencodes,prathamesh-sonpatki,prathamesh-sonpatki",2017-12-31 19:49:11,2018-01-07 16:03:54
PR,Allow use authenticated message encryption to be set in new framework defaults 5 2 rb,Followup to Enabling this option in new framework defaults 5 2 rb did not work before as railtie initializers run before application initializers Using respond to to decide whether to set the option was not working either as ActiveSupport OrderedOptions responds to any message r,,"eugeneius,y-yagi,eugeneius,eugeneius,y-yagi",2017-12-22 23:40:46,2018-01-08 03:16:53
IS,Implement find each using cursors on Postgres,Steps to reproduce Some usage of find each is leaky e g if custom order is supplied Post order created at find each Scoped order and limit are ignored it is forced to be batch order and batch size In addition I have found some use case of find each to be very slow because the offset limit approach causes a linear scan for each query Expected behavior It would be nice if on databases that supported it find each used cursors Additionally it would nice to support Enumerable I would be willing to try an implement a PR since we have a use case for this at work But I would need to know if this is something that would be merged before working on it as a PR or an external gem Some external gem already exist but it has a separate API I would like to see find each transparently work with cursors where possible,,"sikachu,sikachu",2017-02-21 01:16:01,2018-01-08 03:31:10
IS,Cookies with names starting in underscore are ignored in the http request,Steps to reproduce Create a simple app with a simple controller and view rails 5 1 4 new my app cd my app bundle install bundle update rails generate controller StaticPages index In the StaticPages controller change the index according to Then just launch the app rails server p 8080 Expected behavior I expected 1 the first request to bring back a response with a new cookie with a new value OK 2 the second request sends the cookie value OK 3 the second request brings back a response with the same cookie already created in the step 1 NOK Actual behavior It is always generating a new cookie for the response since it is not finding the cookie in the request cookies or in the cookies Actually they are both nil request cookies and cookies If I just remove the in the front of the cookie is name it works as expected System configuration Rails version 5 1 4 Ruby version 2 4 0p0,,"y-yagi,shime,y-yagi",2017-12-30 14:18:51,2018-01-08 03:53:24
PR,Fix rubocop space before comma,,,dixitp012,2018-01-08 04:51:31,2018-01-08 06:16:55
IS,Cannot use custom fields in sum operation,Using activerecord 5 0 6 User select kind '4 as coeff ' sum 'coeff' should not produce since coeff is defined Am I missing something I double checked,,y-yagi,2018-01-06 00:28:12,2018-01-08 07:22:36
PR,Allow overriding filename in Blob service url,Summary This is a simple change that allows a filename to be passed to Blob service url in the same way as expires in and disposition Other Information This is useful when we have several representations that share the same underlying file each one with a different name and we need to provide a different download URL based on that name instead of using the file is for each of them r,,,2018-01-08 14:53:45,2018-01-08 15:35:06
PR,Add render discarded option to date helper,Summary In the Lumosity com codebase our sign up form renders a birthdate field using the date select helper We purposely exclude the year field because we prefer a free form text field instead of a dropdown list Our code looks something like this,,"eileencodes,matthewd,eileencodes,eileencodes",2017-12-21 19:25:15,2018-01-08 16:10:16
IS,link with data remote true fails inside disabled fieldset,Steps to reproduce I understand that disabling a form fieldset should disable form elements Unfortunately it has the unwanted side effect of also disabling the data remote functionality of any links within it causing them to act as standard page navigation Note this is common to jquery ujs too and I have raised an issue there at Here is a self contained project demonstrating the issue A snippet from the views tests index html erb showing the failure is Expected functionality This functionality seems to be a bug Ideally data remote links should continue to function as designed when they appear inside a disabled fieldset If the intent was to disable link operation then disable them completely rather than making them malfunction A workaround is to do 'fieldset disabled true a data remote ' on 'click' function ev ev preventDefault rails handleRemote this But this is really an unnecessary hack I will happily help in attempting to resolve this though I'm struggling to see what is actually causing this issue Versions Rails 5 1 Ruby 2 4 1,,,2017-12-06 22:12:47,2018-01-08 16:52:20
PR,Do not apply scope to middle model in through association preload,When preloading a has many through association parts of the association scope were being applied to the intermediary model is preload This removes that and corrects some associations in the tests that were relying upon this quirky feature Previously has many blue tags where name blue through taggings source tag would fail when preloaded because it would try to apply the where name 'blue' scope to Tagging as it preloaded it Tests previously 'got around' this by prefixing the table name in the scope like where tags name blue so the scope would work on the intermediary model also I find this confusing and unexpected Scopes for the intermediary model in my view should be placed on the intermediary association related issues prs 22535 12725,,"rafaelfranca,kamipo",2017-07-04 12:35:44,2018-01-08 17:41:17
IS,ActiveStorage attribute conflicts with save by optimistic locking,Steps to reproduce System configuration Rails version 5 2 0 beta2 0901755 Ruby version 2 5 0rc1,,"georgeclaghorn,georgeclaghorn",2017-12-22 10:56:18,2018-01-08 19:37:40
PR,rails routes all will also show hidden internal routes,Summary rails routes all new switch that will show all the routes including hidden internal ones Like asset routes mailer previews and the reason I needed it active storage Also I learned that rails info is a thing Who knew Other Information There is an issue with ActiveStorage appending routes instead of prepending I could not see for sure until this change I will work on the fix for ActiveStorage next,,,2017-10-02 03:06:41,2018-01-08 20:43:58
IS,ActiveStorage javascript dispatchEvent not working in Firefox,We are running into an issue where the ActiveStorage javascript window events for example wouldirect upload initialize' are not being picked up by event listeners in Firefox but are being picked up in Chrome and Safari For example we use the following code to initialize some direct upload progress indicators This recent ActiveStorage Firefox issue got me thinking is there a discrepancy between the native dispatchEvent handling in Firefox vs Chrome Safari which is keeping these events from being picked up by the event listeners System configuration Rails '5 2 0 beta2' Ruby version 2 4 2,,"georgeclaghorn,javan,javan,javan,javan,javan",2017-12-11 05:30:29,2018-01-08 22:09:35
IS,after commit on update is not triggered,Steps to reproduce Expected behavior after commit test update on update calls callbacks Actual behavior after commit test update on update is not triggered since rails 5 1 0 beta1 and on master previous versions are fine the problem is only on models that contain lock version column System configuration Rails version 5 1 0 beta1 Ruby version 2 4 2,,,2017-10-02 20:27:41,2018-01-09 02:59:45
IS,ajax before events not stopping remote links with method option,Steps to reproduce Use jquery rails gem Require jquery3 in application js manifest No turbolinks Expected behavior Clicking either link should do nothing other than ask to confirm Actual behavior Clicking link with method delete asks to confirm then follows through with the request successfully Does not fire ajax complete or ajax success If ajax before does not return false ajax success and ajax complete are fired System configuration Rails version Rails 5 1 4 Ruby version ruby 2 4 1p111 2017 03 22 revision 58053 x86 64 linux,,,2017-10-03 08:50:42,2018-01-09 03:59:43
IS,ActiveStorage attachment validations not working,Steps to reproduce Expected behavior A non image avatar should not be saved Actual behavior saved System configuration Rails version master 428939b Ruby version 2 5 0,,"georgeclaghorn,georgeclaghorn",2018-01-09 07:29:19,2018-01-09 13:45:27
IS,When I am running rake hydra server I am getting the following error,admin edwin Vostro 3900 hyrux yaya app my app rake db create Database wouldb development sqlite3' already exists Database wouldb test sqlite3' already exists admin edwin Vostro 3900 hyrux yaya app my app rake db migrate admin edwin Vostro 3900 hyrux yaya app my app rake hydra server rake aborted Do not know how to build task 'hydra server' see tasks var lib gems 2 3 0 gems rake 12 3 0 exe rake 27 in top required ' See full trace by running task with trace Steps to reproduce Guidelines for creating a bug report are available here creating a bug report Expected behavior Tell us what should happen Actual behavior Tell us what happens instead System configuration Rails version Ruby version,,georgeclaghorn,2018-01-09 07:14:21,2018-01-09 13:47:33
PR,Change Active Storage destroy callbacks,There is concern that only blob are deleted depending on the before destroy definition order which throws abort For example following code does not destroy an user and keep a record of active storage attachments but a record of active storage blobs is destroyed refs carrierwave activerecord rb carrierwaveuploader carrierwave L57 paperclip has attached file rb thoughtbot paperclip L95 L97,,,2018-01-09 03:48:56,2018-01-09 15:02:23
IS,test unit reporter from beta2 version does not work nicely with minitest 5 11,Steps to reproduce Have minitest 5 11 1 included in Gemfile Create testsuite with two tests that fail execute rake test Expected behavior Testsuite should show two failed tests Error should not be presented Actual behavior After first test fails testsuite execution stops with exception raised My example Workaround Lock older version of minitest gem 'minitest' '5 10 3' System configuration Rails version Rails 5 2 0 beta2 Ruby version ruby 2 5 0p0 2017 12 25 revision 61468 x86 64 darwin15,,,2018-01-09 18:36:38,2018-01-09 18:44:42
PR,Do not include Active Storage migrations in new apps,For the complete discussion see Closes 31315 This is an alternative implementation as suggested by in issuecomment 352527652 Is this what you intended Am I missing anything What kind of tests should I add For the template files I have copied pasted and then added the if statement,,claudiob,2017-12-21 19:33:29,2018-01-09 19:59:05
PR,Run Active Storage migrations in new apps,In previous versions of Rails running rails new app name cd app name rails server was all it took to see something up and running in your browser at localhost 3000 This had a great impact on newcomers who would get excited about having something up and running so quickly With Rails 5 2 0 beta2 this has changed opening the browser now shows an ActiveRecord PendingMigrationError and a very technical page that asks to run migrations The reason is that the last step of rails new is now rails active storage install which copies migration timestamp create active storage tables active storage rb from active storage This commit ensures that those migrations are also executed when they are added to the app,,"claudiob,georgeclaghorn,bogdanvlviv,claudiob,claudiob,guilleiguaran,kaspth,claudiob,claudiob,claudiob,guilleiguaran,matthewd,claudiob,dhh,claudiob,dhh,claudiob,georgeclaghorn,claudiob,bogdanvlviv,bogdanvlviv,claudiob,claudiob,kaspth",2017-12-02 20:26:19,2018-01-09 19:59:05
IS,ActiveRecord first and last behave differently with limit,Steps to reproduce Expected behavior I would expect that for any ActiveRecord relation first n size and last n size would always be equal Actual behavior The first n method seems to overwrite the limit 1 whereas the last n method respects it As a result Topic limit 1 first 2 size is 2 and Topic limit 1 last 2 size is 1 In my opinion the behavior of the last n method is correct This is consistent with DHH is comments here for instance issuecomment 189675440 This would seem to suggest that the first n method should ought to return an array of size 1 in the case of Topic limit 1 first 2 System configuration Rails version current master Ruby version 2 3 0,,"brchristian,mechanicles,brchristian,mechanicles",2016-03-01 08:15:57,2018-01-09 19:59:34
PR,Consistency between first and last with limit,Fixes 23979 As discussed in 23979 there was an inconsistency between the way that first and last would interact with limit Specifically This PR is a refactor and rebase of 24124 with a simpler test suite and simpler implementation Discussion with Rails community members as well as DHH in issuecomment 189675440 showed that the behavior or first should be brought into line with last rather than vice versa This PR resolves the inconsistency between first and last when used in conjunction with limit,,"brchristian,kamipo,kamipo,brchristian,brchristian,kamipo,kamipo,kamipo,kamipo,kamipo,kamipo,brchristian,brchristian,brchristian,brchristian,brchristian",2017-01-06 22:34:28,2018-01-09 19:59:34
PR,Fix performance issue with NameError missing name on ruby v2 3 0,Fix performance issue on ruby with did you mean gem Summary Since ruby v2 3 0 did you mean gem shipped and ENABLED by default It patches NameError message with spell corrections which are SLOW We should use original message instead Another options gem uninstall did you mean ruby disable did you mean e RUBYOPT disable did you mean ruby add RUBYOPT disable did you mean to your bash dash foo shell rc That is very bad that this fancy gem is enabled by default even in production environment But anyway if it enabled rails should NOT be slow Benchmark script Conclusion DidYouMean brings serious performance degradation,,"kamipo,matthewd,matthewd,matthewd,matthewd",2017-07-05 10:24:27,2018-01-09 21:01:57
IS,Preloader behaviour change in Rails 5 2,Steps to reproduce ActiveRecord Base Preloader new preload order order items order subitems Expected behavior Expected to preload given associations for order Actual behavior Fails with error undefined method compact for Order System configuration Rails version 5 2 0 beta2 This happens due to this commit diff 8bdf4d71fc80d5866e82a8024bb148d2 dated 18 Sep 2017 If before preloader would work for a single object via Array wrap now it only works for arrays To be fair comments for this method do state that it works for arrays not single objects But it worked this way ever since rails 3 And this change is breaking a lot of stuff for me If you guys decide to keep this at least put a big bold deprecation in release notes,,kamipo,2018-01-09 22:00:13,2018-01-09 22:24:46
PR,Add StrictInteger type,Summary Use Integer to catch invalid integer values and return nil in the error case The behavior of the other casting functions and this function to return nil in the case of invalid values,,"sgrif,rafaelfranca,matthewd,sgrif",2017-11-10 17:43:11,2018-01-09 22:54:59
IS,Invalid PG UniqueViolation Index out of sync,I hit a duplicate key constraint when there is none,,,2018-01-09 21:50:15,2018-01-09 23:38:38
PR,Update active storage overview md,Summary When I upgraded from Rails 5 1 to 5 2 and tried to install ActiveStorage the migrations rake task was not found because I had not added the engine Adding this reminder in the guides or in the ActiveStorage readme could save time for other developers This was the issue I referenced,,"kaspth,fatkodima,kaspth",2018-01-09 20:15:18,2018-01-10 02:38:24
IS,Silent failure when an ActiveJob SerializationError occured,Steps to reproduce I was passing a symbol in one of the arguments but there was no error raised no log nothing helping me to find out the issue Expected behavior Have at lease a warning in the log file or an error raised breaking the code Actual behavior The ActiveJob Enqueued job name Job ID job id to Sidekiq queue name with arguments argument list log appears but the web UI of my background job library remains empty and nothing happens System configuration Rails version 4 2 Ruby version 2 4,,rafaelfranca,2018-01-09 06:48:31,2018-01-10 08:24:00
IS,PG Error result has been cleared rails serilization,Hi i am using ruby pg gem 0 18 4 for PostgreSQL connection i am writing below line to run SQL queries in PostgreSQL result connection exec sql i have a model called Test it has serialized column like serialize meta i am storing the result into MySQL into serialized column meta When i query meta column using Active Record Test select 'meta' where id 726345 it is throwing error PG Error Exception result has been cleared data in MySQL row is i found out the problem with empty PG Result object i have a lot of rows in MYSQL like above how can i query those records System configuration Rails version 5 1 Ruby version 2 2 5 MySQL version 5 6 any help,,matthewd,2018-01-10 08:41:55,2018-01-10 10:18:06
PR,Remove reference to outdated blog post,Remove mention of outdated blog post from routing docs next section shallow nesting already speaks about how to avoid deep nesting The paragraph was updated including TIP Resources should never be nested more than 1 level deep,,"matthewd,kaspth",2016-11-28 13:01:19,2018-01-10 10:47:16
PR,Clean up railties tests,Remove AppGeneratorTest test active storage install The test is added by 67db41aa7f17c2d34eb5a914ac7a6b2574930ff4 since 31534 this test does not test anything Remove redundant assertions in SharedGeneratorTests These assertions is added by 4a835aa3236eedb135ccf8b59ed3c03e040b8b01 Follows 67db41aa7f17c2d34eb5a914ac7a6b2574930ff4 31534 r yagi,,"bogdanvlviv,y-yagi,bogdanvlviv,y-yagi",2018-01-10 10:49:56,2018-01-10 11:38:56
PR,Fix inverse of documentation,Came across a few issues when working on the docs contradict the code in reflection rb a few ways setting inverse of works for as through and polymorphic options it is not mentioned using a scope prevents the inverse being set automatically the list of options preventing automatic inverses did not match the INVALID AUTOMATIC INVERSE OPTIONS constant in the code This can be backported to older maintained versions with the caveat that automatic inverse for polymorphic relations is 5 2 only,,"bdewater,kamipo,bdewater,kamipo,matthewd,bdewater,kamipo,rafaelfranca,bdewater,kamipo",2017-12-14 15:00:59,2018-01-10 17:29:15
IS,AR 5 1 4 causes Gem LoadError with pg 1 0 0 wants ' 0 18',Steps to reproduce Start a new Rails project with ActiveRecord 5 1 4 Add gem postgres '1 0 0' to the Gemfile bundle Start bundle exec rails s Visit the root page Expected behavior The default public page should display Actual behavior Gem LoadError can not activate pg 0 18 already activated pg 1 0 0 Make sure all dependencies are added to Gemfile it appears that a squiggly version check L4 is made in postgresql adapter rb that fails now pg has recently released 1 0 0 System configuration Rails version 5 1 4 Ruby version 2 4 1,,"rafaelfranca,yahonda,rafaelfranca",2018-01-10 18:14:25,2018-01-10 18:28:20
PR,Add support for Minitest 5 11,,,"y-yagi,zenspider,zenspider,rafaelfranca",2018-01-02 23:06:15,2018-01-10 23:46:30
PR,add instrumentation for read multi,Summary add instrumentation for read multi as currently it is not possible to know what the hit rates are from read multi,,,2017-08-15 10:03:37,2018-01-11 00:24:35
PR,Fix typos ci skip,1 2 Line 262 of the same guide 3 extra spaces,,ydakuka,2018-01-09 06:36:33,2018-01-11 13:47:14
IS,How to attach same file to multiple models with ActiveStorage,Steps to reproduce I want to upload a file once on a model and also create a record on the active storage attachments table linking same file to a diferent model My first attempt has been the following one Expected behavior The file should be reflected as attached also for the relation Operation A record on active storage attachment would do the trick maybe Actual behavior An ActiveRecord RecordInvalid error is raised because the blob must exist I could simply do operation documents attach document param but I'm thinking on other contexts where the blob wo not be available ActiveRecord callbacks for example System configuration Rails version 5 2 0 beta2 Ruby version 2 4 1p111,,georgeclaghorn,2018-01-11 11:26:53,2018-01-11 13:59:29
IS,Rails does not work with pg 1 0 0,Steps to reproduce 1 Ensure gem pg is in Gemfile 2 bundle update 3 rails s Expected behavior Rails server should run Actual behavior gems activerecord 5 1 4 lib active record connection adapters connection specification rb 188 in rescue in spec' Specified 'postgresql' for database adapter but the gem is not loaded Add gem 'pg' to your Gemfile and ensure its version is at the minimum required by ActiveRecord Gem LoadError System configuration Rails version 5 1 4 Ruby version 2 4 3 The issue appears to be caused by this line L4,,rafaelfranca,2018-01-11 09:12:03,2018-01-11 15:00:42
IS,Accessing the ActiveStorage file in the controller,Not 100 sure if this is a bug or a missing feature of ActiveStorage or I purely just do not know how to do it Steps to reproduce If I have a method like this in my controller def show file send data avatar blob filename avatar blob filename type avatar blob content type disposition 'inline' end It seems we can not access the blob of the file itself because blob is a method to the ActiveStorage blob object The source L67 Trying to change it so that you send the file instead also does not work def show file send file helpers url for user avatar filename avatar blob filename type avatar blob content type disposition 'inline' end Expected behavior The file should be accessible in the controller as either data or path Actual behavior Using send data and passing the blob method causes empty render for the file Using send file throws an error that the file can not be found even though you can access the file in the browser directly from the value of url for user avatar System configuration Rails version 5 2 Ruby version 2 4 1 Is it possible to return an ActiveStorage file using send data or send file,,georgeclaghorn,2018-01-11 17:34:20,2018-01-11 17:50:05
IS,Errors with pg 1 0 0,Steps to reproduce Move to version 1 0 0 of the pg gem Expected behavior App should work normally Actual behavior There is an error on startup with the following stacktrace System configuration Rails version 5 1 4 Ruby version 2 4 1,,yahonda,2018-01-11 17:59:05,2018-01-11 19:33:55
PR,Getting Started Guide Ruby 2 3 1p112 2 5 0p0 ci skip,,,"fgo,rafaelfranca",2018-01-11 17:54:12,2018-01-11 19:35:01
PR,PostgreSQL Allow pg 1 0 gem to be used with ActiveRecord,Summary pg 1 0 0 is just released and most Gemfiles do not restrict it is version But the version is checked when connecting to the database which leads to the following error when after bundle update Edit Update information about rails 5 0 and 5 1,,"larskanis,larskanis,rafaelfranca,larskanis,larskanis",2018-01-10 20:17:26,2018-01-11 19:40:44
PR,Instrument model schema load,It looks like there is no hook that will allow configuring ActiveRecord models based on what columns they have but only when information about columns will be loaded from DB The problem is that if I ask in the model about available columns then ActiveRecord will try to connect to DB and load this information But at that time DB may not be available or even may not exist See for example We have such internal model extensions in our app too After upgrade to current 5 2 beta one of them started to ruin even rake db create command trying to connect to not yet created database Maybe it worth to write helper method like on configure which will do all that stuff in it where it is better to define it What do you think Implementation notes I have chosen ActiveSupport Instrumentation as it allows to have multiple hooks for every model and have them called in turn without writing much code ActiveSupport Callbacks are designed for defining callbacks at the class level and using at the instance level I need to define and use callbacks at the class level I'm waiting for your suggestions advice and corrections Thanks in advance,,"Envek,rafaelfranca,matthewd,Envek",2018-01-11 21:54:41,2018-01-12 00:02:43
PR,Fix typos update documentation,This fixes several issues in the documentation that I noticed Corrections In asset tag helper rb the documentation for audio tag and video tag does not match the methods' current parameter inputs I have updated them using wording similar to that of other methods in the file Cleanup Throughout the Rails documentation URL is written in all caps since it is an acronym I found a few instances where it was lowercase and capitalized them for consistency Updated two external links in asset url helper rb to use HTTPS Fixed one instance where a literal was missing its code markup request Added two missing Oxford commas Typo fixes an resource a resource files that exists files that exist unobstrusive unobtrusive,,matthewd,2018-01-12 01:46:34,2018-01-12 05:30:38
IS,new pg gem v 1 0 0 incompatible with the rails,Hello all it seems that the new version of pg gem for postgres has been released a few days ago After updating my gem from 0 21 0 to 1 0 0 I get the following error System configuration Rails version 5 1 4 Ruby version 2 3 3,,,2018-01-12 09:15:19,2018-01-12 13:28:52
PR,Fix locale in pluralize,,,"eileencodes,eileencodes",2018-01-11 19:40:41,2018-01-12 13:41:10
IS,Allow customization of how content type is determined in ActiveStorage,Hi I have been reimplementing a part of my solution that currently uses Shrine using ActiveStorage in the 5 2 0 beta2 I think there should be a an easy way to customize how the UploadedFile content type gets determined similar to Shrine is DetermineMimeType plugin works Something like My use case is that in my application users are uploading a lot of files from proprietary hardware that produces binary files that have no extensions DICOM files These files can be easily identified by the file command or using mimemagic but they get the content type 'application octet stream' when uploaded through ActiveStorage because they have no extension When I try to edit the content type directly in a custom analyzer I get a checksum error If somebody knows how to do this then please share or point me in the right direction System configuration Rails version Rails 5 2 0 beta2 Ruby version ruby 2 5 0p0 2017 12 25 revision 61468 x86 64 darwin17,,georgeclaghorn,2018-01-12 12:52:10,2018-01-12 14:21:59
IS,Server side generated JavaScript Responses are not executed because of default Content Security Policy,I'm not sure if this is a bug or an intended change but this was working by default in previous versions of Rails However in 5 2 beta2 Server side generated JavaScript Responses are not executed because of default Content Security Policy introduced in Steps to reproduce Create a new Rails app System configuration Rails version 5 2 0 beta2 Ruby version 2 4 1p111,,"rafaelfranca,pixeltrix,pixeltrix,pixeltrix",2017-11-29 04:40:18,2018-01-12 14:37:28
PR,Fix some broken links in guides,Summary In the guides some links lead to 404 pages so I fixed some on them Based on broken links detector results,,,2018-01-11 14:56:52,2018-01-12 20:05:43
PR,Fix doc typo ci skip,Summary Provide a general description of the code changes in your pull request were there any bugs you had fixed If so mention them If these bugs have open GitHub issues be sure to tag them here as well to keep the conversation linked together Other Information If there is anything else that is important and relevant to your pull request mention that information here This could include benchmarks or other information If you are updating any of the CHANGELOG files or are asked to update the CHANGELOG files by reviewers please add the CHANGELOG entry at the top of the file Finally if your pull request affects documentation or any non code changes guidelines for those changes are available here contributing to the rails documentation Thanks for contributing to Rails,,,2018-01-12 21:02:48,2018-01-12 21:06:30
PR,Use SHA 1 for non sensitive digests by default,Followup to Instead of providing a configuration option to set the hash function switch to SHA 1 for new apps and allow upgrading apps to opt in later via new framework defaults 5 2 rb does this address your concern from about cache invalidations for existing apps Upgrading to 5 2 would not change anything but flipping the setting later would still invalidate every key If busting the cache is a complete no go you could just never do that,,eugeneius,2018-01-08 21:31:41,2018-01-12 22:03:33
PR,Update working with javascript in rails md,Spelling fix,,sgrif,2017-12-28 10:19:57,2018-01-12 22:05:34
IS,link to block does not forward method delete,Steps to reproduce I'm trying to create a logout link for the devise gem It works when link to is not a block but stops working once it is a block Working code Expected behavior This link should send a DELETE request to user sign out Actual behavior This link sends a GET request to user sign out returning with the error 'No route matches GET users sign out ' System configuration Rails version 4 2 9 Ruby version 2 4 1,,rafaelfranca,2018-01-10 22:31:11,2018-01-12 23:11:01
IS,Consider sandboxing binaries used in previewers,Currently the previewers in rails shell out to the mupdf and ffmpeg binaries L19 L19 L20 Unfortunately these are both large codebases parsing complex formats written in memory unsafe languages with a history of security issues Here Type 3DBug Security colspec ID Type Component Status Proj Reported Owner Summary cells ids are 82 security vulnerabilities that Google is OSS Fuzz has found in ffmpeg alone I would like to encourage Rails to run these binaries under an OS sandbox so that vulnerabilities in these binaries cannot be used to trivially take over a system is a tool that can simplify sandboxing on Linux,,"georgeclaghorn,georgeclaghorn",2018-01-12 23:48:11,2018-01-13 00:44:51
PR,Add note about configuration to template file,For example config time zone is referred by ActiveSupport L25 which initializes before Railtie is initialize process They should be configured before that process so I think Rails should note to developers about this matter ref issuecomment 216317145 Please close this PR if this issue is not even a thing,,"prathamesh-sonpatki,fxn,rafaelfranca,matthewd,matthewd",2017-02-06 07:22:31,2018-01-13 05:50:44
PR,Fix comment about initializers to adapt to the fact,refs 27920 closes 27920 Currently the comment says application configuration should go into files in config initializers However some configuration could not initialize correctly because of the initializing process e g config time zone It should be changed by framework but this is large change and it may occur malfunction to some applications which depends on current initializing process So I think this comment should be changed to adapt to the fact cc,,"sikachu,y-yagi,y-yagi",2017-12-27 04:59:46,2018-01-13 05:50:44
IS,documentation for managing database connections,As far as I can tell there exists no documentation for how to manage database connections in various situations The documentation for the methods themselves is good But it is not clear what rails will automagically do for me and what I should deal with myself Between blog posts third party documentation and implementation of various tools one can make a guess But these sources do not agree with one another To add to this confusion Rails' behavior has changed over the years and it is not clear if the blog posts match up with the latest behavior relevant methods I'm aware of ActiveRecord Base establish connection ActiveRecord Base connection pool disconnect ActiveRecord Base connection disconnect ActiveRecord Base connection reconnect ActiveRecord Base clear active connections sources of information activerecord on worker boot threaded servers examples Here is an example of what I want to know how to do I think it is probably pretty generically representative of many process and thread situations A worker script runner rb is run with rails runner Questions I have When forking a process what should be done at the top of the process When starting a thread what should be done at the start and end of the thread After forking a process what should be done After starting a thread what should be done I have a pretty good guess about most of these and have implemented code that works but I could not explain to you why different documentation suggests using different combinations of the above methods for seemingly the same ends If some more guidance around these issues is shared here then I will be happy to put together some documentation about it In fact maybe it can be a new standalone guide maybe about concurrency Thanks,,"arthurnn,arthurnn",2017-01-21 06:16:58,2018-01-13 06:35:52
IS,how can i not call the action from parent,Steps to reproduce the code in my rails project like i transfer the action a in class b but due to the before filter so that i call the method a in his parent how can i stop call the method if i do not change the method name thank you very much,,georgeclaghorn,2018-01-13 16:26:35,2018-01-13 20:55:04
IS,assert no changes raises minitest deprecation warning,Steps to reproduce Run the following test System configuration Rails version 5 1 4 Ruby version 2 4 2 Minitest version 5 10 3,,y-yagi,2018-01-14 00:33:24,2018-01-14 01:07:20
IS,Rails guide needs some clarification for noobs,Sorry if I post this in a wrong place but Contributing to the Rails Documentation contributing to the rails documentation paragraph says to open a pull request but opening a request is itself requires to make a change to source code Which I'm not doing because I just want to make a suggestion about a guide So that is the first issue Contributing to the Rails Documentation contributing to the rails documentation instructions should be more clear And the second issue that I wanted to tell about is an SQL statement in Creating Active Record Model creating active record models tutorial You see I am a new guy to all this web design stuff I just got some basic knowledge of HTML and started to learn Ruby on Rails So not only I had to search the web for what that SQL statement actually means but I also found out that this is not SQL statement but MySQL statement which has a slightly different syntax So my suggestion is either put a link to a viable MySQL tutorial documentation for people who do not have prior knowledge of Relational Data Bases or scrap SQL reference altogether and just write that product table has two columns with certain properties Again sorry if I post this in the wrong section but that is the only place I figured out my request should go Where else,,y-yagi,2018-01-13 04:51:42,2018-01-14 03:12:57
PR,Make ActiveStorage Variant processed public,Summary This small change makes ActiveStorage Variant processed public What is the reasoning behind it Suppose that you want to execute the processing in the background e g thru ActiveJob then in your views you want to decide on whether to show the variant if it is ready or the original image as a fallback That is maybe a very simple example Nevertheless I think it could be useful to have this method as a part of public API,,"palkan,georgeclaghorn",2018-01-14 10:47:29,2018-01-14 13:05:07
PR,Change test case name to FormatValidationTest,I believe that this was caused by a copy paste mistake,,kamipo,2018-01-14 12:51:08,2018-01-14 13:05:44
PR,Allow unscoping of left outer joins,Summary This one is simple The new left outer joins method can be unscoped with unscope method pretty well if it is just white listed in Relation QueryMethods,,,2017-03-06 16:32:10,2018-01-14 18:22:21
IS,Destroyed record save returns true with SQLite and unfreezes the model instance,Steps to reproduce rails new my app rails generate model User rake db migrate rails c user User new user save user destroy user frozen true user save true should be false user frozen false should still return true User count 0 user save true should throw an error User count 0 Expected behavior Destroyed objects still held in memory should return false or throw an error when trying to save They should remain frozen even after attempts to save Actual behavior Destroyed objects in memory when told to save or save return true even though they are not actually saved to the database And they unfreeze themselves System configuration Rails version 5 0 2 Ruby version 2 4 0 SQLite version 1 3 13 I did not modify any gems The steps to reproduce are complete to show the error in this Rails version,,alexcameron89,2017-03-24 16:36:51,2018-01-14 19:56:45
PR,Fix relation merger issue with left outer joins,The problem If you want to merge a relation which contains left outer joins to another relation AR tries to do left outer joins with base relation which is incorrect behaviour Here is the test script you can see current behaviour Without this pr AR tries to join Preference model with Post model and raises exception because there is no relation declared between Preference and Post directly Using merge to share logic between scopes are the best way to keep models clean so this is why I think this should work as expected Btw I think this is not a regression since left outer joins presented I think it is just forgotten,,"meinac,rafaelfranca,rafaelfranca,rafaelfranca,meinac,meinac,meinac,kamipo,meinac",2017-01-31 17:24:42,2018-01-15 16:39:14
PR,Extract content types from blob data,Active Storage relies on content types to expose features to categories of blobs For example variants are made available for blobs whose content types identify them as variable images Unfortunately browsers provide unreliable content types for uploaded files At Basecamp we frequently observe browsers submitting image files with the application octet stream content type If we relied on declared content types rather than extracting appropriate content types from file data we would fail to properly display the misidentified image files We d fall back to a generic file icon instead of displaying the images themselves This PR brings content type detection to Active Storage via Marcel Marcel uses MimeMagic to extract content types from file data When MimeMagic chooses a vague content type for a file Marcel attempts to pick a more specific one from its extension Marcel is production ready we ve used it in production for almost a year and we ve used magic number based content type detection longer It has an extensive test suite based in part on real edge cases we ve identified in production,,"georgeclaghorn,kaspth,georgeclaghorn,kaspth,tenderlove,georgeclaghorn,tenderlove,georgeclaghorn,georgeclaghorn,tenderlove,georgeclaghorn,georgeclaghorn",2018-01-12 18:49:33,2018-01-15 18:06:18
IS,ActiveStorage content type should not be nil,Steps to reproduce Create a new attached file for an arbitrary record like an user without providing the content type which is currently allowed User last images attach io File open Rails root join 'public' 'image png' filename 'image png' Expected behavior a it should raise an error because of the missing content type or b do not rely on content type in ActiveStorage Blob e g line 94 System configuration Rails version 5 2 0 beta2 Ruby version ruby 2 4 3p205 2017 12 14 revision 61247 x86 64 darwin16,,"georgeclaghorn,georgeclaghorn",2018-01-14 20:12:59,2018-01-15 18:22:54
IS,App update extends asset paths for api only app,Steps to reproduce I ran rails app update to update my api only app from Rails 5 0 to 5 1 The assets initializer is being updated the following way image Expected behavior I would not expect my asset path to be extended because I do not use the asset pipeline Actual behavior It adds node modules to the asset path bin yarn is also added by the way even though I do not need it for an api only app System configuration Rails version 5 1 Ruby version 2 4,,y-yagi,2018-01-15 15:26:16,2018-01-15 22:24:53
IS,Controller is ignoring delete actions on Rails 5 1 4,Steps to reproduce Create a new Rails 5 1 4 app with CRUD operations create a delete method on your controller add it to your routes and edit a view that links to that destroy action via a DELETE request Expected behavior Rails should delete the specified resource from the database Actual behavior Rails redirects to the page of that same resource System configuration Rails version 5 1 4 Ruby version 2 5 0p0 Here are my controller routes and view captura de pantalla 2018 01 15 20 30 56 Rake routes captura de pantalla 2018 01 15 21 55 05,,,2018-01-16 03:55:39,2018-01-16 04:17:01
IS,different behaviors between saved changes and changes,I'm migrating my old rails project because of the deprecation warning but I find that the results of saved changes changes are different on virtual fields in after update I can see virtual column in changes but cannot find it in saved changes,,composerinteralia,2017-09-02 05:37:11,2018-01-16 07:08:23
IS,Google Drive and ActiveStorage,Any hint about Google Drive and ActiveStorage Maybe I can PR a doc,,georgeclaghorn,2018-01-16 17:54:30,2018-01-16 18:19:58
IS,reset counters method of Rails counter cache uses default scope,Steps to reproduce 1 In a model change default scope to include some active record objects and exclude some of them 2 Make another scope that includes all unscoped records as well 3 Try to use reset counters method for the scope that has the unscoped records Eg code snippets Now trying to reset counters for a Post that is not in the default scope throws error Post reset counters 5 comments throws ActiveRecord RecordNotFound exception Expected behavior reset counters should work and be able to find the active record by using unscoped Actual behavior ActiveRecord RecordNotFound Could not find Post with 'id' 5 WHERE posts public 1 System configuration Rails version 5 0 6 Ruby version 2 3 1,,,2018-01-17 05:53:53,2018-01-17 06:05:20
IS,New reference to old table fails on foreign key MySQL bigint 20 v int 11,When creating a new table with a references column for an existing pre 5 1 table the attempt to create a foreign key constraint in MySQL fails with a huge backtrace having just a few cryptic clues as to what went wrong Steps to reproduce Create a foreign key to a table created pre 5 1 fails MySQL I know this is not an executable test case based on active record migrations gem rb but I'm pretty sure this would not be an issue for SQLite3 anyway In my client is case the Member model exists and the Role and Hat models are going to be created for a role based authorization implementation Starting simply with,,al2o3cr,2017-10-04 23:01:08,2018-01-17 06:50:23
IS,Error saved in secrets yml enc blocking decryption,Steps to reproduce Saving an error of syntax in rails secrets edit leads to block the file forever Example Expected behavior While running rails secrets edit again open the file without error Actual behavior Users leo rvm rubies ruby 2 4 1 lib ruby 2 4 0 psych rb 377 in 'parse' unknown did not find expected key while parsing a block mapping at line 2 column 1 Psych SyntaxError System configuration Rails version 5 1 2 Ruby version 2 4 1p111 2017 03 22 revision 58053 x86 64 darwin16 Not sure if the issue is already reported if so my bad I must have missed it,,meinac,2017-10-10 14:58:01,2018-01-17 06:50:24
IS,Time Zone tests fail on Windows,With Ruby 2 3 3 on Windows on the v5 1 0 beta1 tag two time zone related tests fail,,maclover7,2017-03-17 16:29:30,2018-01-17 06:50:25
IS,Failing adding a column during migration,Steps to reproduce Try to add a column with the key work 'id' at the end like 'original user id' to a model call User This column is not a reference but an integer Expected behavior It should add the original user id column to the user table Actual behavior It does not add the column but the migration is executed with success System configuration Rails version 5 0 2 Ruby version 2 3 4,,meinac,2017-10-12 09:49:02,2018-01-17 11:50:24
PR,Update Layouts and Rendering in Rails guide ci skip,Remove mention about ActionView TemplateHandlers since this module was removed by c1304098cca8a9247a9ad1461a1a343354650843 Change word subclasses to nested classes See c7408a0e40545558872efb4129fe4bf097c9ce2f Remove useless sentence Beginning with Rails 2 the standard extensions are erb for ERB HTML with embedded Ruby and builder for Builder XML generator,,bogdanvlviv,2018-01-17 14:35:11,2018-01-17 14:37:41
PR,Convert keys to binary in the Redis cache store,Fix encoding errors when using the pure Ruby Redis driver instead of Hiredis Dodge incompatibilities between UTF 8 and arbitrary value encodings which rear their heads when the Redis driver tries to build a single command string from incompatibly encoded keys and values cc,,"georgeclaghorn,jeremy,jeremy,georgeclaghorn,matthewd,georgeclaghorn,matthewd,georgeclaghorn,kaspth,georgeclaghorn,georgeclaghorn",2018-01-16 20:20:58,2018-01-17 17:28:47
PR,Move browser config to its own class,This moves browser configuration to its own class and simplifies the Driver class to simply ask the browser for its name options and type instead of determining all of that within the driver class cc for,,"eileencodes,eileencodes",2018-01-15 19:13:27,2018-01-17 19:30:56
PR,Move require action dispatch system testing browser to driver rb,Browser is used in action dispatch system testing driver rb only Related to 51c5bcb cc,,"bogdanvlviv,rafaelfranca",2018-01-17 21:52:46,2018-01-17 22:15:24
IS,ActiveStorage client side encryption,I would like to do direct uploads to AWS S3 with client side encryption so that data is already encrypted when being sent over the wire Is this feature on the roadmap for ActiveStorage Does that sound like a good idea,,sgrif,2018-01-17 22:16:15,2018-01-17 22:32:14
PR,Avoid RangeError for has many association,,,"kamipo,matthewd,kamipo",2017-07-08 22:05:17,2018-01-18 04:08:22
PR,Implicit DEFAULT LIMIT should be 8 bytes 64 bit signed integer,SQLite integer type is stored in 8 bytes Assuming as 4 bytes causes that valid in range value cannot be stored and existing value cannot be found Fixes 22594,,"kamipo,kamipo,matthewd,kamipo,kamipo",2017-02-14 20:19:33,2018-01-18 04:24:46
IS,windows rails test displays loads of lines regarding a reporter minitest after displaying the error it should show,in win7 C blah11 rails v Rails 5 1 4 C blah11 ruby v ruby 2 4 2p198 2017 09 14 revision 59899 x64 mingw32 C blah11 C rubytest hartl ch4 rails new blah11 nul C rubytest hartl ch4 cd blah11 C blah11 rails generate controller abc def nul C blah11 rails test Run options seed 57228 Running Finished in 0 581000s 1 7212 runs s 1 7212 assertions s 1 runs 1 assertions 0 failures 0 errors 0 skips C blah11 C blah11 wordpad exe test controllers abc controller test rb C blah11 type test controllers abc controller test rb require 'test helper' class AbcControllerTest ActionDispatch IntegrationTest test should get def do get abc def url assertttt response success end end Rails test now will show the error but after it shows the error it displays lots of junk errors C blah11 rails test Run options seed 59902 Running E Error AbcControllerTest test should get def NoMethodError undefined method assertttt response' for AbcControllerTest 0x00000000052d9c18 Did you mean assert response test controllers abc controller test rb 6 in block in class AbcControllerTest ' C Ruby24 x64 lib ruby gems 2 4 0 gems railties 5 1 4 lib rails test unit reporter rb 70 in method' undefined method test should get def' for class Minitest Result' NameError from C Ruby24 x64 lib ruby gems 2 4 0 gems railties 5 1 4 lib rails test unit reporter rb 70 in format rerun snippet' from C Ruby24 x64 lib ruby gems 2 4 0 gems railties 5 1 4 lib rails test unit reporter rb 23 in record' from C Ruby24 x64 lib ruby gems 2 4 0 gems minitest 5 11 1 lib minitest rb 786 in block in record' from C Ruby24 x64 lib ruby gems 2 4 0 gems minitest 5 11 1 lib minitest rb 785 in each' from C Ruby24 x64 lib ruby gems 2 4 0 gems minitest 5 11 1 lib minitest rb 785 in record' from C Ruby24 x64 lib ruby gems 2 4 0 gems minitest 5 11 1 lib minitest rb 334 in run one method' from C Ruby24 x64 lib ruby gems 2 4 0 gems minitest 5 11 1 lib minitest rb 321 in block 2 levels in run' from C Ruby24 x64 lib ruby gems 2 4 0 gems minitest 5 11 1 lib minitest rb 320 in each' from C Ruby24 x64 lib ruby gems 2 4 0 gems minitest 5 11 1 lib minitest rb 320 in block in run' from C Ruby24 x64 lib ruby gems 2 4 0 gems minitest 5 11 1 lib minitest rb 360 in on signal' from C Ruby24 x64 lib ruby gems 2 4 0 gems minitest 5 11 1 lib minitest rb 347 in with info handler' from C Ruby24 x64 lib ruby gems 2 4 0 gems minitest 5 11 1 lib minitest rb 319 in run' from C Ruby24 x64 lib ruby gems 2 4 0 gems railties 5 1 4 lib rails test unit line filtering rb 9 in run' from C Ruby24 x64 lib ruby gems 2 4 0 gems minitest 5 11 1 lib minitest rb 159 in block in run' from C Ruby24 x64 lib ruby gems 2 4 0 gems minitest 5 11 1 lib minitest rb 159 in map' from C Ruby24 x64 lib ruby gems 2 4 0 gems minitest 5 11 1 lib minitest rb 159 in run' from C Ruby24 x64 lib ruby gems 2 4 0 gems minitest 5 11 1 lib minitest rb 136 in run' from C Ruby24 x64 lib ruby gems 2 4 0 gems minitest 5 11 1 lib minitest rb 63 in block in autorun',,y-yagi,2018-01-18 07:56:04,2018-01-18 10:27:00
PR,Refactor migration to move migrations paths to connection,Rails has some support for multiple databases but it can be hard to handle migrations with those The easiest way to implement multiple databases is to contain migrations into their own folder db migrate for the primary db and db seconddb migrate for the second db Without this you would need to write code that allowed you to switch connections in migrations I can tell you from experience that is not a fun way to implement multiple databases This refactoring is a pre requisite for implementing other features related to parallel testing and improved handling for multiple databases The refactoring here moves the class methods from the Migrator class into it is own new class MigrationContext The goal was to move the migrations paths method off of the Migrator class and onto the connection This allows users to do the following in their database yml Migrations for the seconddb can now be store in the db second db migrate directory Migrations for the primary database are stored in db migrate The refactoring here drastically reduces the internal API for migrations since we do not need to pass migrations paths around to every single method Additionally this change does not require any Rails applications to make changes unless they want to use the new public API All of the class methods from the Migrator class were nodoc would except for the migrations paths and migrations path getter setters respectively cc,,"eileencodes,tenderlove,eileencodes",2018-01-17 19:31:29,2018-01-18 14:35:15
PR,Temporary workaround for Chrome start failed issue,See issuecomment 356362524 for more info,,"y-yagi,y-yagi,eileencodes",2018-01-13 05:29:12,2018-01-18 17:05:39
PR,Use selected migrations if block given,This appears to have slipped in as part of a2827ec The pope is infallible why is not,,"utilum,eileencodes,kamipo,eileencodes,eileencodes,utilum",2018-01-18 16:19:40,2018-01-18 18:10:46
PR,Allow false for config generators system tests,Allow false for config generators system tests I think using config generators system tests with false should guarantee the same behavior as with nil Mention config generators system tests in the Configuring Rails Applications guide,,bogdanvlviv,2018-01-17 23:23:48,2018-01-18 19:54:14
PR,Added a note about bootsnap in the Rails 5 2 upgrade guide ci skip,r,,prathamesh-sonpatki,2017-12-27 16:22:42,2018-01-18 20:02:03
PR,Support for connection pooling on mem cache store,This will keep Memcached connection limit under control for large scale applications,,"guilleiguaran,guilleiguaran,matthewd,matthewd,matthewd,matthewd,matthewd,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,mperham,guilleiguaran,mperham,rafaelfranca,matthewd,guilleiguaran,rafaelfranca,rafaelfranca,fatkodima,rafaelfranca,fatkodima,rafaelfranca,rafaelfranca,rafaelfranca",2017-12-13 01:37:29,2018-01-18 20:15:58
PR,Support hash as first argument in assert difference,Summary assert difference already supports multiple expressions but only when the expected difference is the same for all of them assert difference 'Article count' 'Post count' 2 This pull request allows to specify multiple numeric differences in the same assertion which is also very convenient to avoid deep block nesting Other Information Implementation I also removed the each with index which seemed redundant with the usage of the zip method,,"eugeneius,sgrif,dhh,dhh,eugeneius,eugeneius",2017-12-30 21:32:07,2018-01-18 20:20:35
PR,Add locale selector to email preview,Summary This Pull Request make it possible to select location on ActionMailer Preview Just like below actionmailer preview locale selection This is a rework of 19923 was almost done but had not been merged and now it gets conflict against master What I did Add set locale to detect suitable locale 19923 is author is work Fix conflicts Append query parameter locale locale name if locale were changed Update JavaScript function to refresh format and locale of mail preview Add test case for the feature,,y-yagi,2017-12-30 12:23:57,2018-01-18 20:22:10
PR,Added a test around NO AUTO VALUE ON ZERO,Added a test around NO AUTO VALUE ON ZERO The mysql NO AUTO VALUE ON ZERO mode should be disabled when inserting fixtures in bulk this PR adds a test to make sure we do not remove it by mistake If we live this mode enabled a statement like this would not work and a Duplicate entry '0' for key 'PRIMARY' error will be raised That is because DEFAULT on auto increment will return 0,,"Edouard-chin,sgrif,sgrif,kamipo,Edouard-chin,rafaelfranca,Edouard-chin",2018-01-09 23:05:56,2018-01-18 20:24:30
PR,Allow to run migrations in check mode dry run,I have found myself a lot in situations where it could be great to have ability to run migrations to report what changes they would have made rather than making them Of course this can be done by running rake db migrate status to find targeted migrations inspect their code for changes and mentally assemble those pieces in one flow But this is tedious slightly time consuming and error prone even for 3 migrations And can be automated DRY RUN option was added to db migrate db rollback db migrate up and db migrate down For db migrate up and db migrate down it is not very much needed but was added for consistency and to avoid possible surprises The output in check mode looks like this If this feature will be ok for core members I will finish this PR by adding tests documentation etc Feedback would be greatly appreciated,,"fatkodima,matthewd,fatkodima,rafaelfranca",2018-01-03 15:22:15,2018-01-18 20:44:26
PR,Testing actioncable against websocket driver 0 7 0,This PR is just to cause a CI run but if people want to use it as a starting point for discussion that is fine too The changelog for websocket driver 0 7 0 does not mention any breaking changes,,"jaredbeck,rafaelfranca,jaredbeck,jaredbeck,dhh,dhh,jaredbeck",2017-09-25 15:39:03,2018-01-18 21:32:27
IS,Railties Generator produces error on rails engine 5 1 x,Steps to reproduce Notice The example that I am describing below is not producing the error itself but consider it as the general idea Now think of the following stack A rails engine named e g core which contains all logic Models controllers e t c all live there A rails application which is almost empty it has no written logic It is used as a container in order to load the core engine Even its Gemfile is almost empty it just defines the core gem Now inside the main rails application we want to create a custom configuration yml file which will holds some application wide settings that will be shared amongst the core engine gem and any other engines gems that will be added in the future So inside our testapp config application rb file we define the custom configuration by writing That is all So now let is scaffold a new User model inside the core engine by typing to the terminal bin rails g model User Expected behavior On rails 5 0 x everything is fine the generator creates the expected files migration model test fixture Actual behavior On rails 5 1 x we are getting the following error ruby 2 4 0 gems railties 5 1 4 lib rails railtie configuration rb 95 in 'method missing' undefined method 'custom conf' for Rails Application Configuration 0x000000021139e As we can see from the stack trace printed on the console when calling the generator the core engine will get initialized via the core test dummy rails application and as a result the code of the engine will be executed without prior some parts of our code be defined e g the custom configuration This change introduced in rails 5 1 So my question is if there is a configuration in order to overlap this error I noticed the constant APP PATH File expand path ' test dummy config application' FILE which is defined inside core bin rails file If I change it to point the main rails application in an external folder the generator works properly But is this the right practice or other unexpected errors may occur Any thoughts System configuration Rails version 5 1 4 Ruby version 2 4 0,,rafaelfranca,2018-01-18 21:42:42,2018-01-18 21:58:12
PR,Fix minor typo ci skip,autosave associated records for association is also generated so we could say 7 here but seems like that one is not worth mentioning in this context Summary Provide a general description of the code changes in your pull request were there any bugs you had fixed If so mention them If these bugs have open GitHub issues be sure to tag them here as well to keep the conversation linked together Other Information If there is anything else that is important and relevant to your pull request mention that information here This could include benchmarks or other information If you are updating any of the CHANGELOG files or are asked to update the CHANGELOG files by reviewers please add the CHANGELOG entry at the top of the file Finally if your pull request affects documentation or any non code changes guidelines for those changes are available here contributing to the rails documentation Thanks for contributing to Rails,,kamipo,2018-01-18 22:23:49,2018-01-18 23:11:32
IS,resources typo in code snippet in the getting started guide to rails,Steps to reproduce The issue is a typo a missing s in the highlighted section below which is found in section 5 2 at this link screen shot 2018 01 18 at 5 05 55 pm Expected behavior The entire code snippet is supposed to lead to the error mentioned in the next steps Instead Actual behavior This error is found No route matches POST articles new This error is further documented here System configuration Rails version Rails 5 1 4 Ruby version ruby 2 4 1p111 2017 03 22 revision 58053 x86 64 darwin17,,y-yagi,2018-01-18 11:43:26,2018-01-18 23:17:44
IS,Rails Guides link to ebook mobi version is 404,The link on guides source index html erb that points to the Kindle version of Rails Guides is 404 After reading the Rails Guides contribution docs I was able to successfully re generate the Kindle docs using bundle install cd guides setupkindlerb install kindlegen from rake guides generate kindle So the rake tasks and source generation seem to be fine What I can tell from generating the Kindle file locally for Edge Rails is that the mobi file is correctly available at edgeguides org ruby on rails guides 562dd04 mobi but the link that specifically references the 5 1 4 guide ruby on rails guides v5 1 4 mobi does not exist,,y-yagi,2018-01-14 20:52:19,2018-01-18 23:23:01
PR,Use separate folders in Rails root call,Summary Since we are using Rails root here we should take full advantage of it and use separate folders This issue is flagged as a rubocop issue so it will save people from having to deal with 1 rubocop issue Other Information None,,georgeclaghorn,2018-01-19 04:23:54,2018-01-19 04:28:32
PR,Make bin yarn use warn,Summary Using warn method i warn will allow people to disable the error output if desired,,georgeclaghorn,2018-01-19 04:53:10,2018-01-19 05:00:32
PR,Deprecate passing a connection to Migration check pending,Propagating a connection was to do connection table exists schema migrations table name Simply use SchemaMigration table exists instead,,"kamipo,kamipo,eugeneius,pixeltrix,matthewd,kamipo,rafaelfranca,kamipo,matthewd,kamipo,rafaelfranca,kamipo",2017-03-05 12:52:06,2018-01-19 06:19:41
PR,Enable autocorrect for Lint EndAlignment cop,Summary This PR changes rubocop yml Regarding the code using if else end I think the coding style that Rails expects is as follows This PR adds a setting to rubocop yml to make an offense warning and autocorrect as expected by the coding style And this change also fixes case when end together Also this PR itself is an example that arranges the layout using rubocop a Other Information Autocorrect of Lint EndAlignment cop is false by default L1443 This PR changes this value to true Also this PR has changed it together as it is necessary to enable Layout ElseAlignment cop to make this behavior,,"koic,matthewd,rafaelfranca,koic,matthewd",2018-01-18 08:20:18,2018-01-19 07:19:21
IS,Puma Rails locks up when performing an HTTP request to self,Opening this both here and in the Puma issues list I have previously posted an issue at Puma related to this but I now have a project that will reproduce the issue 100 locally Source project that reproduces this is here Basically I use Typhoeus in a controller to perform an HTTP GET to another controller This causes a hard lock that you can not ctrl c out of I changed the workers threads to 1 only to make this issue easier to reproduce The workers threads can be any value and that only lowers the likelihood of the issue happening It still happens even with 20 workers and 20 threads We first ran across it because we use a gem that pulls some API information out of the same app we are trying to access This is because we use an SSO solution across all of our apps NOTE This does not happen with Passenger or other platforms This leads me to think it is a Puma issue over a Rails issue but I have not investigated any further This affects ALL recent Rails versions that I have tried along with various Ruby versions etc The test project is Rails 5 1 4 and Puma 3 10 0,,guilleiguaran,2017-10-09 16:15:04,2018-01-19 07:31:30
IS,Exception as json returns a string instead of Hash,After the as json of Exception returns a String instead of Hash For consistency as json should return a Hash and to json should return a String This breaks my application in Rails 5 and I am not sure what is the reason behind this change,,"meinac,meinac",2017-10-12 08:56:59,2018-01-19 07:31:31
IS,Unable to autoload constant,Steps to reproduce I am switching old systems created with php to Rails I want to use the table iservicename user' of the previous system in the User model There is no problem with the console or controller but when I try to create the rspec test I get the following error message I have explicitly set the table name but it does not load properly Expected behavior No error message should be displayed Actual behavior LoadError raises System configuration Rails version 5 1 4 Ruby version 2 5 0,,,2018-01-19 08:48:54,2018-01-19 09:58:55
IS,ruby on rails guide 5 1 2 kindle download link is broken,,,"y-yagi,fxn",2017-07-20 07:12:01,2018-01-19 12:19:06
IS,size method with counter cache collection is still broken in rails 5 0 6,Looks like a size method of a Post model which has many Comments using a counter cache is still broken in Rails 5 0 6 I follow up this issue to 26940 but im still getting the same exception Steps to reproduce Here is test cases reproducing the exception following the template Expected behavior post size should return 0 Actual behavior TypeError nil can not be coerced into Integer exception is thrown System configuration Rails version 5 0 6 Ruby version tested on both 2 4 1 and 2 5 0,,eugeneius,2018-01-18 14:33:51,2018-01-19 12:21:51
PR,Inject connection in Relation,Summary Allow injecting an alternate connection in Relation and ensure that calls to methods on the associated ActiveRecord class use the injected connection too r,,"lugray,lugray,sgrif,lugray,sgrif,sgrif,lugray,lugray,matthewd,sgrif,lugray,lugray,kamipo,kamipo,lugray,lugray,matthewd",2017-07-26 19:50:37,2018-01-19 14:43:49
IS,counter cache does not change when change parent if parent and child have same class,Steps to reproduce Expected behavior after updating changing boss id from boss id to boss 2 id boss should have subordinates count equal to 0 and boss 2 should have subordinates count equal to 1 Actual behavior subordinates count does not change for boss and boss 2 System configuration Rails version 5 1 4 same behaviour on 5 0 6 can not start tests on master because bundle install failed Ruby version 2 3 1,,"htanata,kamipo",2017-11-20 14:30:12,2018-01-20 02:55:51
PR,Fix typos and improve text helper documentation regarding sanitization,Summary Fixes doc typos in actionpack lib action dispatch routing mapper rb Fixes an example given for the highlight helper with sanitize false Improves the introductory paragraph about sanitization in text helper rb Other Information With sanitize false the helper leaves the input HTML alone but the documentation was incorrectly showing it as sanitized for the highlight helper The introductory sentence about sanitization said Most text helpers by default sanitize the given content However only 2 of the 11 helpers actually sanitize their given inputs so I clarified it by adding that generate HTML output since that was the original reasoning when sanitization was added in 84d387bc0f3f3f6641b08d0ce40e924f09105c19 I'm open to any suggestions for clarifying the sanitization description further,,,2018-01-20 02:58:50,2018-01-20 03:58:03
PR,Use dup'ed options hash,Otherwise at least using JRuby the replacements in convert database option for jruby wo not work Thus a call to bundle exec rails app update fails Simply replacing those replace statements does not seem to work either since the options hash seems to be frozen too,,"y-yagi,matthewd,y-yagi,matthewd,y-yagi,y-yagi",2018-01-05 15:21:18,2018-01-20 09:53:10
PR,Polymorphic URL should default to HTTPS if force ssl true,,,"eileencodes,eileencodes,matthewd",2018-01-19 09:19:34,2018-01-20 15:19:14
PR,Make bin yarn use warn,Summary Using warn method i warn will give people the option to disable the error output if desired,,y-yagi,2018-01-19 05:09:19,2018-01-20 23:19:04
PR,Postgresql enum type support,Created by mistake Should have been created against my fork,,,2018-01-21 23:10:25,2018-01-21 23:10:31
IS,Rails 5 2 0 beta2 sockjs error Refused to connect to ' 3035 sockjs node info,Steps to reproduce Using Ruby 2 5 0 and Rails 5 2 0 beta2 generate a new Rails app via rails new myapp webpack react Then do bin rails g controller home add an index method in that controller root 'home index' in config routes rb javascript pack tag 'application' in application html erb bin rails s bin webpack dev server in sep tabs Then go to localhost 3000 and see the following error in the js console sockjs In the meantime changing inline true to inline false in config webpacker yml got rid of the error But not sure if that is just a hack System configuration Ruby version 2 5 0 Rails version 5 2 0 beta2 Thank you for any help,,y-yagi,2018-01-21 20:09:01,2018-01-21 23:30:29
PR,PERF Recover changes applied performance,30985 caused object save performance regression since calling changes in changes applied is very slow We do not need to call the expensive method in changes applied as long as attributes is tracked by mutation tracker Before cc,,"kamipo,rafaelfranca",2018-01-13 02:11:16,2018-01-22 01:46:36
PR,Use singular define attribute method,define attribute methods splats the arguments then calls out to define attribute method for each When defining a singule attribute using the singular version of the method saves us an array and an extra method call,,composerinteralia,2018-01-22 03:27:51,2018-01-22 03:50:40
PR,bin yarn Pass through arguments with spaces,Summary Previously the bin yarn wrapper would unquote arguments to yarn like this yarn run add copyright c 2017 2018 MyCompany That results in an ARGV of 'run' 'add copyright' ' c 2017 2018 MyCompany' in the yarn wrapper but a ARGV in the yarn executable of 'run' 'add copyright' ' c ' '2017 ' '2018' MyCompany' Other Information N A,,,2018-01-21 17:29:22,2018-01-22 04:04:22
PR,Do not update counter cache when through record was not destroyed,When removing a record from a has many through association the counter cache was being updated even if the through record halted the callback chain and prevented itself from being destroyed would also fix this problem but in a different way records which were not destroyed would no longer be returned from destroy all This approach is more appropriate to backport however as it does not change any public APIs and I think having test coverage for this case is useful,,eugeneius,2018-01-14 22:01:47,2018-01-22 07:12:25
PR,Ignores a default subclass when becomes Parent,Summary Fixes issue described in 30399 A default value on the inheritance column prevented child becomes Parent to return an instance of Parent as expected instead it returns an instance of the default subclass The change was introduced by 17169 and it was meant to affect initialization alone Where Parent new is expected to return an instance of the default subclass,,kamipo,2017-09-06 17:39:49,2018-01-22 16:49:41
IS,STI field with default makes it impossible to get an instance of the parent,Steps to reproduce 1 Add a default to the type field ChildA 2 Parent new class returns ChildA or ChildB new becomes Parent class returns ChildA Test Case I wrote and updated test case with this goals in mind Keep the initialization functionality intact as specified in 17169 Ensure becomes behavior is predictable for both children and parent classes Keep becomes functionality untouched Expected behavior When creating and instance of the parent it is class should remain untouched by the default value on the DB When using becomes Parent it is class should be Parent Actual behavior When creating an instance of the parent it is class is set by the default value in the DB When using becomes Parent it is class is set by the default value on the DB The class of the System configuration Rails version 5 x Ruby version 2 3 4,,"lugray,kamipo",2017-08-24 17:53:18,2018-01-22 17:03:09
IS,Issue with HasOneThroughAssociation build record missing through association method accessor,Steps to reproduce With the latest Rails 5 2 and 5 1 too we can not manually build HasOneThroughAssociation records with HasOneThroughAssociation build record method When called the method raises see sample app below Actual behavior The method raises a NameError as described above System configuration Rails version 5 2 0 beta Ruby version 2 4 1,,,2018-01-22 16:00:50,2018-01-22 20:26:11
PR,Support for PostgreSQL foreign tables,The change is pretty minimal the query used in table exists tables has been expanded to include foreign tables in the kinds of relations it includes in its search Related,,"fatkodima,kamipo,kamipo,fatkodima,kamipo,kaspth,kamipo,fatkodima,matthewd,kamipo,fatkodima,fatkodima",2017-12-23 00:49:45,2018-01-22 20:44:17
PR,Update guide text not to contradict image,The bottom line in the image of ActionController UnknownFormat is not truncated Now the text does not say it is ci skip,,utilum,2018-01-22 21:13:57,2018-01-22 21:24:49
IS,In ActiveJob how to rescue from in a base class,This works catching a deserialization error in my ActiveJob My question is how do i do this correctly How can i get the rescue from ActiveJob DeserializationError to be handled generically for all my AJs before other exceptions are handled,,rafaelfranca,2018-01-22 21:41:51,2018-01-22 21:56:20
PR,remove text repetition,Sorry my carelessness in 4819b2a0ec84511a8fe87213b1e1befa21584a7c ci skip,,utilum,2018-01-22 22:10:56,2018-01-22 22:13:21
IS,Rollback transactions without exceptions Deprecate ActiveRecord Transaction,I have two possibly controversial issues with transaction and I wanted to gather some feedback before submitting patches Deprecate ActiveRecord Transaction I'm not entirely happy that you can call transaction directly on a model but it happens to affect all other models sharing the same database connection within the transaction block I just tried to call User connection transaction using Postgres and it seems to work exactly like I expect it to This way would make the actual behavior a lot clearer in my not so humble opinion To repeat it in code What do you think about this,,rafaelfranca,2018-01-22 10:15:23,2018-01-22 22:52:08
PR,Add support for connection pooling on RedisCacheStore,This is a continuation of There are no abilities to easy override passing connection pool instead of regular single connection as a node for Redis Distributed Redis class hardcoded here L38 so I decided to override Redis Distributed add node,,"fatkodima,rafaelfranca,fatkodima,fatkodima,rafaelfranca,fatkodima,rafaelfranca,georgeclaghorn,fatkodima,georgeclaghorn,fatkodima",2017-12-14 16:29:26,2018-01-22 22:54:07
PR,Improve fault tolerance for redis cache store,This PR improves a bit fault tolerance for RedisCacheStore and adds missing tests for already provided Lets see what happens when cache server is down increment decrement Before,,"fatkodima,fatkodima",2017-12-16 22:44:48,2018-01-22 23:34:46
IS,Active record Add order option to find in batches and find each,Add order option to find in batches and find each Currently if primary key does not exist find in batches and find each will result in an error Since there may be cases where primary key does not exist when performing batch processing I think that it can be solved by adding an order option,,georgeclaghorn,2018-01-22 08:58:37,2018-01-22 23:36:12
PR,Ensure that autoloaded constants is unique,Motivation It has been shown that autoloaded constants are not ensuring that constants are only loaded once in the situation where a valid constant is then edited to be exceptional then said exception is corrected In this scenario we are seeing the constant being added in an infinite loop I tested switching the array to a set and this resoloved the issue Relate Issue 31694 Changes Change autoloaded constant from array to set Change methods called against this set from array methods to equivalent array methods,,,2018-01-19 02:59:20,2018-01-23 00:22:23
IS,headers argument to controller test case process is ignored,Steps to reproduce Do as the guides describe in a controller test Then check for request referer in the controller what to include in your functional tests what to include in your functional tests Expected behavior request referer returns Actual behavior request referer returns nil System configuration Rails version 5 0 6 Ruby version 2 3 5,,y-yagi,2017-12-15 10:53:15,2018-01-23 09:06:34
PR,Fix casing in documentation task descriptions and error messages,I have fixed casing for Rails Bundler and Thor in documentation This is my reasoning Rails as in the framework should be capitalized rails as in the CLI tool should be uncapitalized Bundler should be capitalized since it is a gem name Thor should be capitalized since it is a gem name Let me know what you think,,"shime,shime",2018-01-02 12:21:55,2018-01-23 09:08:17
PR,Fix locale selector JS bug in ActionMailer Preview,Summary Fix bug arise from the Pull Request locale select only appears in I18n available locales count 1 So if users have only one locale this code will occur error mdash pullrequestreview 90009273 What I did In order to referring undefined variable check if select id locale exists before refreshing ActionMailer Preview body actionmailer preview locale selection bug fix yagi Please review this,,"y-yagi,y-yagi,y-yagi,y-yagi,y-yagi",2018-01-20 03:28:38,2018-01-23 10:05:10
IS,Ability to add attributes to the singleton class,Our use case is that we have a model without a table to use with different searches so instead of drawing endless forms in HTML we can use simple form or similar to quickly draw pretty forms just having a Hash Our current set up looks like this So each instance of Search could have custom attributes which did not work as the instance is not aware of attribute changes Was wondering if this concept has a right to be live and if someone from Rails AR developers could help me with this,,y-yagi,2018-01-23 06:33:27,2018-01-23 10:17:59
IS,Email attachment for document files using rails action mailer,I am using Rails action mailer I need to send a email with document doc docx txt pdf as attachment Expected behavior When I am attaching txt and pdf files the content in that file are viewing properly But when I am trying to attach doc or docx files the content in that files are not displaying it is converting into encoding format Why this behaviour Rails version 5 1 4 Ruby version 2 2 6 def send email email file email attachments wouldocument docx' File read file path mail from to aa gmail com subject Document attachment end attachments wouldocument docx' mime type 'application zip' content File read file path attachments wouldocument docx' 'Content Type' 'text html' content File read file path attachments wouldocument docx' 'Content Type' 'text html' content File read file path 'Content Transfer Encoding' '7bit' Tried those things also separately but nothing worked out Is there any way to attach document files in email using rails action mailer Please guide me Thanks in advance,,georgeclaghorn,2018-01-23 12:01:43,2018-01-23 12:45:31
IS,ActiveRecord Enum defined enums uses string as hash key,Steps to reproduce in the documentation there is always a symbol as the name of an enum System configuration Rails version 4 2 8 Ruby version 2 3 3p222,,rafaelfranca,2018-01-23 19:33:59,2018-01-23 20:19:20
PR,Restrict selenium webdriver to 3 6,We scoped capybara to 2 15 but we do not have any scope on the selenium webdriver I have spend few hours trying to figure out why system tests are not working on the chrome but they are working the FF At the end I found out that any version of selenium webdriver larger then 3 6 raises this error with chrome chrome version is 63 0 3239 132 img width 790 alt screen shot 2018 01 23 at 09 16 35 src Here is dummy repo that causes this problem on my machine Also maybe we could upgrade capybara dependency to the latest 2 17 but I suppose there is a reason why capybara is scoped to 2 15 so did not want to touch it,,"dixpac,rafaelfranca,dixpac",2018-01-23 08:58:08,2018-01-23 20:53:11
PR,Fix actionmailer lambda default,PR 29270 changed the number of arguments that gets passed to Procs defined in ActionMail Base default thus introducing a breaking change This change impacted Devise plataformatec devise 4604 With this PR Procs can have an arity of 0 or 1 I added a deprecation for Procs with arity of 1 because it does not really make sense to keep this around I brought it back for the sake of deprecating it before it is removed This diff df5a757beffcee1e175f7a82362a1800L891 is where the breaking change was introduced instance eval passes self to the block but instance exec does not In Rails 5 1 this was the correct way but it now crashes in 5 1 This breaking change was not caught by the test suite because the Proc were not defined with the lambda syntax I added a test case for that as well Thoughts,,kaspth,2017-08-24 05:38:06,2018-01-23 21:11:19
IS,ActiveSupport MemoryStore cannot handle ActiveRecord Attributes defaults with proc,Steps to reproduce Actual behavior It blows up with TypeError no dump data is defined for class Proc System configuration Rails version 5 1 4 also on 5 1 stable branch Ruby version 2 3 5 2 4 2,,"rafaelfranca,sgrif",2017-11-24 15:12:01,2018-01-23 21:14:09
IS,Postgresql query with includes order limit fails with PG InvalidColumnReference,Postgresql expects ORDER BY expressions to appear in SELECT when using DISTINCT Steps to reproduce Might need to change ActiveRecord Base establish connection parameters,,sgrif,2018-01-23 18:53:38,2018-01-23 21:17:56
PR,Allow for custom handling of exceptions that are discarded,Allow a job that is discarded to be handled by a custom handler The retry on already provides the ability for a custom handler and think discard on should provide the same for consistency,,,2017-09-16 19:16:49,2018-01-23 22:07:25
PR,Add PostgreSQL enum support,Summary This adds support for PostgreSQL enum types in migrations and in the ruby schema Other Information Adds 3 methods for migrations create enum ebook format pdf epub This would generate,,rafaelfranca,2018-01-23 04:32:26,2018-01-23 22:37:19
PR,Clarification for noobs,About my contributions to guides You see I am a new guy to all this web design stuff I just got some basic knowledge of HTML and started to learn Ruby on Rails So not only I had to search the web for what that SQL statement here creating active record models actually means but I also found out that this is not SQL statement but MySQL statement which has a slightly different syntax So I made some clarifications for that Also I think that a link to a viable MySQL tutorial documentation for people who do not have prior knowledge of Relational Data Bases would be a good thing but I do not know what should I better pick So I'm waiting for suggestions in comments And another problem for me as a noob was Contributing to the Rails Documentation contributing to the rails documentation itself It says to open a pull request but opening a request is itself requires to make a change to source code and make a personal fork for a project That was somewhat confusing as I'm new to GitHub too and I did not know that at first I should edit the source code for guides and after that fork would be created automatically,,"eileencodes,eileencodes,eileencodes,eileencodes,rafaelfranca,kamipo,rafaelfranca,rafaelfranca,rafaelfranca",2018-01-14 07:36:12,2018-01-23 22:39:41
IS,Wrong typecast when plucking boolean value from joined table in MySQL2,Steps to reproduce Expected behavior When plucking a boolean value from a joined table it should be returned as a list of booleans This is the behaviour pluck shows on an unjoined table Also when reproducing the steps with another adapter like postgresql the values are properly returned as booleans Actual behavior It is returned as a list of integers System configuration Rails version master so I guess 5 1 4 but was initially found on 4 2 7 1 Ruby version 2 4 2,,,2017-10-10 04:57:59,2018-01-24 00:27:45
PR,Updated link to use HTTPS,Summary Updated a link to use https to avoid a redirect Other Information ci skip,,"kamipo,kamipo",2018-01-24 00:45:01,2018-01-24 01:04:57
IS,where not does not include records with nil,It appears that where not does not query nil values Here is what I observed Using activerecord 5 1 4,,georgeclaghorn,2018-01-24 01:56:04,2018-01-24 02:21:39
IS,Rails Installer link broken on getting started section of ruby on rails website,,,y-yagi,2018-01-23 14:41:57,2018-01-24 10:45:44
PR,Build a multi statement query when inserting fixtures,Build a multi statement query when inserting fixtures The insert fixtures method can be optimized by making a single multi statement query for all fixtures having the same connection instead of doing a single query per table The previous code was bulk inserting fixtures for a single table making X query for X fixture files This patch builds a single multi statement query for every tables Given a set of 3 fixtures authors dogs computers insert fixtures is now deprecated insert fixtures set is the new way to go with performance improvement My tests were done with an app having more than 700 fixtures the time it takes to insert all of them was around 15s Using a single multi statement query it took on average of 8 seconds In order for a multi statement to be executed mysql needs to be connected with the MULTI STATEMENTS flag which is done before inserting the fixtures by reconnecting to da the database with the flag declared Reconnecting to the database creates some caveats 1 We loose all open transactions Inside the original code when inserting fixtures a transaction is open Multple delete statements are executed L566 and finally the fixtures are inserted The problem with this patch is that we need to open the transaction only after we reconnect to the DB otherwise reconnecting drops the open transaction which does not commit all delete statements and inserting fixtures does not work since we duplicated them Primary key duplicate exception In order to fix this problem the transaction is now open directly inside the insert fixtures method right after we reconnect to the db As an effect since the transaction is open inside the insert fixtures method the DELETE statements need to be executed here since the transaction is open later 2 The same problem happens for the disable referential integrity since we reconnect the FOREIGN KEY CHECKS is reset to the original value Same solution as 1 the disable referential integrity can be called after we reconnect to the transaction 3 When the multi statement query is executed no other queries can be performed until we paginate over the set of results otherwise mysql throws a Commands out of sync Ref Iterating over the set of results until mysql client next result is false Ref multiple result sets Removed the active record sql Fixture delete notification the delete statements are now inside the INSERT is one On mysql the max allowed packet is looked up 1 Before executing the multi statements query we check the packet length of each statements if the packet is bigger than the max allowed packet config an ActiveRecordError is raised 2 Otherwise we concatenate the current sql statement into the previous and so on until the packet is max allowed packet,,"Edouard-chin,matthewd,matthewd,matthewd,matthewd,matthewd,matthewd,matthewd,matthewd,matthewd,Edouard-chin,matthewd,matthewd,matthewd,matthewd,matthewd,sgrif,matthewd,Edouard-chin,Edouard-chin,Edouard-chin,Edouard-chin,Edouard-chin,Edouard-chin,sgrif,Edouard-chin,Edouard-chin,rafaelfranca,matthewd,matthewd,sgrif,sgrif,Edouard-chin,matthewd,matthewd,matthewd,matthewd,matthewd,matthewd,Edouard-chin,Edouard-chin,Edouard-chin,kamipo,sgrif,kamipo,Edouard-chin,matthewd,matthewd,Edouard-chin,Edouard-chin,matthewd,matthewd,kamipo,Edouard-chin,Edouard-chin,Edouard-chin,Edouard-chin,matthewd,Edouard-chin,Edouard-chin,sgrif,sgrif,matthewd,Edouard-chin,sgrif,Edouard-chin,matthewd,sgrif,Edouard-chin,Edouard-chin,matthewd,Edouard-chin,Edouard-chin,matthewd,Edouard-chin",2017-12-12 22:07:48,2018-01-24 11:17:16
PR,Postgresql bulk change table should flatten procs array,Summary An untested path introduced in led to a crash when a comment was added within an alter table block The array of processes must be flattened before each can be called,,"matthewd,matthewd,matthewd",2018-01-23 18:12:28,2018-01-24 11:23:02
PR,Added test cases for active job configured job rb,Summary activejob lib active job configured job rb does not have any test cases so I just added two tests for perform now and perform later Thank you,,kamipo,2018-01-24 11:03:52,2018-01-24 11:27:14
IS,PG ConnectionBad on activejob resque adapter after upgrading to rails 5 2 0 beta2,Steps to reproduce Expected behavior Tell us what should happen All jobs fails with PG ConnectionBad exception Actual behavior Job fails with exception PG ConnectionBad connection is closed System configuration Rails version Rails 5 2 0 beta2 Ruby version ruby 2 4 3p205 Pg gem version pg 0 21 0 Resque config 'config resque rb' require redis Resque before fork Proc new do job ActiveRecord Base connection disconnect end Resque after fork Proc new do job ActiveRecord Base establish connection end,,"matthewd,matthewd",2018-01-23 02:24:31,2018-01-24 14:38:57
PR,fix grammar,change past tense to present tense,,georgeclaghorn,2018-01-24 07:04:29,2018-01-24 18:58:26
IS,Camelize returning wrong string for UPPERCASE STRING,Steps to reproduce I think this is a bug but I'm not 100 sure if it is I was certainly surprised by this behavior Expected behavior I would expect the result to be something similar to this original string function expected string TEST CASE HERE camelize TestCaseHere TEST CASE HERE camelize lower testCaseHere Actual behavior System configuration Rails version 5 1 4 Ruby version 2 4 1,,"rafaelfranca,rafaelfranca",2018-01-24 21:29:30,2018-01-24 21:46:08
PR,Remove code duplication for ActionController Metal action,,,"fatkodima,fatkodima",2018-01-05 16:26:47,2018-01-24 21:57:35
IS,Turn off Active Record is verbose query logs when using the console,When interacting with Active Record in the console the verbose query log setting adds a lot of noise This feature should be turned off when using the console cc,,dhh,2018-01-12 14:32:25,2018-01-24 22:04:32
PR,Only enable verbose query logs in Rails server,Should fix 31688 unless someone can point me to a better way to achieve this goal Essentially David is point was that verbose query logging when enabled in Rails console tends to make things very noisy That is especially true if we display absolute paths to callsites which sadly is still the case when we detect a caller that is not part of the Rails application think gems Related to 26815 I have not tested this locally yet so do not merge until the build has run and we can test it out a bit more,,"palkan,rafaelfranca,eugeneius,sgrif,eugeneius,rafaelfranca,palkan,rafaelfranca",2018-01-12 14:56:02,2018-01-24 22:04:32
PR,Avoid passing unnecessary arguments to relation,Most of the time the table and predicate builder passed to Relation new are exactly the arel table and predicate builder of the given klass This uses klass arel table and klass predicate builder as the defaults so we do not have to pass them in most cases This does change the signaure of both Relation and AssocationRelation Are we ok with that,,"composerinteralia,rafaelfranca,composerinteralia,composerinteralia,composerinteralia,rafaelfranca",2018-01-24 19:44:25,2018-01-24 23:04:35
IS,ActiveRecord persisted returns true after rollback when using duped record,System configuration Rails version 5 0 6 Ruby version 2 4 2,,htanata,2018-01-10 19:40:07,2018-01-25 03:43:59
PR,Clear the transaction state when AR object is duped,Fixes 31670,,"kamipo,kamipo,kamipo,kamipo",2018-01-20 10:41:52,2018-01-25 03:43:59
IS,Blob is metadata column casted as json,Steps to reproduce Are there any plans to set the blob is metadata column type as json Somehow I miss the possibility to directly query the attachments for specific filter data The steps to reproduce the problem are shown on the following lines Expected behavior Having a json data type we could directly query the blob is custom metadata without having to initialize the object and loop them to classify It would give the freedom of saving custom data enum like information for example whenever an attachment is expired or it is banned by the system or any special category For PostgreSQL users it would look something like System configuration Rails version 5 2 0 beta2 Ruby version 2 4 1p111,,georgeclaghorn,2018-01-24 08:44:39,2018-01-25 04:17:35
IS,PostgreSQL with DISTINCT ORDER raises PG InvalidColumnReference,Steps to reproduce System configuration Rails version master Ruby version 2 4 3 Possible broken by,,kamipo,2018-01-24 16:28:19,2018-01-25 05:23:32
PR,Fix typo in API document FormHelper fields,The syntax highlight of FormHelper fields was broken as the following URL so I fixed it This commit fixes typo and adjusts output example to other example is format method i fields,,kaspth,2018-01-25 08:07:05,2018-01-25 08:30:48
PR,fix grammar,replace a event with an event,,simi,2018-01-25 12:45:29,2018-01-25 12:59:34
PR,WIP Add comparison methods for where ci skip,I wanted to check if this is something we want to do before getting too far into it but this would add 4 methods to chain onto where Thoughts,,"composerinteralia,rafaelfranca",2018-01-25 16:35:24,2018-01-25 16:40:41
IS,Rails autoloading cannot load constant when folder name is same as class name,Steps to reproduce 1 Inside lib folder make a folder test 2 Inside test folder make a class test rb that includes a rb module 3 Inside test folder make a module a rb Expected behavior It should autoload since the lib directory and its subdirectories are in auto load paths correctly Actual behavior Error load missing constant' Unable to autoload constant Test A This happens because class name test is same as folder name test When I changed folder name from test to something else it worked fine System configuration Rails version Rails 4 2 8 Ruby version ruby 2 3 4p301 2017 03 30 revision 58214 x86 64 darwin16,,rafaelfranca,2018-01-25 18:47:52,2018-01-25 19:02:59
PR,Add support for PostgreSQL nulls order to add index,Use case When using ORDER BY column in PostgreSQL NULL values will come last When using ORDER BY column DESC NULL s will come first But this is often not useful e g I want to show all products sorted by price in descending order but those without price to show last I can tell where I want my NULLs by saying,,"fatkodima,rafaelfranca,fatkodima,rafaelfranca,matthewd,fatkodima,matthewd",2018-01-25 22:29:54,2018-01-25 22:57:14
PR,Clarify autoload paths and eager load in guides per current usage,Update the guide on autoloading which is out of date with current practice and code to include autoload paths eager load paths and eager load in production,,kirs,2018-01-21 21:24:16,2018-01-25 23:38:47
PR,Update note on MySQL index order support ci skip,Followup to MySQL supports descending indexes from 8 0 1 onwards r,,eugeneius,2018-01-26 00:49:47,2018-01-26 01:01:51
PR,Lock Minitest 5 11 1,Summary To workaround undefined method error ' for reported at By taking a look at CI history and compare Minitest version The last successful one uses 5 11 1 and the first failed one uses 5 11 2 which has been released on 1 25 Last successful one First failed one This pull request locks Minitest version to make CI green in the meantime We will need to investigate and address later,,"yahonda,yahonda,kamipo,composerinteralia,zenspider,yahonda",2018-01-26 03:05:50,2018-01-26 03:33:03
PR,Bring back ability to insert zero value on primary key for fixtures,Since 29504 mysql2 adapter lost ability to insert zero value on primary key due to enforce NO AUTO VALUE ON ZERO disabled That is for using DEFAULT on auto increment column but we can use NULL instead in that case,,kamipo,2018-01-25 22:00:07,2018-01-26 03:42:28
IS,Rails autoloading cannot load constant despite loading the file it lives in,Steps to reproduce A minimal reproduction app can be found here Within that repository there is a readme that contains all of the solutions I attempted and includes a workaround that mostly works I do not think there is a way to reproduce this in a single file since it requires the autoloader to show the problem I can add a test case to Rails itself if that would be easier to understand Expected behavior Rails' autoloading correctly loads a series of constants that live in the following places The weirdest part of this is if you drop byebug into the body of the Workflows Base class you can see that it loaded but is not for some reason added to the environment System configuration Rails version 5 1 4 and 5 2 0 beta2 Ruby version 2 4 2,,matthewd,2018-01-25 17:10:34,2018-01-26 09:39:02
PR,WIP Fix UJS build,,,"y-yagi,y-yagi",2018-01-26 11:20:59,2018-01-26 11:35:44
PR,Ensure that autoloaded constants is unique with failing test,This builds on 31741 Motivation It has been shown that autoloaded constants are not ensuring that constants are only loaded once in the situation where a valid constant is then edited to be exceptional then said exception is corrected In this scenario we are seeing the constant being added in an infinite loop I tested switching the array to a set and this resoloved the issue Related Issues 31694 31741 Changes Change autoloaded constant from array to set Change methods called against this set from array methods to equivalent array methods,,"rafaelfranca,rafaelfranca,matthewd,rafaelfranca,rafaelfranca",2018-01-19 16:00:19,2018-01-26 14:05:04
PR,Use respond to test helpers,Using assert respond to and refute respond to wherever possible to make things cleaner and more consistent This will also give us better default failure messages,,"composerinteralia,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,composerinteralia,matthewd,composerinteralia,composerinteralia,composerinteralia,composerinteralia,composerinteralia",2018-01-25 02:28:35,2018-01-26 18:15:31
PR,Fix example migrations in Associations guide,This is a tiny fix the Associations Basics guide originally included a sample migration that defined a foreign key with t integer author id I have replaced this with t references author In addition since add reference adds an index by default now I have removed explicit mention of adding an index on foreign key columns,,,2018-01-26 04:32:38,2018-01-26 18:36:16
IS,Generated modules repeatedly added to autoloaded constants after an error,Hi Thanks for your work making Rails so great I'm having a little trouble with ActiveSupport Dependencies in development and I wonder if you can help me through it The issue works like this link to Rails app below In a controller reference a constant In that module class definition reference another constant which is in an autogenerated module In that last constant which is inside a generated module have some kind of error that prevents the constant from being loaded for example a runtime error in the class definition Load a page which triggers the error see the error page After seeing the error page correct the error Reload the page The server spins forever ' I have been hunting this issue for about 10 months in the context of graphql ruby but finally had the good sense to investigate it in a plain Rails context I did find a work around although it is pretty heavy handed I use this wacky class instead of Set because Set does not implement some methods like concat which are used by ActiveSupport Dependencies Are you interested in pursuing this issue in Rails If so I'm happy to search for a more proper solution and submit a pull request If you think a certain approach would be best please let me know and I would love to look into it Thanks for your review Steps to reproduce Here is a Rails app to demonstrate the issue with instructions in the readme Expected behavior The auto generated module should be unloaded once then reloaded once Actual behavior After the error the auto generated module is in ActiveSupport Dependencies autoloaded constants but the constant is not defined in Ruby So during ActiveSupport Dependencies remove constant the constant is re loaded re added to autoloaded constants then removed Since the constant appears again in autoloaded constants it is next in line to be removed and the subsequent call to remove constant starts this process from the beginning This begins an infinite loop Well not infinite Ruby would probably run out of memory eventually System configuration Rails version 5 1 4 Ruby version 2 4 1,,,2018-01-12 19:55:09,2018-01-26 18:45:09
PR,Fix infinite loop when unloading autoloaded modules,Fixes 31694 In some cases remove unloadable constants could get stuck because unloading a constant might cause an autoloaded constant to be re added to autoloaded constants See 31694 for a detailed description and a demo app I chose to use uniq instead of swapping Array for Set because Array operations are faster and it might make a difference for really big apps Set has a slightly different API so if anyone is using autoloaded constants they might get a needless incompatibility if we switch it to Set,,rafaelfranca,2018-01-26 14:04:55,2018-01-26 18:45:09
IS,Where query with or does not use binds,Steps to reproduce Note that the id value 33 is not using a bind parameter but is instead hard coded into the query Rails version 5 1 4 Ruby version 2 5 0 preview1,,"schneems,fatkodima,eugeneius,composerinteralia,sgrif",2017-11-24 20:53:06,2018-01-26 23:37:03
IS,Using dependent as destroy destroy not fails when association fails the destroy,Steps to reproduce Run this active record master test case to reproduce the error Expected behavior In this test case MainResource has an association with dependent destroy i e SubResource main resource destroy should fail when it fails to destroy the association Actual behavior When main resource destroy main resource is deleted its association becomes an orphan record System configuration Rails version master branch Ruby version 2 4 2 Related Issue There was a similar issue reported few years ago,,,2017-10-09 06:37:44,2018-01-27 00:23:42
PR,Relax minitest versions,We locked Minitest to 5 11 1 in 31799 because 5 11 2 included a breaking change The change was fixed in 5 11 3 so we no longer need to lock in the version,,"composerinteralia,jeremy,composerinteralia,composerinteralia",2018-01-27 00:13:15,2018-01-27 03:46:04
PR,Introduce ActiveRecord Relation one,one asserts that the relation contains exactly one record and returns it If there are no records or more than one an ActiveRecord NoRecordFound or ActiveRecord MultipleRecordsFound exception is raised respectively This is a concept borrowed from other ORM tools Is useful when a data schema has a many relationship but only a single record is expected in some situation Due to potential confusion with ActiveRecord Relation one I also suggest the name single,,matthewd,2018-01-27 02:28:15,2018-01-27 05:01:55
PR,remove unused variable to in mirror service test rb,I just found that to variable has never been used since the file has created so I just removed it Thank you,,"kamipo,georgeclaghorn,georgeclaghorn",2018-01-26 01:39:22,2018-01-27 10:45:21
PR,Get travis build passing,Just messing around with travis at the moment to see if I can sort out the failing railties suite Hoping for lots of green dots,,"composerinteralia,composerinteralia,composerinteralia,rafaelfranca,composerinteralia,composerinteralia,composerinteralia,eileencodes,composerinteralia,composerinteralia,y-yagi",2018-01-26 21:55:55,2018-01-27 15:02:23
PR,Rename local variable name rows affected to affected rows in persistence rb,,,kamipo,2018-01-28 01:32:36,2018-01-28 01:59:42
IS,Multiple references to jQuery in asset pipeline page of guides,contains multiple references to jQuery and alludes to jQuery still being part of a new stock standard Rails application For example the jquery rails gem which comes with Rails as the standard JavaScript library gem And jQuery is the default JavaScript library from Rails 3 1 onwards,,,2018-01-14 04:08:28,2018-01-28 21:10:45
PR,Remove out of date references to jQuery ci skip,Fixes 31703,,composerinteralia,2018-01-28 20:38:03,2018-01-28 21:10:45
PR,Define supports foreign tables in AbstractAdapter,Summary This pull request addresses undefined method supports foreign tables errors by setting supports foreign tables method in AbstractAdapter Unlike bundle exec rake test bin test does not skip adapter specific test files Related to 31549,,yahonda,2018-01-28 10:41:16,2018-01-28 21:11:16
IS,where method using composed of columns doesn t expand an Array object,Steps to reproduce Expected behavior SELECT customers FROM customers WHERE customers balance IN 1 2 Actual behavior SELECT customers FROM customers WHERE customers balance IN NULL NULL System configuration Rails version 5 1 4 Ruby version 2 4 3,,,2018-01-17 08:48:07,2018-01-28 22:20:05
PR,Fix not expanded problem when passing an Array object as argument to the where method using composed of column,Fixes 31723,,"kamipo,kamipo",2018-01-17 09:00:59,2018-01-28 22:20:05
PR,Remove joke in security guide ci skip,I think this is a joke although not a great one It is mildly unprofessional so I think we should get rid of it,,"composerinteralia,schneems",2018-01-28 22:46:15,2018-01-28 22:52:51
PR,Added tests for ActiveStorage Blob image and ActiveStorage Blob video,I added missing tests for ActiveStorage Blob image and ActiveStorage Blob video Thank you,,georgeclaghorn,2018-01-28 07:24:53,2018-01-29 00:27:01
IS,type for attribute a symbol returns identity type,Steps to reproduce I have a float column quota desired I'm using postgres but from code this seems adapter independent Calling type for attribute quota desired works well but on a symbol type for attribute quota desired returns a do nothing Type Value I'm working on a PR to add tests support symbols too let me know if something else is desired Expected behavior Current docstring says attr name The name of the attribute to retrieve the type for Must be a string OK but who reads that when writing code I strongly expect any API taking column names to either support both strings and symbols OR raise an exception The current behavior is really bug prone because like for any non existent attribute it seems to succeed but does not actually cast values I know very little about the attributes types API do not know why silently returning a do nothing type for non existent attributes is good but that has explicit code tests On grounds of least surprise and given that column for attribute already works on both strings and symbols it does name name to s I propose type for attribute should support symbols too Actual behavior This case was extra nasty to me because 4 4 0 but 4 hash 4 0 hash But that is a ruby complaint not rails We had code that builds a hash of records by some columns type cast except it did not cast because we used symbols At least now I know it did not work System configuration Rails version 5 0 2 Ruby version ruby 2 3 4p301,,,2018-01-01 13:47:27,2018-01-29 01:46:36
PR,Allow type for attribute symbol,Allow type for attribute column name to work same as type for attribute column name Closes 31611 previously for symbols it behaved same as for non existent column name returned an identity type that did no casting which was easy to miss when calling as it does not fail loudly Similar to column for attribute that already accepts both string and symbol first time I'm touching Rails code please review carefully,,"composerinteralia,composerinteralia,kamipo",2018-01-01 21:50:14,2018-01-29 01:46:36
IS,ActiveRecord QueryMethods reverse order is doing a strange thing where several order clauses exist,Steps to reproduce Assuming that I have a model User with 3 attributes first name last name and email when I get a peek at the SQL generated by the following statement Funny part is If I have 2 order clauses on my relation I get 2 repetitions 3 orders 3 repetitions Not tested with 4 but I'm ready to bet my fur that it will give 4 repetitions This have no impact on performance of execution with a postgresql database but it seems odd anyway Is this an expected behavior System configuration Rails version 4 2 8 Ruby version 2 4 1,,,2017-10-12 15:48:49,2018-01-29 02:04:57
IS,Accessing both request raw post and params in the same action in tests fails,I'm testing a paypal integration within a controller test and I see a weird behaviour within ActionController TestCase Since paypal signs request body I need to access request raw body to verify signature and then I need request params to process the payment so the controller action I'm testing is more or less this System configuration Rails version 5 1 4 Ruby version 2 3 1,,"rafaelfranca,rafaelfranca,rafaelfranca",2017-10-20 21:08:29,2018-01-29 02:04:58
PR,Fix example of using composed of,Fix mapping of attributes in the example See also L176 L183,,"bogdanvlviv,vipulnsward,bogdanvlviv,kamipo,kamipo,kamipo",2017-12-06 07:12:07,2018-01-29 07:56:51
PR,Fix the example of 'finding records by a value object',This example was added in abdf546ad6d02ecb95766e73cd3c645a48c954de but was inconsistent with composed of balance definition in the 'Customer' Related to 31346 issuecomment 361169424 r,,bogdanvlviv,2018-01-29 09:09:50,2018-01-29 09:17:36
IS,before type cast method does not work in before update callback,Steps to reproduce Use enum in model with integer status Expected behavior Should display the integer value of the status Actual behavior Displays the written value of the status The method however work in other cases when not in the before update callback System configuration Ruby 2 3 0 Rails 5 1 4,,y-yagi,2018-01-25 20:40:41,2018-01-29 13:31:04
IS,ArgumentError unknown keyword host,Steps to reproduce Add configuration for host per edge guides,,eileencodes,2018-01-29 11:55:20,2018-01-29 14:33:28
IS,ActionController TestCase post documentation is incorrect,The documentation for ActionController TestCase includes the following documentation for the post helper You can also send a real document in the simulated HTTP request Expected behavior Test passes Actual behavior Test raises ArgumentError wrong number of arguments given 2 expected 1 System configuration Rails version 5 1 4 Ruby version 2 4 2,,,2018-01-29 18:29:52,2018-01-29 19:00:49
PR,ActionController TestCase fix post documentation,Fixes 31823 Summary As I mentioned in 31823 it looks like the documentation for the ActionController TestCase post documentation did not get updated when the syntax it was using was deleted in,,eileencodes,2018-01-29 18:59:34,2018-01-29 19:00:49
PR,Avoid extra calls to to s,With 31615 type for attribute accepts a symbol as well as a string has attribute and attribute alias also accept either Since these methods already call to s on the argument we no longer need to do that at the call site,,composerinteralia,2018-01-29 12:30:48,2018-01-29 20:56:54
IS,There is no clear message if there is no master key file,Steps to reproduce 1 Clone any your project with existing credentials yml enc 2 Forget to put the master key file 3 rails s Expected behavior Clear message Spent some hours on the solution of the problem The file is contained in gitignore,,"y-yagi,y-yagi",2018-01-29 13:30:12,2018-01-29 22:20:56
IS,Fixtures for models referencing nested models attempts to create instances of the wrong model,I do not know if this is a bug or a misunderstanding on my part I apologise if it is the latter but would appreciate a pointer in the right direction Steps to reproduce Create two models where one references the other and the latter is a subclass of the first pluralized When it encounters the line in the fixtures file outers inner one it appears to be trying to create an instance of the Outer model with the details for the Outers Inner fixture If however there is an Outer fixture with the same name there is no problem System configuration Rails version 5 1 4 Ruby version 2 5 0 also 2 4 1p111,,"y-yagi,y-yagi",2018-01-24 13:19:46,2018-01-29 22:31:52
PR,Dump correctly index nulls order for PostgreSQL,Related r,,"fatkodima,rafaelfranca",2018-01-28 16:56:28,2018-01-29 23:48:35
PR,yarnpkg correct exec syntax,Previous change didn t expand this array of arguments Sorry for the mistake,,"matthewd,guilleiguaran,y-yagi",2018-01-23 08:45:52,2018-01-30 01:30:16
IS,sql type error,An external mysql database has been connected My schema rb after running rails db schema dump This file is auto generated from the current state of the database Instead of editing this file please use the migrations feature of Active Record to incrementally modify your database and then regenerate this schema definition Note that this schema rb definition is the authoritative source for your database schema If you need to create the application database on another system you should be using db schema load not running all the migrations from scratch The latter is a flawed and unsustainable approach the more migrations you will amass the slower it will run and the greater likelihood for issues It is strongly recommended that you check this file into your version control system ActiveRecord Schema define version 0 do Could not dump table employees because of following NoMethodError undefined method sql type' for int 11 String end OR ActiveRecord Schema define version 0 do Could not dump table employees because of following NoMethodError undefined method type' for varchar 20 String end,,"composerinteralia,matthewd",2018-01-29 18:38:44,2018-01-30 01:39:41
PR,Allow in X Request Id header,It makes sense to be as strict as possible with headers from the outside world but I believe the primary concern is CRLF injection Allowing to support Apache is mod unique id see 31644 seems OK to me but I definitely want to get confirmation from an expert,,"composerinteralia,matthewd,georgeclaghorn,composerinteralia",2018-01-28 17:59:39,2018-01-30 01:45:03
PR,Update rails ujs readme,Summary Link to W3C reference was broken this uses the latest URL along with HTTPS,,,2018-01-30 00:19:06,2018-01-30 02:02:53
IS,belongs to required by default is not setting required true in belongs to association,I migrated a Rails 4 app to 5 0 6 The new default for belongs to association is required I have Rails application config active record belongs to required by default true configured in my app I can confirm this on rails console I have a model that has a belongs to association image When I create a new record it is valid even if I do not define its association image Expected behavior The belongs to association should trigger a validation error by default if the association is not present System configuration Rails version 5 0 6 Ruby version ruby 2 2 5p319 2016 04 26 revision 54774 x86 64 linux,,"rafaelfranca,simi",2017-10-24 22:40:12,2018-01-30 02:34:39
PR,Ensure StatementCache execute handles RangeError,StatementCache is used for simple equality queries This means that if StatementCache execute raises RangeError the result is always empty so handling the RangeError in StatementCache execute instead of catching the error in several places,,"kamipo,sgrif,kamipo,sgrif,kamipo,kamipo",2017-07-28 19:56:27,2018-01-30 06:20:21
PR,Add ContentSecurityPolicy to list of middleware,Document in the guides the new middleware added in 31162 ci skip,,"claudiob,claudiob",2018-01-30 16:24:14,2018-01-30 16:27:41
IS,Bundle erro,2018 01 25 1516896933 1366x768 scrot,,"rafaelfranca,composerinteralia",2018-01-25 16:33:08,2018-01-30 19:53:37
PR,Disable CSP by default,Before this patch to be able to use webpacker and webconsole we were defining an used default in the script src policy White we do not implement the automatic nonce approach defined in it is better to not have any default configuration in Rails 5 2,,rafaelfranca,2018-01-30 22:53:41,2018-01-30 23:30:14
IS,ActiveRecord does not unscope where conditions when right hand side is a group,Steps to reproduce Expected behavior Calling unscope for where on a column with a group RH side should remove that column is conditions Actual behavior The column is conditions remain System configuration Rails version 5 1 3 Ruby version 2 3 4,,,2017-10-24 04:02:40,2018-01-31 02:51:29
IS,ActiveRecord default scope is ignored during reload,confirmed the same in 4 2 up to 5 2 the sql the reload generates ignores the default scope I can make a PR with a failing test and maybe a fix if someone can confirm that this not expected behavior,,"grosser,matthewd,grosser",2018-01-31 03:28:17,2018-01-31 03:55:30
PR,Fix typo,Summary Fix typo,,composerinteralia,2018-01-31 04:53:27,2018-01-31 05:20:56
IS,ActionCable Sec WebSocket Protocol header not supported,Steps to reproduce When client sends handshake it should be able to set Sec WebSocket Protocol header to establish connection also Server should send Sec WebSocket Protocol header in handshake response Expected behavior should support Sec WebSocket Protocol Actual behavior No Sec WebSocket Protocol supported System configuration Rails 5 1 4 Ruby 2 4 0,,"jeremy,jeremy",2018-01-31 05:48:05,2018-01-31 06:23:28
IS,Autoloader still fails to handle namespaces,Steps to reproduce Try to have a model in nested namespaces with the same name as a toplevel constant or any other constant anywhere in a Rails application in an environment running the autoloader i e normally anything but production Expected behavior Autoloader does not confuse the already loaded constant with the requested one Actual behavior Autoloader confuses the already loaded constant with the requested one puts it into the wrong namespace and stuff breaks in more or less subtle ways System configuration Rails version 5 1 4 Ruby version 2 3 3,,matthewd,2018-01-31 11:03:11,2018-01-31 11:24:17
PR,Fix as attribute value for preload link,as attribute value should be style for stylesheet preload link See as attribute discussion r164954159 thanks for the report shall I backport it to 5 2 stable r,,"bogdanvlviv,eileencodes",2018-01-31 11:13:24,2018-01-31 13:11:16
PR,Backport 31838 to 5 2 stable,r,,"bogdanvlviv,eileencodes",2018-01-31 13:26:17,2018-01-31 13:34:31
IS,Override api only in Engine is not possible,Steps to reproduce Rails app defined as more shared models have defined in application rb,,"rafaelfranca,rafaelfranca",2018-01-31 14:10:50,2018-01-31 17:26:50
IS,ActionCable circular websocket message processing when connection is closed,Steps to reproduce I do not known exactly because I found this bug in production log Expected behavior In production log I found many same records like this E 2018 01 30T14 08 39 893202 12649 ERROR Ignoring message processed after the WebSocket was closed command message data command follow symbols ABB BTCUSD BITFINEX AMZN AAPL action follow identifier channel TickerChannel E 2018 01 30T14 08 39 975338 12649 ERROR Ignoring message processed after the WebSocket was closed command message data action unfollow identifier channel TickerChannel It is about a thousand identical records in log After that was lost connection to redis When I restart unicorn everything became good Actual behavior I think that happens because message buffer not cleaned after connection closing System configuration Rails version 5 0 2 Ruby version 2 3 0,,rafaelfranca,2018-01-31 09:28:40,2018-01-31 21:13:41
PR,Consistent behavior for session and cookies with to h and to hash method,Summary When I was debugging one issue I noticed some inconsistency with session and cookies Session has method to hash but no to h And Cookies has to h but no to hash So I have added them as aliases,,rafaelfranca,2018-01-31 20:51:58,2018-01-31 21:31:41
PR,Use Oracle enhanced adapter release52 to support Rails 5 2 stable,Summary This pull request changes Gemfile at 5 2 stable so that Oracle enhanced adapter release52 branch will be used There was a same kind of pull request for 5 1 stable 28578,,yahonda,2018-01-31 22:54:20,2018-01-31 23:01:52
PR,Consistent behavior for session and cookies with to h and to hash method,Summary When I was debugging one issue I noticed some inconsistency with session and cookies Session has method to hash but no to h And Cookies has to h but no to hash So I have added them as aliases,,,2018-01-31 21:37:21,2018-01-31 23:13:39
PR,Remove ActiveModel Attributes,I suspect I have missed something here but 31832 got me poking around in ActiveModel Attributes and I could not see where it was being used except in a couple tests If I am correct that this undocumented i e not public class is not being used anywhere in Rails we should either remove it or document it so people can use it It does have some duplication with ActiveRecord Attributes so maybe we could clean that up as well If I am NOT correct about any of this I will be happy to learn what I got wrong If this becomes mergeable I would want to go through and make sure I am not negatively affecting test coverage I removed those for now just to see if the build would pass Things were passing locally but Travis runs a lot more test than I do,,"composerinteralia,rafaelfranca,composerinteralia",2018-02-01 00:44:41,2018-02-01 01:42:31
IS,rails new silently fails on incorrect command line option,Steps to reproduce My error which I did not catch until later when I saw that the database was configured for Sqlite etc Expected behavior An error message naming the unknown option rails new should then quit with an error status Actual behavior rails new gives no sign that it was invoked incorrectly It generates an app and it appears to be successful System configuration Rails version 5 1 4 Ruby version 2 5 0,,"rafaelfranca,matthewd,rafaelfranca",2018-01-31 23:47:47,2018-02-01 01:48:40
PR,Improve ActiveStorage javascript code for readability,This change will improve the readability of ActiveStorage javascript code by breaking out long lines to make it easier to read,,rafaelfranca,2018-02-01 02:25:05,2018-02-01 02:37:50
IS,Percona XtraDB Cluster and advisory lock defaults error with migrations,Steps to reproduce Working with Percona XtraDB Cluster MySql InnoDB in clustered mode PXC Strict Mode is set to ENFORCING by default Create a migration to add a column to a table The migration will fail do to advisory lock being on by default Advisory lock does table level locking instead of row level locking This is incompatible with Pecona XtraDB Cluster Expected behavior advisory lock should detect to see if the DB supports advisory lock If the DB is Percona XtraDB for example When MySql system variable pxc strict mode is set to ENFORCING then supports advisory locks should be set to false Actual behavior supports advisory locks is true by default A monkey patch is required to get rails to work with MySql InnoDB in clustered mode Specifically Percona XtraDB Cluster With advisory lock required by default you cannot perform normal isafe' migrations because table locks are prohibited by default in Percona XtraDB Cluster Monkey patch needed for create a new file app config initializers advisory rb with the following restart application System configuration Rails version 5 0 0 1 Ruby version 2 3 3,,"rafaelfranca,rafaelfranca",2017-04-04 19:42:09,2018-02-01 02:58:43
PR,add current scope method for translations,Summary I implemented a current scope method in the AbstractController Translation module in order to have the default scope used by translate I created a topic on the google group but got no answer since two weeks topic rubyonrails core ngz9RW7COC4,,,2018-02-01 09:31:53,2018-02-01 09:36:53
PR,Update to latest rubies 2 2 9 2 3 8 and 2 4 3 on Travis CI,,,simi,2018-02-01 10:04:45,2018-02-01 11:02:52
IS,bundle update rails 4 1 4 to 4 2 10 taking long time,Steps to reproduce Changed 4 1 4 to 4 2 10 in Gemfile Guidelines for creating a bug report are available here creating a bug report Expected behavior Tell us what should happen It should update Actual behavior Tell us what happens instead Its stuck in Resolving dependencies System configuration Rails version present 4 1 4 need to upgrade to 4 2 10 Ruby version 2 2 1 or 2 4 2 My Gemfile is ource '' gem 'rails' '4 2 10' gem isass rails' gem 'uglifier' gem 'jquery rails' gem 'mysql2' gem wouldevise' gem wouldevise invitable' git '' ref '229b12e3ab08167e0c5286d5ac6fe9f9fa2445a3' gem 'paperclip' gem 'acts as list' gem 'rubyzip' gem 'to bool' gem 'jquery fileupload rails' gem 'jquery sparkline rails' git '' gem 'aws sdk' ' 2 0' gem isidekiq limit fetch' gem 'activerecord session store' gem 'active model serializers' gem wouldevise security extension' gem 'pretender' gem 'puma' require false gem 'bootstrap sass' gem 'bootstrap select rails' gem 'flag icons rails' gem 'autoprefixer rails' gem 'font awesome sass' gem 'local time' gem 'groupdate' gem 'chartkick' gem 'pace rails' gem isidekiq' gem isidekiq status' gem isinatra' require false gem islim' gem 'rails i18n' gem 'ransack' gem 'kaminari' gem 'counter culture' gem 'activerecord import' gem 'ar octopus' gem 'mina' gem 'mina multistage' require false gem 'airbrake' gem 'newrelic rpm' group production gem 'paranoia' gem isendgrid actionmailer' Please suggest what need to do,,matthewd,2018-02-01 13:10:55,2018-02-01 14:29:36
IS,active record connection to multiple databases in different models,Steps to reproduce Open active record base rb L227 L240 But ActiveRecord Base clear active connections will kill all base connections from currrent thread Nobody cares about it People just trust that all active connections from current thread belongs to current context Open active record autosave association rb L331 ActiveRecord Base index nested attribute errors Open active record railtie rb ActiveRecord Base verbose query logs false if ActiveRecord Base connected ActiveRecord Base clear cache ActiveRecord Base clear reloadable connections Open active record schema dumper rb L250 connection ActiveRecord Base connection perfect solution ActiveRecord Base schema migrations table name ActiveRecord Base internal metadata table name Open active record type rb L52 adapter ActiveRecord Base connection adapter name downcase to sym perfect solution There are many ActiveRecord Base read write usages in tasks database tasks connection adapters railties Expected behavior We need to tell user the truth that it is not possible to use multiple databases today We need to recognize architectural mistakes to fix it in future Actual behavior Total lie Part of functionality was implemented as a Base side effects It is not possible to use active record with different databases You need to create dynamically your own Base and slip it under 10 12 core active record classes Moreover you need to verify that all functionality respect your base The chance to do something wrong is high System configuration Rails version master Ruby version 2 4 3 We need to remove all ActiveRecord Base usages from classes ActiveRecord Base can be the default source for some options but it should be possible to rewrite it Please do not merge any pull request that uses ActiveRecord Base directly,,"matthewd,matthewd,eileencodes,rafaelfranca",2018-02-01 13:59:57,2018-02-01 14:45:41
IS,where returns all records instead it should raise an error,where Organization all does the same I think Organization where should raise an error Rails version 4 2 7 5 0 1 Ruby version 2 3 3,,bogdanvlviv,2018-02-01 09:59:54,2018-02-01 14:49:15
PR,ActiveStorage use the full class name for the JSON coder,The JSON constant can refer to another object than the AR Coder so the full name should be used For example this is causing issues when using the representable gem I checked the change with my application and it fixed the issue,,"eileencodes,claudiob",2018-02-01 11:33:19,2018-02-01 15:02:16
IS,Error while installing rails gem,Steps are as follows 1 Install Ruby 2 5 0 64 bit 2 Ruby Development Kit msys2 64 bit msys2 x86 64 20161025 exe as per 3 Install rails Following error while installation for noir4 gem Expected behavior Expecting to be installed as per Actual behavior Failed to build noir4 gem as mentioned above System configuration Rails version Latest via command gem install rails Ruby version 2 5 0 Operating System Windows 10,,matthewd,2018-02-01 15:10:12,2018-02-01 15:26:35
PR,Add changelog entry for 31844,Related to 31844 r,,bogdanvlviv,2018-02-01 14:49:25,2018-02-01 17:10:40
IS,ActionView is CheckBox incorrectly calculates 'checked' property on inverted check values,Steps to reproduce Configure a form with a checkbox field where checked value 0 and unchecked value 1 inverting the defaults and a method here bad on model Dog that returns a boolean value like so Expected behavior When dog bad true the box should be unchecked When dog bad false the box should be checked Actual behavior The opposite When dog bad true the box is checked When dog bad false the box is unchecked System configuration Rails version 5 1 4 Ruby version ruby 2 5 0p0 I have targeted the unexpected behavior to within the checked method of ActionView Helpers Tags CheckBox Here is a screenshot showing the code and current behavior screen shot 2018 02 01 at 1 38 05 pm,,"rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca",2018-02-01 22:01:41,2018-02-01 22:14:01
IS,Un marshaling ActiveRecord objects is significantly slower and more memory intensive in Rails 5 x,Background This issue was uncovered when I was upgrading an app from Rails 4 2 x to Rails 5 0 x When I was testing the upgrade out in production I noticed one controller is response time got about 3x as slow as it was on Rails 4 After some more digging I found that it was deep within the call to Rails cache fetch where we were unmarshaling marshalled activerecord objects In that case I saw the following benchmarked times with the same objects built by Rails 4 and 5 respectively I also captured strace data if that is helpful in further debugging See this gist for more info Expected behavior I expected the runtime of this cache fetch to be similar to what it was in Rails 4 I must admit that this cache is definitely not ideal to start with There are things we could do to refactor this to not include entire ActiveRecord objects but that refactor has become a necessity to get onto Rails 5 x Actual behavior Instead we saw over a 3x increase in how long this data took to unmarshal in the worst case System configuration Rails version 5 1 4 Ruby version 2 4 2,,"bdewater,sgrif",2017-09-21 22:14:37,2018-02-01 22:52:34
PR,PERF Recover marshaling dump load performance,This performance regression which is described in 30680 was caused by f0ddf87 due to force materialized LazyAttributeHash Since 95b86e5 default proc has been removed in the class so it is no longer needed that force materialized Avoiding force materialized will recover marshaling dump load performance Benchmark Before Fixes 30680,,"kamipo,sgrif,kamipo,sgrif,sgrif,kaspth,kamipo,sgrif,carlosantoniodasilva,matthewd,carlosantoniodasilva,rafaelfranca,rafaelfranca,kamipo,carlosantoniodasilva",2018-01-30 02:10:19,2018-02-01 22:52:35
PR,Allow ActiveStorage Blob service url to pass addition options to service url,Allow ActiveStorage Blob service url to pass addition options to service url Because there have some service needs more parameters for file URL,,georgeclaghorn,2018-02-01 10:24:11,2018-02-02 02:57:10
PR,Removed private generators from command list,Appropriate way to handle encrypted command is by bin rails credentials and bin rails encrypted It was displayed on bin rails generate command encryption key file is shared by 2 commands thus hide it encrypted file was not used in any other place thus inline it where needed r,,"morgoth,kaspth,kaspth,morgoth,morgoth,y-yagi,morgoth,y-yagi,morgoth,morgoth,morgoth,eileencodes",2017-11-29 09:48:39,2018-02-02 15:17:23
PR,Fix build failures on Travis,I'm not sure cause but due to the influence of gem clean the expected gem seems not to be installed correctly In order to avoid a test failure due to this I fixed that gem clean not be executed Ref travis ci travis ci 2518,,y-yagi,2018-02-01 23:53:29,2018-02-02 15:23:58
PR,Namespacing prefix for ActiveStorage S3 Service,Summary Currently all ActiveStorage blobs are located in the root directory of the S3 bucket This makes manual inspection of the S3 bucket very hard when there already are existing objects not belonging to ActiveStorage Other Information Maybe this cluttering is not a problem for everyone but most setups I came across have only one S3 bucket per environment production staging and not an entire bucket dedicated to ActiveStorage I sought feedback topic rubyonrails core t3FPqfc2AB8 on the Rails Core group but received no response at least the post had most views of the past half year Since no one was willing to jump in I thought I would show some code to receive feedback I would be happy for a no as well as long as I learn why PS I was not sure whether the variable should be called prefix or namespace but that is up to code review The ActiveStorage tests pass locally I have not run the entire suite yet I will let Travis do that for me Thank you Rails Team you are my heroes,,georgeclaghorn,2018-02-02 15:50:33,2018-02-02 16:26:09
IS,Rails 5 2 0 rc1 lib active record coders yaml column rb 24 in load' undefined method new' for Representable JSON Module NoMethodError,Steps to reproduce Upgrading my Rails app from 5 2 0 beta2 to 5 2 0 rc1 and launching the Rails development console with bin rails c Expected behavior It should work just fine as it was with the 5 2 0 beta2 version Actual behavior System configuration Rails version 5 2 0 rc1 Ruby version 2 4 3,,rafaelfranca,2018-02-02 17:31:46,2018-02-02 18:02:45
IS,Autoloading guide should mention eager load paths,The Autoloading guide Mentions adding lib to autoload paths but does not mention anything about also adding it to eager load paths Without eager load paths constants may fail to load in production,,"rafaelfranca,kirs,kamipo",2017-07-24 20:44:04,2018-02-03 09:05:21
PR,Mention eager loading in the guide,Fixes Let is add some info about eager loading and eager load paths into the autoload guide,,"kirs,vipulnsward,vipulnsward,rafaelfranca,rafaelfranca,kamipo",2017-08-07 07:46:54,2018-02-03 09:06:07
PR,ci skip documentation for explanation error message,,,"dixitp012,kamipo",2017-11-30 08:45:06,2018-02-03 09:36:38
PR,Remove useless explanation in engines md ci skip,The explanations about triggered order are useless It could make reader confuse when it called The next sentences make it clear when these hook will be called Hence we do not need these sentences,,"riseshia,kamipo,riseshia",2017-09-03 03:47:51,2018-02-03 10:28:17
PR,Improve test for TaggedLogging keeps each tag in their own thread,Summary The logger has no tags in a fresh new thread which is pointed out in Improve the TaggedLogging test keeps each tag in their own thread to make sure this behavior is covered,,,2017-02-26 04:05:23,2018-02-03 13:41:40
PR,Remove broken Renderer with defaults method,Summary The Renderer with defaults method was introduced in with the intent of enabling a new renderer to be created with new defaults passed in However the method is broken as it references env which is not available thus throwing an error While throwing the error can be fixed either by referencing the env instance variable or creating an attr reader for it the method will still not perform as expected since env already has the defaults merged in via the initializer The only way for it to work would be to call normalize keys env merge defaults ie It feels like that would be a much more confusing API though This PR opts to remove the method without entering a deprecation cycle since it is already broken,,"kaspth,rafaelfranca,schneems,kamipo",2016-11-28 11:09:32,2018-02-03 14:00:15
IS,Creating a record with create with a missing required belongs to relationship does not raise an error,I have noticed that on Rails 5 0 0 beta2 that creating a new record using Model create does not raise any errors and creates an invalid record when there is a missing belongs to relationship This assume that belongs to required by default is true and the belongs to relationship does not specify any options for optional or required implying that it is required Is this desired behaviour I would have thought this should raise a normal ActiveRecord RecordInvalid exception,,"rafaelfranca,rafaelfranca,kamipo",2016-02-24 14:54:45,2018-02-03 16:54:55
PR,Correct capitalization of Rails in guide text,correction to 31755 as per discussion r165819798,,,2018-02-03 18:26:19,2018-02-03 18:35:07
PR,Make test runner work with AR test tool,Since 29572 test runner will be loaded as minitest is plugin Therefore if specify a value in Minitest extensions before the Minitest initialization process the extension will not load and the test runner will not work L86 before before after after,,"y-yagi,kaspth,y-yagi,y-yagi,y-yagi,y-yagi,kaspth",2017-08-18 23:56:26,2018-02-04 11:19:48
IS,bin test is not using the Rails test reporter,Since the output of bin test and bundle exec ruby Itest is slightly different output bin test does not load the Rails minitest plugin which leads to minitest' default reporter used Note that I'm talking about the rails rails test suite I'm not 100 sure but I think it happens because bin test is calling Rails TestUnit Runner run ARGV as another one is using Minitest run ARGV Expected behavior bundle exec ruby Itest test cases my test rb and bin test test cases my test rb should have the same output Actual behavior bundle exec ruby Itest test cases my test rb is using shiny new Rails test reporter and prints rerun command img width 741 alt screen shot 2017 07 23 at 23 01 29 src bin test test cases my test rb is using minitest built in reporter img width 995 alt screen shot 2017 07 23 at 23 01 41 src,,"kirs,kirs,kirs,utilum,kirs,y-yagi",2017-07-23 20:08:48,2018-02-04 11:20:15
IS,ActiveStorage with Firefox form does not get submitted,This issue is different from this other one Now the upload works but the form does not get submitted Steps to reproduce It can be reproduced on this demo app Expected behavior This is what happens on Chrome chrome Actual behavior This is what happens on Firefox firefox System configuration Rails version 5 2 0 rc1 Firefox version 58 0 1 Linux x64,,"georgeclaghorn,javan,javan,javan,javan,javan,javan,javan",2018-02-01 14:57:12,2018-02-04 20:24:01
PR,Add zettabytes and yottabytes methods,,,"kamipo,kamipo,matthewd,matthewd",2018-02-03 16:58:18,2018-02-05 00:35:30
IS,RedisCacheStore fetch multi writes incorrect values,Steps to reproduce 1 Create a new Rails 5 2 0 rc1 project 2 Add gems hiredis and redis 3 Add redis cache store to config environments development rb Expected behavior Expectedly return value Actual behavior Actually return ActiveSupport Cache Entry 0x00007fc0f5e6f588 System configuration Rails version 5 2 0 rc1 Ruby version 2 5 0,,"georgeclaghorn,jeremy",2018-02-04 16:49:59,2018-02-05 00:39:12
PR,Fix small typo in routing ci skip,constrains constraints,,matthewd,2018-02-04 20:21:48,2018-02-05 00:42:46
PR,Fix RedisCacheStore write multi to correctly store entries,Fixes Before values were incorrectly stored as strings like ActiveSupport Cache Entry 0x007fd63671af48 So now they are stored correctly I created a test with explicit expires in as nil to test this code path L361 L364 which was always avoided before by tests because of expires in here L92,,fatkodima,2018-02-04 22:36:34,2018-02-05 06:42:26
PR,Redis cache store consolidate serialization,Use serialize entry throughout and introduce serialize entries References 31886,,"jeremy,jeremy",2018-02-05 07:04:42,2018-02-05 07:40:07
IS,test,Steps to reproduce Guidelines for creating a bug report are available here creating a bug report Expected behavior Tell us what should happen Actual behavior Tell us what happens instead System configuration Rails version Ruby version,,,2018-02-05 09:12:08,2018-02-05 09:16:21
IS,new issue,Steps to reproduce Guidelines for creating a bug report are available here creating a bug report Expected behavior Tell us what should happen Actual behavior Tell us what happens instead System configuration Rails version Ruby version,,,2018-02-05 09:15:33,2018-02-05 09:27:39
PR,Fix single quotes ci skip,,,"ydakuka,eileencodes",2018-02-05 11:02:01,2018-02-05 13:08:02
IS,Active Storage Mirror Service,in mirror service You can start mirroring to the new service copy existing files from the old service to the new then go all in on the new service I have a bucket on S3 and try to copy its content to local to setup an on premise server Active storage adds files to S3 bucket direct with names like BvWAx6tgrodtsYMB6oxKSTRz and its variant in variants folder then BvWAx6tgrodtsYMB6oxKSTRz folder with the same name then the variant file with new name like cf64579b5ef85d267d1782150b3e470a308a085a4763b But in local it creates folder with first two characters from the file name Bv inside it another folder with the second two characters WA then the file with its name BvWAx6tgrodtsYMB6oxKSTRz and its and its variant in va folder inside it ri folder inside it variants folder inside it a folder with the file name BvWAx6tgrodtsYMB6oxKSTRz then the variant file with variant file name cf64579b5ef85d267d1782150b3e470a308a085a4763b How can I make the local structure like S3 structure to let me copy files after some time to on premise server I see it done automatic if I set Mirror Service but I need it for files before mirror Thanks,,"georgeclaghorn,georgeclaghorn",2018-02-05 17:13:00,2018-02-05 17:54:21
PR,Add missing instrumentation to RedisCacheStore read multi,I have basically extracted instrumentation tests into a separate module to test against all not just null store or memory store cache stores and added missing RedisCacheStore read multi instrumentation,,"fatkodima,fatkodima",2018-02-05 16:52:21,2018-02-05 19:57:15
PR,Use Redis mget for RedisCacheStore fetch multi,RedisCacheStore is not using Redis mget,,"fatkodima,fatkodima",2018-02-05 15:27:45,2018-02-05 21:51:56
IS,Unable to minitest bisect to find what causes PersistenceTest test becomes error,To isolate the cause of this error reported at I have executed minitest bisect with seed 3080 Unfortunately it will not start bisecting System configuration Rails version master branch with the latest commit f9a8646d8150956524a72af9f85c832bbe84061b Ruby version ruby 2 5 0p0 2017 12 25 revision 61468 x86 64 linux,,"yahonda,y-yagi,y-yagi,yahonda,yahonda,y-yagi,yahonda",2018-02-05 11:10:12,2018-02-05 22:42:16
IS,Encoding CompatibilityError,Steps to reproduce configure rails to use redis cache e g System configuration Rails version 5 2 0 beta2 Ruby version ruby 2 3 1p112 2016 04 26 revision 54768 x86 64 darwin16 I suppose that it is the same bug that is come up before in other projects e g but I do not know well enough to be certain,,,2018-02-05 06:14:20,2018-02-05 23:36:12
PR,5 1 stable PERF Recover marshaling dump load performance,Backport of 31827,,kamipo,2018-02-05 11:38:50,2018-02-06 01:05:17
IS,Do not set session method post with https in rails 5 1,I do not understand when I login with http session run normal and login success but when I use https I can not set session and login fails I find solution add config force ssl true in file 'config production rb' but login fails with https Thank you,,,2018-02-06 07:48:27,2018-02-06 08:01:37
PR,Fix ActiveModel MissingAttributeError can not write unknown attribute type,Summary This pull request addreses ActiveModel MissingAttributeError can not write unknown attribute type Reported at Steps to reproduce Thanks yagi for helping about minitest bisect at 31893,,"yahonda,yahonda",2018-02-05 23:23:56,2018-02-06 13:34:56
PR,Example of multiple configurations for system test in guide ci skip,Summary I think it would be good for users to know that you can use multiple configurations in order to test for different configurations screen sizes browsers etc This gives an example on how to do so in the guide Because many applications behave differently depending on the screen size,,,2017-11-27 12:30:41,2018-02-06 15:03:39
PR,Enable block in params filter to return a replacement value,Summary As written a block in the params filter list can only alter the mutable content of the value It cannot wholesale replace it This enables a block in the params filter to be a pure function returning the new value Other Information It does change behavior I had to alter a test Before I do any more work on this I want to know if it is looked upon favorably and would be at all likely to be merged The change enables the following strategy to white list rather than black list the params config initializers filter parameter logging rb,,"rafaelfranca,matthewd,fxn,fxn,fxn,fxn,matthewd,fxn,fxn,fxn",2018-02-02 18:27:48,2018-02-06 16:55:57
PR,Include source code in published activestorage npm package,Summary By including the source code in the published npm package we enable activestorage users to ship smaller javascript bundles to visitors using modern browsers And it seems like there is already support from rails core members for doing precisely that issuecomment 334276744 I have demonstrated this in this sample repository In that example the bundle shrinks by 5K 24 In addition to allowing smaller bundles for those who ship untranspiled code to modern browsers including the source code in the published package can be useful in other ways 1 Users can import individual modules rather than the whole library 2 As a result of 1 users can also monkey patch individual parts of activestorage by importing the relevant module modifying the exported object and then importing the rest of activestorage which would then use the patched object Other Information In order to allow the source code to be depended on rather than the compiled code we have to declare the external dependency on spark md5 as a regular dependency not a development dependency This means that even users who depend on the compiled code will have to download this package However spark md5 is a small package and may already be downloaded as a transitive dependency of another package so this tradeoff seems worth it,,"javan,javan,javan,javan,javan,javan,rafaelfranca",2018-02-03 22:48:56,2018-02-06 17:09:09
IS,Memcache Rails cache fetch multi is slow by an order of magnitude than Rails cache read,Steps to reproduce Using the bug report template does not reproduce the issue for some reason So by that we can assume that the problem is not the Memcached or Dalli driver These values are consistent on my machine across several reloads We may have some sort of optimization on read calls that are not present on fetch multi or something like that I'm not sure System configuration Rails version 5 1 6 Ruby version 2 4 2,,fatkodima,2018-02-06 06:03:40,2018-02-06 17:36:48
IS,Rails cache return ActiveSupport Cache NullStore in rails console after I enable cache in development,Steps to reproduce 1 run rake task to enable cache rails dev cache 2 run rails c type Rails cache class Actual behavior in rails c console Rails cache class return null cache System configuration Ruby version ruby 2 4 1p111 2017 03 22 revision 58053 x86 64 linux Rails version 5 1 4,,"y-yagi,fatkodima",2018-01-31 11:37:28,2018-02-06 18:58:58
IS,numericality validator with custom getter adds an error when assigned blank value,check the gist Steps to reproduce 1 have a model with 1 an optional column and 1 an accessor which computes it when it is blank e g StudentClass total count is either the explicit value of that column or it is computed by summing other values 1 add a numericality validator with allow blank true 1 assign an empty string '' to that column Expected behavior 1 the model should behave exactly like it is when assigning nil to that column 1 particularly it should not trigger any validation error because of allow blank true Actual behavior The model adds a is not a number validation error System configuration Rails version 1 Rails 4 1 8 and 4 1 16 works as expected 1 Rails 4 2 9 and 4 2 10 fails adds is not a number error 1 Rails 5 1 4 5 2 0 rc1 fails and also throws weird undefined method 'test total can be blank' error Ruby version tested all Rails versions on Ruby 2 1 2 2 2 3 and 2 4 Behavior is exactly the same with the exception of Rails 5 on Ruby 2 1 which is unsupported and fails when installing rack,,fatkodima,2018-02-02 04:59:57,2018-02-06 23:27:32
PR,Refer to a stable release of SDoc,Hello This pull request is a follow up to 30199 as SDoc 1 0 0 has been released Sorry I did not mean 6 months by temporarily This can certainly be back ported to 5 2 stable as there was a bug with SEO tags before this release Have a nice day,,robin850,2018-02-06 18:56:23,2018-02-07 00:50:30
PR,Update em socksify to the latest version,Avoid warning parentheses after method name is interpreted as an argument list not a decomposed argument This has been fixed in 0 3 2,,utilum,2018-02-06 22:10:56,2018-02-07 00:55:07
IS,object errors details has unexpected behaviour,Steps to reproduce Simple Rails App with one Person model Person has a name and a birthdate Add a validation for the name to the model so it must bei present But should be reproducabale with any Rails Model Expected behavior You see after asking if bar is there it is there But actually it is not if you ask again Same happens with any empty Problem is if you render the details as JSON then the bar shows up there System configuration Rails version 5 1 4 Ruby version ruby 2 4 1p111,,"bogdanvlviv,bogdanvlviv",2018-02-07 10:52:14,2018-02-07 14:45:53
PR,Fix yaml deserialization of ActiveSupport Duration,This ensures the duration is parts hash has a default value to avoid this regression introduced in 5 1,,"jdelStrother,rafaelfranca,jdelStrother,rafaelfranca",2018-02-07 13:21:03,2018-02-07 20:06:21
PR,Allow unique name for schema cache yml file,Summary In order to help get around we have written code to allow custom naming of schema cache yml files This allows each process that we have running on a shared box to write a file only it reads Other Information This bug and approach has been explained in the issue listed above,,rafaelfranca,2018-02-07 22:32:19,2018-02-07 22:36:01
IS,Error querying empty string on a ActiveRecord Association Relation,Steps to reproduce I was unable to reproduce the bug using the template but I will paste the output of explain command on rails console using Rails 3 2 x where it works and Rails 4 2 10 where it fails EXPLAIN SELECT agency manufacturers FROM agency manufacturers WHERE agency manufacturers manufacturer id 90 AND agency manufacturers imprint ids '' AND country like ' Australia ' SELECT agency manufacturers FROM agency manufacturers WHERE agency manufacturers manufacturer id 90 AND agency manufacturers imprint ids ' ' ' n' AND country like ' Australia ' Expected behavior Query an empty String on an ActiveRecord Association Relation Actual behavior Rails replaces empty String with ' ' ' n' System configuration Rails version 4 2 10 Ruby version 2 4 1,,"composerinteralia,y-yagi",2018-02-06 05:14:42,2018-02-07 23:03:07
PR,Fix blob service url for supports string type filename option,Fix blob service url for supports string or nil filename option and make sure that present a ActiveStorage Filename type to serivce url before,,"georgeclaghorn,georgeclaghorn",2018-02-07 06:56:34,2018-02-08 03:31:33
IS,bin rails credentials edit is ignoring the ENV 'RAILS MASTER KEY',It seems that bin rails credentials edit ignores the Rails master key if it is set via ENV var rather than config master key Steps to reproduce 1 Generate a new Rails app 1 cd new app cat config master key prints 8fe10c494a635b461cfe23bf24999433 1 bin rails credentials show prints the contents as expected 1 bin rails credentials edit opens editor On save and close of file we see New credentials encrypted and saved 1 rm config master key 1 bin rails credentials show reports Missing master key to decrypt credentials See bin rails credentials help 1 RAILS MASTER KEY 8fe10c494a635b461cfe23bf24999433 bin rails credentials show prints the contents as expected 1 RAILS MASTER KEY 8fe10c494a635b461cfe23bf24999433 bin rails credentials edit generates a new key System configuration Rails version 5 2 0 rc1 Ruby version 2 5 0,,"stevenharman,y-yagi",2018-02-07 01:31:20,2018-02-08 10:49:51
PR,Do not add master key when RAILS MASTER KEY env specified,Fixes 31917,,"y-yagi,y-yagi,stevenharman,y-yagi",2018-02-07 12:20:46,2018-02-08 10:49:51
IS,Running rails new with template URL fails with HTTP Error Code 406,Steps to reproduce Attempt to pass a web URL to a template file via the m option on rails new Example rails new helloworld m Expected behavior A new Rails project is created using the template passed into the m option Actual behavior usr local lib ruby 2 5 0 open uri rb 377 in open http' 406 Not Acceptable OpenURI HTTPError System configuration Rails version 5 0 0 Ruby version 2 5,,y-yagi,2018-02-07 23:15:22,2018-02-08 11:14:24
IS,feature proposal delegate private,I want to introduce a PR to Rails after which there would be a possibility to delegate methods to object as private methods But I want to check first with you if it is a good idea before I do the work So we would have this already existing method delegate for delegation as public methods,,simi,2018-02-08 12:07:01,2018-02-08 12:41:12
PR,Add docs on how to configure Active Storage,ci skip Rendered version img width 684 alt snap 2018 02 01 at 7 30 26 am src Could you provide feedback Thanks,,"claudiob,georgeclaghorn,georgeclaghorn,georgeclaghorn,georgeclaghorn,claudiob,claudiob",2018-02-01 15:32:45,2018-02-08 13:07:49
PR,Fix grammar bug in security guide ci skip,,,"composerinteralia,eileencodes,composerinteralia",2018-02-07 20:31:26,2018-02-08 13:37:20
IS,ActiveStorage Set different storage path into model,I use Paperclip gem Into User model I have specific a different path from default path has attached file image path ' rails root private images code filename' Is it possible with ActiveStorage,,georgeclaghorn,2018-02-08 14:18:03,2018-02-08 14:24:49
IS,5 1 4 mysql2 gem seems not to work with activesupport 5 1 4,Steps to reproduce I have rails app which works fine I try to add mysql2 config to database yml and system doesnt run anymore I have done lots of digging on internet but I believe that activesupport 5 1 4 doesnt play well with mysql2 Gemfile gem 'mysql2' adding this Expected behavior Tell us what should happen Should work like a charm I'm including the libraries I have packages installed locally everything seems to work but it does not RUN Actual behavior Tell us what happens instead bundle exec unicorn c config unicorn rb home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support dependencies rb 292 in require' Could not load 'active record connection adapters mysql adapter' Make sure that the adapter in config database yml is valid If you use an adapter other than 'mysql2' 'postgresql' or isqlite3' add the necessary adapter gem to the Gemfile LoadError from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support dependencies rb 292 in block in require' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support dependencies rb 258 in load dependency' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support dependencies rb 292 in require' from home riccardo rvm gems ruby 2 3 4 gems activerecord 5 1 4 lib active record connection adapters connection specification rb 186 in spec' from home riccardo rvm gems ruby 2 3 4 gems activerecord 5 1 4 lib active record connection adapters abstract connection pool rb 880 in establish connection' from home riccardo rvm gems ruby 2 3 4 gems activerecord 5 1 4 lib active record connection handling rb 58 in establish connection' from home riccardo rvm gems ruby 2 3 4 gems activerecord 5 1 4 lib active record railtie rb 124 in block 2 levels in class Railtie ' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support lazy load hooks rb 69 in instance eval' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support lazy load hooks rb 69 in block in execute hook' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support lazy load hooks rb 60 in with execution control' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support lazy load hooks rb 65 in execute hook' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support lazy load hooks rb 50 in block in run load hooks' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support lazy load hooks rb 49 in each' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support lazy load hooks rb 49 in run load hooks' from home riccardo rvm gems ruby 2 3 4 gems activerecord 5 1 4 lib active record base rb 326 in module ActiveRecord ' from home riccardo rvm gems ruby 2 3 4 gems activerecord 5 1 4 lib active record base rb 25 in top required ' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support dependencies rb 292 in require' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support dependencies rb 292 in block in require' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support dependencies rb 258 in load dependency' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support dependencies rb 292 in require' from home riccardo git ror5 pasta pasta app models application record rb 1 in top required ' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support dependencies rb 292 in require' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support dependencies rb 292 in block in require' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support dependencies rb 258 in load dependency' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support dependencies rb 292 in require' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support dependencies rb 379 in block in require or load' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support dependencies rb 36 in block in load interlock' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support dependencies interlock rb 12 in block in loading' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support concurrency share lock rb 149 in exclusive' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support dependencies interlock rb 11 in loading' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support dependencies rb 36 in load interlock' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support dependencies rb 357 in require or load' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support dependencies rb 335 in depend on' from home riccardo rvm gems ruby 2 3 4 gems activesupport 5 1 4 lib active support dependencies rb 251 in require dependency' from home riccardo rvm gems ruby 2 3 4 gems railties 5 1 4 lib rails engine rb 476 in block 2 levels in eager load ' from home riccardo rvm gems ruby 2 3 4 gems railties 5 1 4 lib rails engine rb 475 in each' from home riccardo rvm gems ruby 2 3 4 gems railties 5 1 4 lib rails engine rb 475 in block in eager load ' from home riccardo rvm gems ruby 2 3 4 gems railties 5 1 4 lib rails engine rb 473 in each' from home riccardo rvm gems ruby 2 3 4 gems railties 5 1 4 lib rails engine rb 473 in eager load ' from home riccardo rvm gems ruby 2 3 4 gems railties 5 1 4 lib rails engine rb 354 in eager load ' from home riccardo rvm gems ruby 2 3 4 gems railties 5 1 4 lib rails application finisher rb 67 in each' from home riccardo rvm gems ruby 2 3 4 gems railties 5 1 4 lib rails application finisher rb 67 in block in module Finisher ' from home riccardo rvm gems ruby 2 3 4 gems railties 5 1 4 lib rails initializable rb 30 in instance exec' from home riccardo rvm gems ruby 2 3 4 gems railties 5 1 4 lib rails initializable rb 30 in run' from home riccardo rvm gems ruby 2 3 4 gems railties 5 1 4 lib rails initializable rb 59 in block in run initializers' from home riccardo rvm rubies ruby 2 3 4 lib ruby 2 3 0 tsort rb 228 in block in tsort each' from home riccardo rvm rubies ruby 2 3 4 lib ruby 2 3 0 tsort rb 350 in block 2 levels in each strongly connected component' from home riccardo rvm rubies ruby 2 3 4 lib ruby 2 3 0 tsort rb 431 in each strongly connected component from' from home riccardo rvm rubies ruby 2 3 4 lib ruby 2 3 0 tsort rb 349 in block in each strongly connected component' from home riccardo rvm rubies ruby 2 3 4 lib ruby 2 3 0 tsort rb 347 in each' from home riccardo rvm rubies ruby 2 3 4 lib ruby 2 3 0 tsort rb 347 in call' from home riccardo rvm rubies ruby 2 3 4 lib ruby 2 3 0 tsort rb 347 in each strongly connected component' from home riccardo rvm rubies ruby 2 3 4 lib ruby 2 3 0 tsort rb 226 in tsort each' from home riccardo rvm rubies ruby 2 3 4 lib ruby 2 3 0 tsort rb 205 in tsort each' from home riccardo rvm gems ruby 2 3 4 gems railties 5 1 4 lib rails initializable rb 58 in run initializers' from home riccardo rvm gems ruby 2 3 4 gems railties 5 1 4 lib rails application rb 353 in initialize ' from home riccardo git ror5 pasta pasta config environment rb 5 in top required ' from config ru 4 in require relative' from config ru 4 in block in main ' from home riccardo rvm gems ruby 2 3 4 gems rack 2 0 4 lib rack builder rb 55 in instance eval' from home riccardo rvm gems ruby 2 3 4 gems rack 2 0 4 lib rack builder rb 55 in initialize' from config ru 1 in new' from config ru 1 in main ' from home riccardo rvm gems ruby 2 3 4 gems unicorn 4 9 0 lib unicorn rb 48 in eval' from home riccardo rvm gems ruby 2 3 4 gems unicorn 4 9 0 lib unicorn rb 48 in block in builder' from home riccardo rvm gems ruby 2 3 4 gems unicorn 4 9 0 lib unicorn http server rb 768 in build app ' from home riccardo rvm gems ruby 2 3 4 gems unicorn 4 9 0 lib unicorn http server rb 137 in start' from home riccardo rvm gems ruby 2 3 4 gems unicorn 4 9 0 bin unicorn 126 in top required ' from home riccardo rvm gems ruby 2 3 4 bin unicorn 22 in load' from home riccardo rvm gems ruby 2 3 4 bin unicorn 22 in main ' from home riccardo rvm gems ruby 2 3 4 bin ruby executable hooks 15 in eval' from home riccardo rvm gems ruby 2 3 4 bin ruby executable hooks 15 in main ' System configuration Rails version 5 1 4 Ruby version tried 2 3 4p301 and 2 2,,"y-yagi,Edouard-chin",2018-02-08 22:12:27,2018-02-08 23:57:10
PR,Fix test counter cache with touch and lock version failure,L1043 Related to daf15f58b943d85d8fb726590ae94f77ca0a5d5f r,,"bogdanvlviv,kamipo,bogdanvlviv",2018-02-07 09:36:07,2018-02-09 00:43:34
IS,5 2 0 rc1 Rails cache fetch raise TypeError no dump data is defined for class Proc,Steps to reproduce When update Rails to 5 2 0 rc1 When I remove order weight asc id desc rails cache can run correctly And when I rollback to 5 2 0 beta2 rails cache also can run correctly even if order weight asc id desc exist System configuration Rails version 5 2 0 rc1 Ruby version ruby 2 4 0p0 2016 12 24 revision 57164 x86 64 darwin16,,fatkodima,2018-02-08 05:30:39,2018-02-09 00:58:18
PR,Fix marshaling of models with has many through associations,Fixes Regression was introduced in r,,fatkodima,2018-02-08 14:17:34,2018-02-09 00:58:18
IS,Rails5 2 0 rc1 TypeError is not a class module,Steps to reproduce System configuration Rails version 5 2 0 rc1 Ruby version ruby 2 4 1p111 2017 03 22 revision 58053 x86 64 darwin16,,"composerinteralia,kamipo",2018-02-09 03:25:43,2018-02-09 07:25:04
PR,Use heredoc with credentials template,Summary Use heredoc with credentials template Fix indentation for aws config,,"yhirano55,y-yagi,y-yagi,yhirano55,y-yagi,kaspth,y-yagi",2018-02-09 01:44:21,2018-02-09 07:59:46
IS,Reload does not refresh the object only the data,Steps to reproduce Create and migrate model with attr accessor System configuration Rails version 'rails' ' 5 1 4' Ruby version ruby 2 5 0,,y-yagi,2018-02-09 12:04:11,2018-02-09 12:58:56
PR,Attachable from url or URI HTTP or URI HTTPS,Summary I thought it is nice for us to be able to attach from url,,"yhirano55,georgeclaghorn,yhirano55",2018-02-09 12:29:33,2018-02-09 13:50:19
PR,Document combine options,Summary This adds documentation for combine options in ActiveStorage is Variation proxy for MiniMagick Turns out this is still undocumented functionality after my PR that introduced it,,"eileencodes,eileencodes,eileencodes",2018-02-07 22:00:34,2018-02-09 14:18:12
PR,Add Relation pick as short hand for single value plucks,Pick the first value from the named column in the current relation This is short hand for relation limit 1 pluck column name first and is primarily useful when you have a relation that is already narrowed down to a single row Just like pluck pick will only load the actual value not the entire record object so it is also more efficient The value is again like with pluck typecast by the column type,,"dhh,kamipo,composerinteralia,matthewd,dhh,dhh,bogdan,rafaelfranca,bogdan",2018-02-09 01:42:08,2018-02-09 18:30:20
IS,Record not found if relation is empty on an M N relation,Steps to reproduce System configuration ActiveRecord 4 2 8 Ruby version 2 3 1,,georgeclaghorn,2018-02-09 12:04:27,2018-02-09 19:09:34
PR,Backport 31942 to 5 2 stable,r yagi,,yhirano55,2018-02-09 22:04:19,2018-02-09 22:09:09
PR,Remove warning from 4 years ago ci skip,config initializers assets rb has been a part of Rails apps since Rails 4 2 diff d8d3aae5c0da726d02fd2978256ff6a9R36 This comment is probably unnecessary by now,,claudiob,2018-02-10 00:54:35,2018-02-10 00:55:06
IS,Polymorphism object with tap,Steps to reproduce Expected behavior System configuration Rails version Rails 5 1 4 Ruby version ruby 2 4 0p0 2016 12 24 revision 57164 x86 64 darwin16,,"fatkodima,georgeclaghorn",2018-02-10 00:57:39,2018-02-10 02:23:01
IS,ActiveRecord where method dose not work,When use where with association it sometimes seems to ignore where For example I prepare 3 models below In above code when use map where is ignored In 2 case to sql method returns same results And count method returns expected SQL query But map returns SQL query as if where is ignored,,matthewd,2018-02-10 04:31:39,2018-02-10 04:44:47
IS,Select nil and select false do not chain with more selects,Steps to reproduce Both select nil and select false work fine by themselves or chained with other query methods in the sense that they are just ignored System configuration Rails version 5 1 4 Ruby version 2 4 2,,matthewd,2017-11-05 20:52:59,2018-02-11 09:07:11
PR,sanitize empty and nil parameters to select 31059,Fixes 31059,,"kaspth,matthewd",2017-11-12 12:06:54,2018-02-11 09:07:11
PR,Establish a connection with all available configurations,Hello This pull request is a sort of follow up to the following ones 24965 24844 28095 This patch is split into 2 commits which should be self explanatory In a nutshell though the first commit attaches the original environment to the connection because 3 level configuration may be used but not by all environments and we do not want to open useless connections The second one make Active Record to create a connection pool for each available connection for the current environment This is not acceptable as is but I took the liberty to open a discussion as I wanted to use the 3 level deep configuration flavour in an application but was not able to do it easily Also as discussed in 24844 connection specification name should be used rather than directly relying on establish connection at the model level There are several things to consider Maybe people want to control the way the pools are created and it should be easy to opt out from the behavior this PR introduces At the moment we do not have any documentation for working with multiple connections databases Something like this could be interesting but is too specific to be added to a guide and too tiny to constitute a whole guide unless we go really in depth I did not write any test because there seems to be no tests for resolve all and I do not know whether this behavior is acceptable at all Let me know what do you think about this Have a nice day,,"robin850,robin850",2017-06-05 22:32:37,2018-02-11 18:16:19
IS,Validations can be bypassed when calling save,Steps to reproduce 1 rails new testapp 2 rails g scaffold user name 3 rake db migrate 4 Add validates name presence true to app models user rb 5 rails c Expected behavior 1 Inform about incorrect usage 2 Ignore silently As per spec there is no way to bypass validations And I guess having it defeats the purpose of the method entirely L49 Actual behavior Saves a record System configuration 5 1 4 Ruby version ruby 2 2 7p470,,"rafaelfranca,rafaelfranca",2018-02-11 21:12:37,2018-02-11 22:35:14
PR,Respect force option for config master key,This is similar to 30700 which ensures the quiet option of rails new is respected by the MasterKeyGenerator missing from 30067 Before this commit running rails new app force would still prompt the user what to do with the conflict in config master key The newly added test generates an app and then generates it again with force Without this commit the test would just wait forever for user input,,"claudiob,claudiob,y-yagi,claudiob,y-yagi,claudiob",2018-02-11 19:37:49,2018-02-11 22:49:38
PR,Fix marshaling of models with has many through associations,This is a missing backport of into 5 2 stable,,fatkodima,2018-02-11 20:10:53,2018-02-12 00:30:14
PR,Missing parentheses ci skip,,,"ydakuka,kamipo,ydakuka",2018-02-12 06:15:27,2018-02-12 06:35:52
IS,Missing Component on links with remote true Rails UJS,Steps to reproduce application js require jquery3 require jquery ui require rails ujs require turbolinks require foundation require wice grid require select2 require tree document on 'turbolinks load' function document foundation ' data app dashboard toggle shrink ' on 'click' function e e preventDefault this parents ' app dashboard' toggleClass ishrink medium' toggleClass ishrink large' Guidelines for creating a bug report are available here creating a bug report Expected behavior Tell us what should happen on click of links with remote true should work properly without throwing any js errors Actual behavior Tell us what happens instead On click of links with remote true it always throws missing component error in js System configuration Rails version 5 1 4 missing component Ruby version 2 4 2,,y-yagi,2018-02-12 03:19:04,2018-02-12 11:30:41
IS,Model generator with polymorphic references creates invalid migration file,Steps to reproduce 1 Create a new rails application rails new gen 2 Use an example from rails g model output Which is rails generate model product supplier references polymorphic index Expected behavior Generated migration show have the following content System configuration Rails version 5 2 0 rc1 Ruby version ruby 2 4 1p111 2017 03 22 revision 58053 x86 64 darwin16,,bogdanvlviv,2018-02-12 10:10:10,2018-02-12 11:56:43
IS,Unable to skip before commit callback,In model I have,,"fatkodima,y-yagi",2018-02-08 17:32:45,2018-02-12 12:06:20
PR,Improve wording in getting started guide,Summary Updates some awkward wording about updating an article object Adds missing Oxford commas Updates several URLs to https Upcase CSS,,matthewd,2018-02-10 06:32:14,2018-02-12 14:08:15
PR,Provide an unescaped version of the body for tests,Summary The issue I am facing is during my request tests when I am writing an assertion like expect response body to include O' Reilly the body of the response is of course escaped This brings to the issue that following testing guides I have to escape my expected text or unescape the body expect CGI unescapeHTML response body to include O' Reilly or expect response body to include CGI escapeHTML O' Reilly This means including un necessary code to my tests and polluting them with non necessary calls to escape or unescape functions which generate noise The situation gets even worse when using FactoryBot which generates from time to time names with characters which get escaped bringing us to the situation of having tests that randomly fail My Pull Request is a proposal to have an additional field that we can use so that we can always call expect response body html to include O' Reilly and not care anymore about escaping unescaping This solution I propose here is a backward compatible solution with the addition of a new method but I would rather prefer to override the body method and add an escaped body method which returns the body of the request this solution would have the advantage of being able to use a much more clear expect response body to include O' Reilly and only use the unescaped body method in particular cases however this has the disadvantage of introducing a breaking change I would like a feedback if you think this change would be useful and in which direction I should proceed in that case I will proceed by completing my Pull Request with all the necessary tests and stuff Thanks for your time,,"rafaelfranca,matthewd",2018-01-25 16:08:59,2018-02-12 16:13:43
IS,rails new app skip coffee cause LoadError when using gem 'rails' github 'rails rails',When I rails generate app with skip coffee it will cause Page is render with LoadError cannot load such file coffee script System configuration Ruby version ruby 2 5 0p0 2017 12 25 revision 61468 x86 64 darwin17 So I am just curious whether this is a bug or something wrong with my configuration,,eugeneius,2018-02-12 16:23:43,2018-02-12 17:45:29
PR,ActiveStorage use full class names when including concerns to avoid collisions,Analyzable Identifiable Representable constants can refer to other classes in the application and thus the full name should be used As an example when using the representable gem the wrong module gets included and it is making some important ActiveStorage features not available,,eugeneius,2018-02-12 15:51:36,2018-02-12 20:04:39
IS,Expiring S3 URLs and HTML Emails,Probably not a bug but is there any way to prevent prevent ActiveStorage is S3 URLs from expiring Or does ActiveStorage provide a method for obtaining the true S3 bucket URL I am using ActiveStorage and S3 to manage images used for HTML emails It works great immediately after the email is created However the next day all of the image URLs in the email message are broken I am using the service url method to obtain the image like this art related image variant resize 500x500 processed service url Rails version Rails 5 2 Ruby version,,rafaelfranca,2018-02-12 12:35:01,2018-02-12 20:06:05
PR,Change structure in the AS core extensions guide ci skip,Summary First we generate without a default value and then with it,,ydakuka,2018-02-12 20:33:33,2018-02-12 20:37:46
IS,5 1 5 rc1 after commit on update still does not work,Hi I have noticed that this bug was not fixed yet but there is a PR for it Is there any chance to merge this before the final release cc Thanks,,"claudiob,rafaelfranca",2018-02-05 22:24:12,2018-02-12 20:38:20
PR,Typo in new RedisCacheStore docs,In the edge documentation I found that the wrong keyword is used for this parameter Instead of cache false it should be compress false Thanks,,"rafaelfranca,jeremy",2018-02-12 14:45:15,2018-02-12 20:50:52
IS,EventedFileUpdateChecker makes things slow when watching missing directories,When EventedFileUpdateWatcher is instructed to watch a directory which does not exist it will find a parent directory which does and watch that One of the standard directories to be watched is test mailers previews If there is no test directory at all it will watch the root of the project This could also be caused by a missing db config or admittedly unlikely app directory Listen always watches recusrively so this will watch all directories within the project This will include directories with a lot of I O like tmp db as well as directories with tons of files like vendor bundle and node modules Listen will filter out some of these and EventedFileUpdateChecker filters the rest L99 L123 but this is done in ruby costs CPU and still eats up OS limits fs inotify max user watches on Linux Steps to reproduce An easy way to reproduce is to make a new app with no test directory and run anything which does file I O within Rails root This is a nearly empty new app in a large one this can add seconds to the asset build I gist would an example here There are also potential issues due to symlinks ex in vendor bundle making Listen unhappy which are hard to avoid when Listen is set to watch everything System configuration Rails version 5 1 4 Ruby version 2 5 0,,"y-yagi,jeremy,matthewd",2018-02-10 09:37:28,2018-02-12 20:54:47
PR,delegate privately ability to delegate methods while keeping them private,Summary for delegation as public methods there is existing delegate method Actually that is my case I was at least 4 years in understanding that this works and never bothered to check it disappointed Related discussion,,albertoalmagro,2018-02-08 13:15:30,2018-02-12 21:00:19
PR,Do not update load defaults version when running app update,Incompatible settings are included in the settings set by load defaults So I think that target version should be updated by a user when becomes available and should not be updated with app update,,"y-yagi,matthewd,matthewd,matthewd,matthewd,eugeneius,y-yagi,matthewd,y-yagi,matthewd,y-yagi",2018-02-10 02:01:02,2018-02-12 22:13:39
IS,In test environment data of sqlite db are erased after system test execution,Steps to reproduce 1 setup test environment and db In my setup I have copied the db from development to test 3 Check the test db data rails s e test Browsing inside the local website I can see all data so it means test sqlite3 is populated 4 Close rails server and start rails test rails test test system system test xyz rb Expected behavior Test have to pass Actual behavior Test fails due to missing data Also found MyString instead Test data have been erased and there are only MyString string data in test DB Also If I reopen the rails server in test env I can see MyString data instead of my data If I replace again the test sqlite3 with development sqlite3 and I restart the server I can see again my data correctly Currently I am not able to run any test because each time I run a test I have my db test sqlite3 erased The magic point is that after the test run the test sqlite3 seem unchanged the memory size of test sqlite file is the same so it seems it contains all data but when I run the server I see only MyString value Looking at console if I check the table content I can see all filed to nil value except for the name field which contain MyString instead of Table element 1 System configuration I am using rails 5 1 1,,y-yagi,2018-02-12 22:03:48,2018-02-12 22:25:22
PR,Doc fixes typo cache compress,cherry pick c01c38e,,bogdanvlviv,2018-02-12 22:20:39,2018-02-12 22:30:35
PR,Change the system test default driver to Headless Chrome,Due to the ease of environmental setup at CI and the short execution time of tests I think that headless driver is appropriate as default,,"y-yagi,y-yagi,eileencodes,y-yagi",2018-02-12 23:26:57,2018-02-12 23:31:26
PR,Add ActiveStorage Blob unattached scope,One blob can be attached to multiple records with has one many attached thingy dependent false so it is needed to manually do garbage collecting of orphaned blobs when all related records are destroyed Also there is a possibility of orphaned records when for example user abandones to submit a form with attachments So it seems useful and convenient for me to have unattached scope on Blob to simplify said manual garbage collecting So GC of orphaned records within some rake task can be done r,,"fatkodima,rafaelfranca,fatkodima,rafaelfranca",2018-02-12 20:19:46,2018-02-13 01:55:24
IS,Model generator creates database migration with awkward columns types,Steps to reproduce Go to console find existing project and generate a model Model looked as expected System configuration Rails version Rails 5 2 0 rc1 Ruby version ruby 2 5 0p0 2017 12 25 revision 61468 x86 64 darwin15,,y-yagi,2018-02-13 04:45:51,2018-02-13 04:58:34
PR,Do not overwrite config master key even on force,See issuecomment 364817423 The purpose of force is not to have any prompt whether a file should be kept or overwritten In general all existing files should be overwritten However config master key is special because it is git ignored and overwriting it will cause the app not to run since there wo not be a way to decrypt the credentials As a result it is probably better to keep the existing config master key yagi Is this what you had in mind,,"claudiob,y-yagi",2018-02-13 05:56:10,2018-02-13 12:18:40
IS,Destroying all objects in through association only destroys join table,Steps to reproduce I have three models looking like this I try to destroy all managers in a city using city managers destroy all I have also created a test case using one of the templates Expected behavior I would have expected that all the managers in the city would be gone afterwards but everything else is still there Actual behavior Instead the buildings are deleted and the managers keep existing System configuration Rails version 5 1 4 Ruby version 2 3 6,,georgeclaghorn,2018-02-13 14:23:40,2018-02-13 14:37:04
IS,ActiveStorage pdf previews not working on some environments,Steps to reproduce Upload a valid pdf file and ask for a preview in a view Expected behavior Should display the previewed version Actual behavior a broken image is displayed error logs contain misleading information System configuration rails 5 2rc1 and 5 2 freeze recent debian derived os is discovered on google app engine flex env Ruby version n a Notes on debian and derived distros and probably upstream they changed the command for accessing the generate image preview of pdf file feature While mutool draw used to work apparently until 1 8 newer versions use the command mudraw Also you can not invoke as mudraw draw something along given mutools tendency to pretend all is well even when it its not at all,,"georgeclaghorn,georgeclaghorn,georgeclaghorn",2018-02-13 14:48:29,2018-02-13 15:44:53
IS,How use activestorage thought api,I am using turbolinks android and I need upload files to rails Upload with web form doesnt works very well How to upload to activestorage using JSON api,,rafaelfranca,2018-02-13 16:08:51,2018-02-13 16:47:52
IS,Add 'framework' topic to better categorize rails repository,It is a suggestion to edit the topics for the Rails repository rails repsoitory Rails does not turn up in this list but others polular frameworks like Laravel and Django does My suggestion is to add the framework topic and make it more discoverable,,rafaelfranca,2018-02-13 19:29:36,2018-02-13 19:48:53
IS,Caching behavior regression,Steps to reproduce Here is a gist with the behavior Note you will need redis running to run this script I'm not sure if it is isolated to the redis store or not I'm just trying to mirror my application as closely as possible Expected behavior When updating a record and thereby updated the updated at column it should bust the cache Actual behavior It is not busting System configuration Rails version 5 2 0 rc1 Ruby version 2 5 0,,"eugeneius,georgeclaghorn",2018-02-05 16:49:26,2018-02-14 02:46:06
IS,Fish shell is EDITOR setting does not appear to be recognized by secrets edit command,Steps to reproduce Install Fish Shell on macOS Set a value for EDITOR globally similar to set U EDITOR usr local bin mate w In a Rails project run bin rails secrets setup if necessary then run bin rails secrets edit Expected behavior The decrypted file should open in my chosen command line editor in this case TextMate Actual behavior Instead I get an error that EDITOR is not set No EDITOR to open decrypted secrets in Assign one like this EDITOR mate wait bin rails secrets edit For editors that fork and exit immediately it is important to pass a wait flag otherwise the secrets will be saved immediately with no chance to edit My shell definitely sees it though echo EDITOR usr local bin mate w I have tried adding a similar EDITOR specification to my bashrc and that definitely shows up when I open a bash shell I'm unclear where else it might need to be set though it ought to pick up the environment from the shell process executing the original bin rails command System configuration Rails version Rails 5 1 4 Ruby version ruby 2 4 1p111 2017 03 22 revision 58053 x86 64 darwin16,,,2018-02-14 03:15:06,2018-02-14 03:17:39
PR,Bump i18n to 1 0,Summary Hi Rails maintainers wave I have released i18n 1 0 today There is been a number of bugs fixed since the 0 7 x branches as well as some performance improvements The changelogs can give you more info 1 0 tagging is due to i18n now having a minimum Ruby version requirement of 2 0 I bumped the major finally because I did not want to break backwards compatibility with those on earlier Rails versions which still had this i18n 0 7 dependency but were on a version of Rails that did not have the Ruby 2 0 minimum requirement This should probably be included in a future 5 x release of Rails It is intended to be backwards compatible with any Rails version We are testing on all Rails versions since 3 0 x and our tests pass so I believe that means it will continue to work for those versions too heart,,"radar,rafaelfranca,matthewd,rafaelfranca",2018-02-14 01:55:35,2018-02-14 06:45:50
PR,Rdoc formatting fix b instead of MD style asterisks,Asterisks to bold are Markdown Rdoc uses b tags,,tjschuck,2018-02-14 17:06:11,2018-02-14 17:24:37
PR,Introduce custom serializers to ActiveJob arguments,Summary The way to serialize arguments for ActiveJob was completely reworked This PR brings an ability to define custom serializers for almost any object A developer needs just to implement a simple interface Testing 1 Clone the repo 2 Go to activejob folder 3 Download test rb and place here 4 Launch irb r lib active job rb r test rb in terminal 5 Basic test is deserialize serialize ARGUMENT ARGUMENT ARGUMENT contains all possible objects for serialization But you can experiment as you wish,,"rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,bdewater,rafaelfranca,rafaelfranca,kirs,matthewd,rafaelfranca,matthewd,rafaelfranca,rafaelfranca,matthewd,rafaelfranca,rafaelfranca",2017-10-20 13:26:52,2018-02-14 19:47:47
IS,Possible regression regarding params each in Rails 5 2 0rc1,Previously calling params each gave me an array of the key strings In Rails 5 2 0rc1 calling params each gives me an array of key value arrays This might be expected the new behavior actually makes more sense IMO but I did not see this change documented in the release notes Steps to reproduce Make a request with parameters then Now params keys each gives the same result that params each did previously System configuration Rails version 5 2 0rc1 Ruby version 2 5 0,,rafaelfranca,2018-02-14 22:53:48,2018-02-14 23:00:16
PR,Add support for connection pooling on RedisCacheStore,This was merged and then reverted due to a bug for Redis Distributed in I changed implementation to also match MemCacheStore is pool implementation for sharded data and added missing test Also looks like this will have problems with already instantiated redis object passed from user which we obviously cannot use within connection pool to instantiate new redis objects from it So some warning or error should be raised Can you and please review once again,,fatkodima,2018-02-01 21:59:34,2018-02-14 23:26:05
PR,Use require dependency inside Active Storage,Followup to see issuecomment 365618034 Active Storage is an engine which means its models jobs and controllers are autoloaded by Rails rather than Ruby Unfortunately this means it is subject to the same gotchas as applications including this one when constants aren t missed qualified references On Ruby 2 5 constants nested under classes can not be autoloaded by Rails if a top level constant already exists with the same name To avoid clashing with constants defined in users' applications or gems we can use require dependency to ensure that the nested constants are loaded before they are used r,,"eugeneius,eugeneius,rafaelfranca,eugeneius,rafaelfranca",2018-02-14 23:20:26,2018-02-15 00:32:10
PR,Add create or find by to lean on unique constraints,Attempts to create a record with the given attributes in a table that has a unique constraint on one or several of its columns If a row already exists with one or several of these unique constraints the exception such an insertion would normally raise is caught and the existing record with those attributes is sought found using find by This is similar to find or create by but avoids the problem of stale reads as that methods needs to first query the table then attempt to insert a row if none is found That leaves a timing gap between the SELECT and the INSERT statements that can cause problems in high throughput applications There are several drawbacks to create or find by though The underlying table must have the relevant columns defined with unique constraints A unique constraint violation may be triggered by only one or at least less than all of the given attributes This means that the subsequent find by may fail to find a matching record which will then return nil rather than a record will the given attributes It relies on exception handling to handle control flow which may be marginally slower And This method will always returns a record if all given attributes are covered by unique constraints but if creation was attempted and failed due to validation errors it wo not be persisted you get what create returns in such situation,,"dhh,jeremy,dhh,rafaelfranca,dhh,dhh,eugeneius,matthewd,dhh,rafaelfranca,matthewd,dhh,dhh,matthewd,matthewd,dhh,tjschuck,tjschuck,tjschuck,tjschuck,sgrif,dhh,matthewd,dhh,sikachu",2018-02-13 23:47:21,2018-02-15 00:51:15
IS,ActiveStorage should zero bytes attachments be allowed,Steps to reproduce Upload a zero bytes file no errors are raised This is almost always a end user error maybe for some particular apps they make sense but not in general Also if zero bytes user uploads are questionable zero bytes generated previews are even worse as they generally point out to some issue with the previewer class Expected behavior I would expect an exception being raised,,sikachu,2018-02-13 14:32:26,2018-02-15 00:53:06
PR,Missing backquote extra end keyword ci skip,,,"ydakuka,arunagw",2018-02-15 04:55:43,2018-02-15 05:06:13
IS,ActionCabel issue Connections cannot be established with probability,Steps to reproduce F5 to Refresh browser the code is const auction ActionCable createConsumer subscriptions create channel 'AuctionChannel' auction id '1' user id '2' connected console log ' message client connected ' disconnected console log ' message client disconnected ' Expected behavior will be show console console log ' message client connected ' when connected then show screenshot from 2017 11 08 20 57 29 Actual behavior sometimes Do not show connected log if not connect then show screenshot from 2017 11 08 20 56 54 System configuration Rails version 5 1 4 Ruby version 2 4 1,,,2017-11-08 13:11:47,2018-02-15 08:35:52
IS,how to get url image in active storage,I want to know the details of height and width from my image for css purpose So i got this package To use this package i must know the url but i dont know to get the url So how to get the absolute url in active storage thanks Expected behavior i want to know the url of the image Actual behavior System configuration Rails version Rails 5 2 0 rc1 Ruby version 2 5 0,,georgeclaghorn,2018-02-15 11:16:21,2018-02-15 15:25:29
IS,Rails 5 2 Dangerous query method called with non attribute arguments,Rails 5 2 0 rc1 Ruby 2 5 0 I'm getting a deprecation warning for sql pass through on the order method DEPRECATION WARNING Dangerous query method method whose arguments are used as raw SQL called with non attribute argument s NULLIF regexp replace penalty reports item no E' D' '' 'g' '' int penalty reports created at DESC Non attribute arguments will be disallowed in Rails 6 0 This method should not be called with user provided values such as request parameters or model attributes Known safe values can be passed by wrapping them in Arel sql The offending method is order NULLIF regexp replace penalty reports item no E' D' '' 'g' '' int direction penalty reports created at DESC It seems it does not like the insertion of the direction parameter,,georgeclaghorn,2018-02-15 18:13:00,2018-02-15 18:35:53
PR,PERF symbolize ivar to reduce dupes,I noticed this in my memory profiler report 152 copies of the string default url options are retained on the heap in Discourse post boot Since this is just used for ivar lookups there is no need to use a string,,"SamSaffron,SamSaffron",2018-02-15 07:15:05,2018-02-15 19:39:31
PR,PERF dedupe scanned route fragments,Per String will dedupe strings This takes advantage of this by deduping route fragments that are full of duplication usually For Discourse Before Total allocated 207574305 bytes 2214916 objects Total retained 36470010 bytes 322194 objects After Total allocated 207556847 bytes 2214711 objects Total retained 36327973 bytes 318627 objects object that GC can not collect So we save 3500 or so RVALUEs this way not the largest saving in the world but worth it especially for large route files,,"SamSaffron,SamSaffron,rafaelfranca,SamSaffron,SamSaffron,rafaelfranca,rafaelfranca,SamSaffron,y-yagi,SamSaffron",2018-02-15 04:03:55,2018-02-15 19:40:15
PR,Bump mysql2 version,Skip versions 0 4 8 and 0 4 9 which had Compilation failures against MariaDB Connector C 3 0 2 and gave some of us this,,utilum,2018-02-15 18:43:49,2018-02-15 20:40:07
PR,Hash from xml handle argument errors,It is able to handle invalid values for custom types like for example invalid dates table field type date a invalid date field table I understand that this is not a valid XML but it is a real case anyway that could be parsed with Hash from xml,,rafaelfranca,2018-02-15 20:37:15,2018-02-15 20:45:57
IS,Very minor suggestion method alias on Object presence,I was just wondering if there was any support for aliasing Object presence to Object if present The code sample reads a lot better to me using that name It reads like use this if it is present or this if it is present or 'US',,rafaelfranca,2018-02-15 14:24:39,2018-02-15 20:47:21
IS,All tests are run and fail if fixtures fail database constraints regression from 5 1 4,Steps to reproduce I made a quick app here Guidelines for creating a bug report are available here creating a bug report Expected behavior Running rails test should fail immediately if fixtures fail database constraints Actual behavior All tests are run and fail due to database constraints img width 1267 alt screen shot 2018 02 14 at 8 42 30 pm src System configuration Rails version 5 1 5 Ruby version 2 5 0,,y-yagi,2018-02-15 04:35:24,2018-02-15 23:49:39
IS,store accessor fields callback validations run in wrong order,Steps to reproduce It seems to me that if an object validation fails callback for after validation should not be run Is this not the case System configuration Rails version 5 1 4 Ruby version 2 5 0,,y-yagi,2018-02-15 17:08:47,2018-02-16 12:47:27
IS,ActionDispatch RequestId make request id strips characters used by common request ID modules,While using Apache Passenger we pass a request ID to our app using mod request id This library uses the symbol as part of its alphabet as documented in this paragraph The UNIQUE ID environment variable is constructed by encoding the 144 bit 32 bit IP address 32 bit pid 32 bit time stamp 16 bit counter 32 bit thread index quadruple using the alphabet A Za z0 9 in a manner similar to MIME base64 encoding producing 24 characters The MIME base64 alphabet is actually A Za z0 9 however and need to be specially encoded in URLs which makes them less desirable The make request id method removes the symbol from any request ID passed through X Request Id L31 Any chance make request id could be loosened up a bit to accommodate request IDs generated by this common library,,y-yagi,2018-01-05 21:57:15,2018-02-16 12:52:41
PR,Parallel testing,tenderlove and I worked on this which adds parallel testing to Rails applications by default New applications will have parallel testing enabled by default and older applications can add it to their test helper To do x Documentation x Guides x CHANGELOG cc,,"eileencodes,bogdanvlviv,bogdanvlviv,bogdanvlviv,bogdanvlviv,bogdanvlviv,eileencodes,eileencodes,eileencodes,simi,tjschuck,tjschuck,tjschuck,eileencodes,eileencodes,simi,eileencodes,bogdanvlviv,tenderlove,eileencodes,yuki24,eileencodes,eileencodes,eileencodes",2018-02-05 18:55:32,2018-02-16 13:09:03
IS,pixeltrix great solution,Steps to reproduce Guidelines for creating a bug report are available here creating a bug report Expected behavior Tell us what should happen Actual behavior Tell us what happens instead System configuration Rails version Ruby version,,,2018-02-16 15:26:25,2018-02-16 15:27:42
PR,ActiveStorage file cleanup in Integration Tests,ci skip Summary Documents ActiveStorage file cleanup in Integration Tests which is similar but slightly different than the existing docs for System Tests,,eileencodes,2018-02-15 21:34:49,2018-02-16 16:17:52
PR,PERF reduce retained objects in Journey,Before Total allocated 209050523 bytes 2219202 objects Total retained 36580305 bytes 323462 objects After Total allocated 209180253 bytes 2222455 objects Total retained 36515599 bytes 321850 objects Modest saving of 1612 RVALUEs in the heap on Discourse boot,,"SamSaffron,schneems,rafaelfranca,SamSaffron",2018-02-16 02:34:04,2018-02-16 16:18:58
PR,Use secure link to security policy,Summary Trivial URL fix,,"jeremy,jeremy",2018-02-17 00:50:48,2018-02-17 01:33:30
PR,Remove needless requiring 'active support core ext string strip',Summary active support core ext string strip was added on 31942 strip heredoc was removed on But it still remains require active support core ext string strip statement,,yhirano55,2018-02-17 02:12:19,2018-02-17 02:57:13
IS,Possible regression of HWIA transform keys in rails 5 2 0 rc1,Steps to reproduce 1 Use ruby 2 5 0 1 Create an instance of HashWithIndifferentAccess 1 Convert keys to Symbol Expected behavior Return some value if given key exists in String and Symbol In example above hsh 'b' and hsh b should return 1 Actual behavior Return nil I think than since this commit diff 9f4b3d7342097a6f22290f147a09b77b HWIA transform keys returns a HWIA but it uses ruby is Hash transform keys on ruby 2 5 0 System configuration Rails version Rails 5 2 0 rc1 Ruby version ruby 2 5 0p0 2017 12 25 revision 61468 x86 64 darwin15,,rafaelfranca,2018-02-15 12:48:26,2018-02-17 03:00:37
IS,Array routing constraints do not work,Steps to reproduce When I have this routing code Then my GET de request works fine and routes to home index I believe this feature was originally added here System configuration Rails version 5 2 0 rc1 Ruby version 2 4 3,,"claudiob,fatkodima",2018-02-15 19:28:04,2018-02-17 03:03:40
PR,Fix array routing constraints,Fixes,,fatkodima,2018-02-16 23:46:30,2018-02-17 03:03:40
IS,include on one line shows different behavior than separate include statements,This is going to sound impossible but I ran it by and he agreed that it sounded like a bug It seems hard to believe that it could be a bug in Ruby after all these years of usage so I thought I would start here first since I discovered it when writing some Rails tests Run the following in a Rails console As you can see the only difference between these two is a one line include statement vs two separate calls As I dug into this I found that ActiveModel Validations Callbacks run callbacks is supposed to override ActiveModel Validations run callbacks When I stepped through in the debugger the overriding version declared in Callbacks is never called it only enters the original definition in Validations Expected behavior Both versions should output Callback in the console Actual behavior Only the WorkingInclude instance outputs Callback the other just outputs true System configuration Rails version 5 1 4 Ruby version 2 5 0,,"rafaelfranca,rafaelfranca,rafaelfranca",2018-02-16 19:27:55,2018-02-17 03:14:30
PR,Use SuppressedSummaryReporter and Rails TestUnitReporter only if needed,Summary Rails Minitest plugin should add SuppressedSummaryReporter only for replacing SummaryReporter and Rails TestUnitReporter for ProgressReporter Currently the plugin always add these two reporters without checking if it is necessary For example kern minitest reporters can remove all reporters and set custom ones defined by the configuration Currently rails will re add reporters without checks,,"y-yagi,y-yagi,matthewd,rafaelfranca",2018-02-05 20:08:22,2018-02-17 03:37:24
PR,Fix custome serializer setting,The serializer should be set up in after initialize so that it work properly even if the user specifies serializer with initializers Also since custom serializers is Array it needs to be flattened before setting the value,,y-yagi,2018-02-15 07:03:46,2018-02-17 05:09:24
PR,Rails 6 requires Ruby 2 3,And eventually Ruby 2 4,,"jeremy,mtsmfm,matthewd",2018-02-17 01:18:12,2018-02-17 18:03:38
PR,Remove extra conditions in HWIDA since Rails 6 does not support Ruby 2 2,See Originally I sent patch to in order to merge this with but was unnoticed Could you please review,,"bogdanvlviv,bogdanvlviv,jeremy",2018-02-17 18:16:30,2018-02-17 21:09:32
PR,Deprecate update attributes and update attributes,update attributes and update attributes have been aliases for update and update since in 2013 That PR says it was a soft deprecation and that the longer method names would be removed in the future This would be a desirable change because 1 It makes application code easier to read by reducing confusion with update attribute update attribute and 1 The more direct names help new users understand that these are the normal ways to modify attributes of an Active Record object Is this still the intention update attributes is still used in a few tests and one place in ActiveRecord InternalMetadata and mentioned in the AR Callbacks guide I can change them to the newer forms in this PR if that is the goal,,"sikachu,rafaelfranca,jeremy,sgrif",2018-02-15 03:07:29,2018-02-17 22:01:34
PR,Improve git is goods,Improve gitignore Remove actionpack test tmp gitignore Create activerecord gitignore Clean up gitignore Move activerecord sqlnet log to activerecord gitignore Remove activerecord examples gitignore Move activerecord test gitignore to activerecord gitignore Move activerecord test fixtures gitignore to activerecord gitignore Remove activemodel test fixtures fixture database sqlite3 from gitignore Create activesupport gitignore Clean up gitignore Move activesupport test fixtures isolation test to activesupport gitignore Improve railties gitignore Clean up gitignore Move railties test 500 html railties test fixtures tmp railties test initializer root log and railties tmp to railties gitignore Remove redundant railties doc from gitignore because it is covered by doc Improve actionview gitignore Move actionview log to actionview gitignore Add package lock json to gitignore Move actionview test ujs gitignore to actionview gitignore Move actionview test fixtures public gitignore to actionview gitignore Express the folders in actioncable gitignore Clean up activestorage gitignore Remove byebug history and node modules because it is ignored by gitignore Move activestorage test service configurations yml to activestorage gitignore Remove actionview test tmp keep Related to 11743 30392 I do not think that it is a good idea to have a lot of gitignore files on a project like activerecord examples gitignore because it is hard to manage it I see as a good pattern in this project to have gitignore for common things and gitignore for things that belong only this module,,"bogdanvlviv,lugray,bogdanvlviv,matthewd,bogdanvlviv,matthewd,bogdanvlviv",2017-07-28 08:11:45,2018-02-17 22:35:07
PR,Remove require Object blank monkey patch,I'm writing a Hanami app that interacts with the Twitter API Their API returns timezones for users in the Rails timezone strings rather than IANA I can add ActiveSupport as a dependency and use its timezone functionality to translate to IANA But there was this lingering at the top which I would like to avoid adding to my project code base Object blank is not used in this file anymore it was when it was added of course This avoids a monkey patch for those of us who just want this isolated feature of ActiveSupport,,"cllns,jeremy",2018-02-17 23:11:23,2018-02-17 23:34:08
PR,Rails 6 requires Ruby 2 4 1,References 32028 Skipping over 2 4 0 to sidestep the symbol from string to sym dup bug cc,,"jeremy,matthewd,jeremy,jeremy",2018-02-17 21:12:22,2018-02-17 23:34:59
PR,Fixes typos,Fixes few typos,,"dharamgollapudi,jeremy",2018-02-18 00:01:58,2018-02-18 00:03:26
PR,Use stopgap 13632 on Ruby 2 2 again,Followup to This conditional was not updated when we moved to Ruby 2 2 9 on Travis which meant that the workaround was no longer active and we started to see spurious IOError s again,,"eugeneius,kamipo,eugeneius,eugeneius,matthewd,eugeneius,matthewd",2018-02-10 21:58:28,2018-02-18 00:14:41
IS,Wrong output for rake routes,Steps to reproduce Controller But in controller still right parameter params category id System configuration Rails version Rails 5 1 1 Ruby version ruby 2 4 1p111,,"y-yagi,y-yagi",2018-02-01 14:26:42,2018-02-18 01:59:43
IS,Unable to access main app secrets from Rails engine initializer,Steps to reproduce Create a Rails main app Create Rails mountable engine Mount engine in main rails app Edit the secrets yml in main app Expected behavior Engine initializer should be able read Rails application secrets from main app Actual behavior The variables set in engine initializer are set to nil It works fine in models and controllers but not in initializer Ref System configuration Rails version 5 1 4 Ruby version 2 3 1,,"kaspth,y-yagi,y-yagi",2017-12-14 02:12:11,2018-02-18 02:01:00
IS,ActiveStorage fails when a model concern Identifiable exists,Steps to reproduce When you have a model concern in your app with the same name as one of the three included in ActiveStorage Blob an error may occurs In my case I have a the following concern Expected behavior My model should be saved and the files uploaded Actual behavior I get the error undefined method 'first name' for ActiveStorage Blob 0x00007f87d0132388 which is triggered by the validation in my concern System configuration Rails version 5 2 0 rc1 Ruby version 2 5 0p0,,georgeclaghorn,2018-02-18 03:15:21,2018-02-18 03:23:08
PR,Document reconnect attempts option for Redis Cache Store ci skip,Summary This PR documents the reconnect attempts option for Redis Cache Store,,jeremy,2018-02-18 04:31:08,2018-02-18 06:51:59
PR,Update bug report templates,Prepare bug report templates for Rails 6 0 development Add missing require active support in guides bug report templates generic gem rb,,"bogdanvlviv,jeremy",2018-02-18 00:44:19,2018-02-18 06:53:16
PR,String strip heredoc preserves frozenness,,,"jeremy,matthewd,jeremy",2018-02-17 23:42:56,2018-02-18 07:02:20
PR,Add code and reason parameters to websocket close method,Summary ActionCable Connection ClientSocket supports providing custom close code and reason string However classes that use it do not allow passing these parameters Could be useful when you need to provide a custom code for closing the socket,,"palkan,georgeclaghorn",2018-02-15 09:17:00,2018-02-18 07:10:58
PR,String truncate bytes,Limit to N bytes without breaking multibytes chars Can be done with foo mb chars limit n bytes but that is much slower This joins our truncate and truncate words family,,"jeremy,matthewd,javan,jeremy,amatsuda,jeremy",2016-12-10 01:14:34,2018-02-18 08:14:53
IS,ActiveJob around callbacks with method,Steps to reproduce Using example from guides 0 create the job with around perform callback defined as a method System configuration Rails version 5 1 5 Ruby version 2 4 2 There is the commit inlining around perform calls in tests but I can not see why it should not work in case it should not I can supply the fix to the guides,,"dolzenko,fatkodima,fatkodima,dolzenko",2018-02-18 12:39:04,2018-02-18 14:16:33
PR,Fix active job basics md callbacks example ci skip,Fixes,,fatkodima,2018-02-18 14:08:58,2018-02-18 14:16:34
IS,Possible regression of has many through in 5 2 0 rc1,This is a possible regression from 5 1 4 to 5 2 0 rc1 It seems to have been caused by 3acc5d6 Steps to reproduce Expected behavior SELECT tags FROM tags INNER JOIN comments ON tags comment id comments id WHERE comments post id ORDER BY tags name ASC comments content ASC Actual behavior SELECT tags FROM tags INNER JOIN comments ON tags comment id comments id WHERE comments post id ORDER BY comments content ASC tags name ASC System configuration Rails version 5 2 0 rc1 Ruby version 2 3 0,,"repinel,pixeltrix,repinel,kamipo,repinel",2018-02-15 13:59:43,2018-02-18 14:29:10
PR,5 0 stable PERF Recover marshaling dump load performance,Backport of 31827,,kamipo,2018-02-18 14:51:09,2018-02-18 16:38:05
PR,Skip generating empty CSP header when no policy is configured,Summary Rails application config content security policy is configured with no policies by default In this case Content Security Policy header should not be generated instead of generating the header with no directives Other Information Firefox also warns Content Security Policy Could not process unknown directive '',,"eagletmt,eagletmt,guilleiguaran",2018-02-18 12:52:21,2018-02-18 19:09:43
PR,More natural reading aliases for Object presence and Object presence in,Summary After having recently read about Object presence and Object presence in I thought they did not seem as readable as they could So I have added aliased methods for them Other Information In my opinion region params state if present params country if present 'US' is more readable than region params state presence params country presence 'US' Also from watching is Writing Software Well videos today I noticed he uses Object presence in like this redis set granulary key option presence in OPTIONS DEFAULT I think it is more readable with a method name tweak and if you can just add the default to the method redis set granulary key option if present in OPTIONS DEFAULT I would welcome any thoughts,,"kaspth,dhh",2018-02-18 12:34:28,2018-02-18 19:48:44
IS,ActiveRecord 5 1 5 query cache not working,Steps to reproduce Given the following MiniTest which implements a Sinatra app using ActiveRecord System configuration Rails version ActiveRecord 5 1 5 only Ruby version 2 3 4 The expected behavior is produced on version 5 1 4 correctly Is this a regression in version 5 1 5 Related to perhaps,,"y-yagi,rafaelfranca",2018-02-16 17:46:47,2018-02-18 22:16:54
PR,Use the query cache when connection is already connected,Fixes 32021,,"y-yagi,y-yagi,y-yagi,rafaelfranca",2018-02-17 08:35:12,2018-02-18 22:16:54
PR,Change AR Migration version from 5 2 to 6 0 in activestorage,I have some doubt about this change just want to know your thoughts about this Should we update AS migration every major minor release r,,"bogdanvlviv,georgeclaghorn,sikachu",2018-02-18 10:38:41,2018-02-19 00:16:16
PR,rubocop single space after assignment,,,dixitp012,2018-02-19 05:54:55,2018-02-19 06:03:13
IS,Dots are not accepted in routing path even when format false is specified on Routing,Steps to reproduce Add the following code on your routes rb System configuration Rails version 4 2 9 Ruby version ruby 2 3 1p112 I am willing to make some Pull Requests to resolve this issue,,"matthewd,pixeltrix,pixeltrix",2017-11-02 09:37:01,2018-02-19 10:16:26
IS,database yml mistery charset and broken mysql create database charset default,the database yml has an undocumented configuration parameter called charset Setting the charset in the database yml will ensure that when creating a database with this method create database method i create database the charset will be properly set up as the database default in mysql Currently this is completely undocumented and I have spent quite a few hours trying to understand why my server setting where being ignore on database creation It even gets more confusing as there is an encoding param in database yaml but it seems to be ignored basically on database create System configuration Rails version 4 x 5 x Ruby version 2 x,,"kamipo,rafaelfranca",2017-08-30 21:39:55,2018-02-19 10:16:27
PR,Do not check ActiveStorage Engine when updating to 5 2,When upgrading from 5 1 to 5 2 if the application did not require rails all ActiveStorage not be defined In that case Active Storage content is not generated regardless of whether the user wants to use or not As for the new component I think it is preferable to check whether to use it for the user but since it is not yet able to deal with it I think that it is good to forcibly generate the content,,y-yagi,2018-02-19 00:54:54,2018-02-19 12:14:05
IS,new framework defaults 5 1 rb are removed when generating a new rails app,Steps to reproduce Run rails new blahasdgggggfl Expected behavior config initializers new framework defaults 5 1 rb and config initializers cors rb files generated Actual behavior Those files are generated and then removed at the end System configuration Rails version 5 1 5 Ruby version 2 4 2p198 Comment Rails 5 0 generated new framework defaults rb why is it removed in fresh Rails 5 1 app,,y-yagi,2018-02-19 11:20:07,2018-02-19 12:20:44
IS,ActiveSupport TimeZone country zones 'GB' returns Edinburgh instead of London,Steps to reproduce It seems load country zones which is called from country zones returns the first entry from MAPPING for the country code via the tz identifier for 'GB' 'Europe London' line 271 L267 L276 And in MAPPING Edinburgh is added before London L70 L72 System configuration Rails version Rails 5 2 0 beta2 Ruby version ruby 2 4 3p205 2017 12 14 revision 61247 x86 64 darwin17,,"rafaelfranca,pixeltrix",2018-01-10 12:45:52,2018-02-19 12:30:48
PR,Return all mappings for a timezone id in country zones,Some timezones like Europe London have multiple mappings in ActiveSupport TimeZone MAPPING so return all of them instead of the first one found by using Hash value e g Fixes 31668,,"pixeltrix,pixeltrix",2018-02-19 10:38:45,2018-02-19 12:30:48
IS,A string parameter representing a datetime sometimes becomes nil when persisted to database,Steps to reproduce Update It seems to be a MM DD YYYY vs YYYY MM DD issue Given a model with this schema System configuration Rails version 5 1 5 Ruby version 2 5 0,,pixeltrix,2018-02-19 03:52:49,2018-02-19 12:51:25
IS,Teste,Steps to reproduce Guidelines for creating a bug report are available here creating a bug report Expected behavior Tell us what should happen Actual behavior Tell us what happens instead System configuration Rails version Ruby version,,,2018-02-19 14:52:53,2018-02-19 14:53:38
PR,Fix generation of empty content security policy,This reverts the changes in 32045 and fixes the issue with accidentally creating an empty policy when setting up the request The decision to generate an empty policy 1 if it is set was an explicit one to show the difference between not having a policy set and an empty policy which just uses the browser defaults It also removes the trailing semi colon so that an empty policy does not generate a console warning 1 discussion r151300536,,"pixeltrix,pixeltrix",2018-02-19 12:29:12,2018-02-19 14:55:06
PR,Avoid method redefined warnings in RouteSet NamedRouteCollection,Before Ruby 2 5 0,,"utilum,matthewd,pixeltrix,pixeltrix,utilum,pixeltrix,utilum,pixeltrix,utilum",2018-02-17 12:28:04,2018-02-19 15:04:24
PR,Add ability to add specify column null and default values from cli,This PR adds ability to specify null and default values when generating migrations from command line I have implemented syntax like in a code below using 15583 issue as a reference P S I also removed note from ruby guides but there are probably other API docs I need to change,,"pixeltrix,matthewd",2017-12-14 16:48:08,2018-02-19 15:55:46
IS,text area and text area tag always append 1 whitespace to begin of string when use Slim,text area and text area tag always append 1 whitespace to begin of string when use Slim textarea maxlength 200 name hint one id hint one Why textarea rails 5 2 stable f45a3f89ab92efc7f45bf4891f93fb38a76c6f5e slim 3 0 9 ruby 2 5,,pixeltrix,2018-02-19 15:10:05,2018-02-19 17:34:09
IS,Conflict when using Builder as concern name,Steps to reproduce 1 Define a concern named Builder for a model and declare a method in it in my case the concern is placed in the models foo builder rb file System configuration Rails version 5 0 6 Ruby version 2 4 2,,"rafaelfranca,rafaelfranca",2018-02-19 19:46:46,2018-02-19 19:54:24
IS,Cache key on 5 2 0 rc1,Steps to reproduce cache No longer includes the updated at in the cache key in 5 2 0 rc1 Expected behavior This is an example of a generated key in 5 2 0 beta2 groups show b25ce2a718e61c4980803b1b01b4d28a groups 3 20180219205350119722 Actual behavior The same command in 5 2 0 rc1 does not include the updated at and therefore is stale even though the record is updated groups show d8f81a8f744c2141d7eb53baca7d32fa groups 3 I have not enabled this line in the initializers new framework defaults 5 2 rb file Rails application config active record cache versioning true I'm using redis store,,"eugeneius,georgeclaghorn,georgeclaghorn",2018-02-19 21:14:29,2018-02-19 22:35:25
IS,ActionCable cable mount exposes unfiltered redis password on Routing Error in development mode,Steps to reproduce 1 In routes rb,,"y-yagi,y-yagi",2018-02-19 14:50:21,2018-02-19 23:29:15
PR,Switch to native unicode implementation for ruby 2 4,Summary proposes switching to native unicode implementation issuecomment 279277662 So I tried to implement that cc If we merge this PR Drop public API on Ruby 2 4 but these methods are internal use only and should be private I think in char class L71 reorder characters L143 We wo not be able to bump ActiveSupport is unicode version Ruby has its own supported unicode version and also ActiveSupport If we bump unicode version on Rails 5 2 AS Multibyte can handle chars as 10 0 0 on ruby 2 3 but 9 0 0 on 2 4 Rails Ruby version Unicode version Unicode implementation 5 1 2 3 9 0 0 Non native 5 1 2 4 9 0 0 Native 5 2 2 3 10 0 0 Non native 5 2 2 4 9 0 0 Native,,"mtsmfm,guilleiguaran,mtsmfm,mtsmfm,tenderlove,mtsmfm,kamipo",2017-02-19 06:05:55,2018-02-20 00:50:31
PR,Ensure that mini magick is absent after rails new with skip active storage,Remove redundant assertions of an absence of mini magick in Gemfile since bin rails app update does not update Gemfile This assertions was added by 4a835aa3236eedb135ccf8b59ed3c03e040b8b01 after reviewing of i realized that assertions are redundant r yagi,,bogdanvlviv,2018-02-19 23:17:50,2018-02-20 08:13:41
IS,Journey router adds single slash to request script name after mounting Engine at ' ',Steps to reproduce Given a Rails routes rb file that references an Engine This spec will fail although the get constraint in the first example works fine Expected behavior request fullpath inside the route constraint lambda should evaluate to before engine request Actual behavior request fullpath inside the second route constraint lambda evaluates to before engine request with two slashes in front Probable cause After the engine is mounted the request is SCRIPT NAME environment key is set to ' ' This only happens in ActionDispatch Journey Router recognize L70 In ActionDispatch Journey Router call it has been fixed in ages ago referencing Rails issues rails rails 2131 rails rails 2230 rails rails 2579 rails rails 5342 Also the IETF says SCRIPT NAME should be an empty string although the wording here is not entirely clear section 4 1 13 System configuration Rails version 4 2 10 and newer versions Ruby version 2 3 5,,,2017-11-14 15:28:14,2018-02-20 10:34:59
PR,Added method to generate CSV string from an Array of Hashes,Summary Added a method to csv str to generate the equivalent CSV string for an Array which can then be written to a file to generate the equivalent CSV file for the Array Other Information This method is to generate a CSV string from an Array of Hashes to create a CSV file from it The string that it returns can be written into a file to generate the equivalent CSV for the array For Example if you have an array of the details of 2 persons as below If you run the following code persons to csv str It will return the following string name email nRohit rohit abc com nAmit amit xyz com n which can then be written to a file to get the equivalent CSV file for the Array,,"simi,matthewd",2018-01-19 16:55:41,2018-02-20 11:04:23
IS,Query params are lost on a test with body,Steps to reproduce Write a controller test like so put my path params path param x query param y body body param z to json as json Expected behavior query param should be available on the params on the controller This can be worked around by putting the query param in the body or removing the body completely and adding it to params but that creates a difference between test and application Actual behavior path param and body param are available on the strong params object but query param does not exist in that hash System configuration Rails version 5 1 4 Ruby version 2 4 1,,pixeltrix,2018-02-20 10:17:09,2018-02-20 11:13:54
IS,Duplicated js files content from public server,Steps to reproduce Here is a sample with the error 1 Start the server rails s 2 Open your chrome network tab 3 Enable Disable cache 4 Enable Slow 3G network throttling image 5 Hit Refresh 6 Before angular or main d90603e7e9c46c1577d5 bundle js get completely loaded 6 1 Disable Disable cache image 6 2 Hit Refresh again 7 Wait until the js files load partially Be sure to not load them completely image 8 Keep hiting refresh and loading these two files partially 9 Now two things can happen If you successfully duplicated the files 9 1 And keep hitting refresh at one moment the files are going to throw error 9 2 If you load them completely they will throw error image 9 3 I believe that there is something wrong in the file size calculation in Content Range header image 10 The error will change depending with the duplication 11 If you hit refresh now with Disable cache Disabled then the error does not leave 11 1 Note that files are loaded from Memory cache image 12 This also happen with only one file I just left two for isolating the cause to rails public server Expected behavior Files should not get duplicated Actual behavior The js files get duplicated like and they start throwing errors after this happened the browser caches them so its impossible for the end user to recover from that state image System configuration Rails version rails 5 1 2 Ruby version ruby 2 4 1p111,,"pixeltrix,pixeltrix",2018-02-20 12:20:46,2018-02-20 15:44:27
IS,Active Storage s3 service requires s3 ListBucket premission for exists,Steps to reproduce Use active storage variants on S3 when you have s3 GetObject but no s3 ListBucket permission Expected behavior Tell us what should happen I would expect active storage to work with only s3 GetObject permissions Actual behavior Tell us what happens instead Following error is raised System configuration Rails version Rails 5 2 0 beta2 Ruby version ruby 2 4 0p0,,"pixeltrix,pixeltrix,pixeltrix",2018-02-20 08:45:52,2018-02-20 17:44:04
PR,Improve ActiveJob custom argument serializers 30941,Add argument serializer TimeWithZoneSerializer The serializer serializes an instance of ActiveSupport TimeWithZone The serializer deserializes value to ActiveSupport TimeWithZone if possible Fix docs of ActiveJob custom argument serializers Add nodoc to ActiveJob Serializers Add doc to ActiveJob Serializers ObjectSerializer klass Express ActiveJob Serializers ObjectSerializer klass as private method Fix error message about unknown ActiveJob argument serializer s Express ActiveJob Serializers ObjectSerializer klass as private method s s We do not use any benefits of protected in this case s s Make more strict condition of choosing of ActiveJob argument serializer s s Use instance of instead of is a to remove dependance on order of argument serializers in additional serializers I changed order of adding custom argument serializers in order to express the issue and ensure that it is solved Example of the issue s s Use serialize instead of klass in SerializersTest DummyValueObject since klass is more look like private API s Related to 30941 fa9e791 r,,"bogdanvlviv,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,bogdanvlviv,bogdanvlviv,bogdanvlviv,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,bogdanvlviv",2018-02-16 23:56:59,2018-02-20 18:35:35
IS,DEPRECATION WARNING Ruby 2 4 required by Rails 6 provides Hash transform values natively so requiring active support core ext hash transform values is no longer necessary Requiring it will raise LoadError in Rails 6 1,Steps to reproduce rails s Expected behavior start server Actual behavior started server with DEPRECATION WARNING Ruby 2 4 required by Rails 6 provides Hash transform values natively so requiring active support core ext hash transform values is no longer necessary Requiring it will raise LoadError in Rails 6 1 System configuration Rails version Rails 6 0 0 alpha Ruby version ruby 2 5 0p0 2017 12 25 revision 61468 x86 64 darwin17,,"claudiob,matthewd,claudiob,claudiob",2018-02-21 01:22:44,2018-02-21 04:55:11
PR,CI with jruby head compatible with Ruby 2 4 1,Summary Since 32034 Rails 6 requires Ruby 2 4 1 or higher Two CI jobs configured with the latest version of jruby 9 1 15 0 compatibile with Ruby 2 3 3 are getting errors Other Information Instead of running CI with jruby head there could be other way to just dropping CI with JRuby 9 1 x and add CI with JRuby 9 2 once it is generally released,,"yahonda,yahonda,yahonda,yahonda,headius,headius,yahonda,headius,headius,yahonda,yahonda",2018-02-20 01:32:03,2018-02-21 10:25:33
IS,ActiveRecord Rollback has no effect with collection create,Steps to reproduce In a controller trigger a creation in a has many collection model collection create and in the collection model raise ActiveRecord Rollback Expected behavior A rollback must be executed and I should see ROLLBACK in logs Actual behavior No rollback the model get persisted and there is not ROLLBACK in logs If I invert the object creation with CollectionModel create model and raise ActiveRecord Rollback the rollback occurs System configuration Rails version 5 1 0 beta1 Ruby version 2 4 1p111,,eileencodes,2017-04-22 18:54:45,2018-02-21 10:44:14
IS,Param types differ in integration Tests,Steps to reproduce 1 Clone example app git clone 2 Start server and hit POST authors curl H Content Type application json X POST d ' values 123 ' 3000 authors When I print param values in controller L4 I get array of integers 123 3 Quit server hit integration test for same endpoint Test Code L5 rails test When I print param values in controller I get array of strings 123 Guidelines for creating a bug report are available here creating a bug report Expected behavior 123 Actual behavior 123 System configuration Rails version 5 1 5 Ruby version 2 5 0,,pixeltrix,2018-02-21 15:10:53,2018-02-21 17:06:48
PR,Delete default configuration,Because of this default configuration we are constantly checking if the database exists when looping through configurations This is unnecessary and we should just delete it before we need to loop through configurations,,"eileencodes,eugeneius,eileencodes,eileencodes,eileencodes",2018-02-21 19:44:19,2018-02-21 21:32:32
IS,ActiveStorage throws NoMethodError when using MiniMagick is format,According to Active Storage is guide it supports all of MiniMagick is transformations MiniMagicks' first usage example is one combining resize and format However format is the only transformation I could not get to work so far Rotate crop resize all worked fine Steps to reproduce 1 Attach a png image 2 Request a variant variant format JPEG Expected behavior A JPEG variant is generated Actual behavior Rails throws a NoMethodError System configuration Rails version 5 2 0 rc1 Ruby version 2 4 3 and 2 5 0 MiniMagick version 4 8 0 Relevant Code,,georgeclaghorn,2018-02-19 23:45:06,2018-02-21 22:48:19
IS,5 2 0 rc1 controller generator outputs duplicate route namespace block when one already exists,Steps to reproduce rails new routebug api skip active record skip test cd routebug rails g controller api ones,,"pixeltrix,y-yagi,pixeltrix,y-yagi",2018-02-21 14:18:25,2018-02-21 23:43:00
PR,Call methods with method name not method name,Found several instances Follow up on 63d530c5e68a8cf53603744789f53ccbc7ac1a0e,,"utilum,sikachu,utilum,pixeltrix,sikachu,pixeltrix",2018-02-21 23:42:24,2018-02-22 06:15:12
IS,video tag helper returns incorrect HTML attributes,controls autoplay muted and loop are all binary attributes however the video tag helper returns them as strings in the HTML Steps to reproduce You may need to configure your assets rb to precompile videos from app assets 1 Add a video to your project under app assets videos 1 Use the video tag helper documented here method i video tag to insert the video into a view 1 Specify controls true in the helper like video tag 'video mp4' controls true Expected behavior Output HTML should be System configuration Rails version 5 1 0 Ruby version 2 4 1,,"bogdanvlviv,matthewd",2018-02-22 09:41:23,2018-02-22 10:51:54
PR,Bugfix activejob improper serialization and deserialization of scheduled at,Summary ActiveJob was not serializing and deserializing scheduled at properly Other Information We use ActiveJob with DelayedJob as adapter And we are scheduling job in advance for monitoring purpose However scheduled at value is always missing once because it is not even serialized and also not deserialized as well if given To achieve that currently we are monkey patching the ActiveJob Core This PR fix the issue,,"pixeltrix,pixeltrix",2018-02-21 12:03:47,2018-02-22 11:22:27
IS,Form input type tel takes anything your can type text as input and allows to submit with our throwing error,Steps to reproduce Create a rails form with input type as tel telephone number and try entering character in it Expected behavior should throw error if is not a number on client side only with out any regex Actual behavior Allow to submit everything including numbers System configuration Rails version 4 0 Ruby version 2 1,,pixeltrix,2018-02-22 11:17:29,2018-02-22 11:34:34
PR,Properly escape column name embedded into regexp,SQLServerAdapter gem activerecord sqlserver adapter uses square brackets for quoting column names e g id Those brackets must not be misinterpreted in regular expressions Failure observed when running the AR test suite against that adapter,,,2018-02-22 13:36:58,2018-02-22 14:22:32
IS,Is it to possible wildcards on the route system for everything except one pattern,This is not a bug but more something I have been wondering and could not find on the Rails documentation I also asked a question on StackOverflow but I did not get any answer so I'm trying my luck here I would like to use React Router to handle the majority of my pages from the visitor part and create a Single Page Application in the mean time However I would like to make sure that if the user types admin he would not get redirected to the root path So far I only managed to either pass everything to a wildcard or make compartiments as follows I found out about the constraints but I realized it is to make sure the url is correctly passed ie integer instead of strings but it does not blacklist urls Any idea Thank you in advance System configuration Rails version 5 1 4 Ruby version 2 4 3,,pixeltrix,2018-02-22 12:40:25,2018-02-22 14:44:36
IS,Upgrade CSP script src default from unsafe inline to nonce approach,The new default CSP was preventing SJR and Turbolinks redirects from working out the box as described in 31273 The default was changed to unsafe line in but the proper fix is to use the nonce approach instead,,"dhh,dhh",2018-01-12 14:39:22,2018-02-22 15:32:23
PR,Add support for automatic nonce generation for Rails UJS,Because the UJS library creates a script tag to process responses it normally requires the script src attribute of the content security policy to include 'unsafe inline' To work around this we generate a per request nonce value that is embedded in a meta tag in a similar fashion to how CSRF protection embeds its token in a meta tag The UJS library can then read the nonce value and set it on the dynamically generated script tag to enable it to execute without needing 'unsafe inline' enabled Nonce generation is not 100 safe if your script tag is including user generated content in someway then it may be possible to exploit an XSS vulnerability which can take advantage of the nonce It is however an improvement on a blanket permission for inline scripts It is also possible to use the nonce within your own script tags by using nonce true to set the nonce value on the tag e g Fixes 31689,,"pixeltrix,matthewd,pixeltrix,dhh,dhh,pixeltrix,pixeltrix,dhh,pixeltrix,dhh",2018-02-16 13:25:34,2018-02-22 15:32:23
PR,Add support for timezones to Active Job,Record what was the current timezone in effect when the job was enqueued and then restore when the job is executed in same way that the current locale is recorded and restored,,pixeltrix,2018-02-22 14:15:46,2018-02-22 16:41:27
IS,Deprecation warning is triggered inside update when used in after create callback,Steps to reproduce We call update in an after create callback This produces this deprecation warning DEPRECATION WARNING The behaviour of changed attributes inside of after callbacks will be changing in the next version of Rails The new return value will reflect the behaviour of calling the method after save returned e g the opposite of what it returns now To maintain the current behavior use saved changes transform values first instead Expected behavior It seems to me that this deprecation warning is triggered somewhere in rails which should not happen System configuration Rails version 5 1 4 Ruby version ruby 2 3 4p301 2017 03 30 revision 58214 x86 64 linux,,"Edouard-chin,Edouard-chin",2018-02-19 20:52:41,2018-02-22 20:58:10
IS,fixed length secure compare ArgumentError prevents handle unverified request,Steps to reproduce Disclaimer this is based off my reading of the code and I have not yet tested this on release vs master rails In master ActiveSupport SecurityUtils fixed length secure compare raises an ArgumentError if the strings are not of equal length request forgery protection rb is using this method to compare csrf tokens which means that if a token is modified rails will 500 instead of using the configured forgery protection strategy Guidelines for creating a bug report are available here creating a bug report Expected behavior there should be no exception raised when the submitted and actual csrf tokens have different lengths so that the unverified request can be handled Actual behavior an argument error is raised preventing handle unverified request from being called System configuration Rails version current master Ruby version any,,,2018-02-22 05:32:57,2018-02-22 21:27:24
PR,Remove passing extra arguments to ActiveJob Callbacks,,,bogdanvlviv,2018-02-22 22:58:55,2018-02-22 23:08:25
PR,Fix plugin generated files,s Prevent generation of protect from forgery in ApplicationController of plugin There is protect from forgery by default since 48cb8b3 s Comment require active storage engine in bin rails of plugin if skip active storage Improve generated file app views application html erb of plugin Do not generate javascript include tag if skip javascript Generate csp meta tag Related to 32018 cc I will backport to 5 2 stable after merging this,,"bogdanvlviv,y-yagi,bogdanvlviv,bogdanvlviv",2018-02-22 22:20:58,2018-02-23 00:05:22
PR,add a generator for concerns,Summary Bonjour This adds a new generator for concerns i e The command rails generate concern taggable will create the Taggable module in app models concerns with the basic concern template,,rafaelfranca,2018-02-22 21:56:37,2018-02-23 00:14:53
PR,Update rubocop to the latest version,Includes Switch Layout SpaceBeforeBlockBraces is empty braces default from 0 52 1 0521 2017 12 27 Before,,utilum,2018-02-23 00:14:36,2018-02-23 00:21:28
PR,Use rubocop 0 52 channel,Summary This pull request updates the RuboCop version used at codeclimate Since expects RuboCop 0 52 1,,yahonda,2018-02-23 00:31:54,2018-02-23 00:37:21
PR,Test inconsistent behavior of infinite values in PG date columns,Of the three failing tests in this PR the range related one works when run on v5 0 0 1 but fails on v5 0 1 and master So it is a behavior change but I'm not sure what caused it The SQL generated by the range test in various versions looks like The workaround for the change in behavior is to use Float INFINITY instead of 'infinity' or ' infinity' in your ranges The other two tests failed in v5 0 0 1 as well as in v5 0 1 and master I think that date columns should behave the same way as timestamp columns do with respect to infinite values Specifically 'infinity' ' infinity' Float INFINITY and Float INFINITY should all be valid values in update statements and where clauses I suspect that this might require the creation of an ActiveRecord ConnectionAdapters PostgreSQL OID Date that works similarly to ActiveRecord ConnectionAdapters PostgreSQL OID DateTime,,,2017-01-05 21:02:10,2018-02-23 02:36:51
PR,Support local cache on memcache store read multi,Summary Cache stores have a local cache strategy that is not used on fetch multi because read multi entries is not aware of it Closes 31909 Other Information Using bug report template wo not detect the issue for some reason You have to create a real application add dalli to Gemfile configure the environment to use mem cache as cache store and create a controller with that This was detected while writing some benchmarks for abstract builder,,"jeremy,jeremy,fatkodima,fatkodima",2018-02-06 14:31:12,2018-02-23 20:55:41
IS,Rails 5 2 engine dummy app does not auto require 'rails ujs',Not sure if this was intentional however I found that rails ujs is not automatically required in the dummy app for Rails Engines Steps to reproduce Create a new engine Scaffold a resource in the test dummy app Visit the new page for the resource Create a resource Visit the index page to view the newly created resource Click on the Destroy link Expected behavior Resource should be deleted via delete method Actual behavior User is directed to the resource is show page System configuration Rails version 5 2 0 rc1 Ruby version 2 4 1,,bogdanvlviv,2018-02-23 19:24:09,2018-02-23 21:59:27
PR,Improve generated file app assets javascripts application js of plugin,Add require rails ujs Closes 32094,,"bogdanvlviv,rafaelfranca,bogdanvlviv,bogdanvlviv",2018-02-23 21:06:35,2018-02-23 21:59:27
PR,Correct method documentation,Method documentation update to reflect changes after 28800,,"y-yagi,y-yagi,y-yagi",2018-02-23 11:17:09,2018-02-23 22:01:56
PR,Add option to skip Rails' custom Minitest reporter,Summary Add an option for skipping Rails' custom Minitest reporter Due to how Minitest loads plugins alphabetical order is really hard to control how reporters will be configured Take the following scenario I want to use a custom reporter available through the gem minitest utils Minitest will load plugins using Gem find files 'minitest plugin rb' so this will always return Rails' plugin as the last one from the list Running tests will result in duplicated output even though minitest utils clears the existing reporters With the change proposed by this PR one can run tests like rails test skip reporter This approach is somewhat inspired by minitest pride L5 L7 which is enabled by pride Please also check 30554 which backports this to Rails 5 1,,"y-yagi,kaspth,rafaelfranca,y-yagi,kaspth",2017-09-09 06:25:23,2018-02-24 13:56:13
IS,ActiveStorage image vnd microsoft icon content type,Ico is considered an image by ActiveStorage but is not able to generate a variant of it It is considered an image because the content type starts with 'image' but for some reason imagemagick is not able to actually create variants of it So it is not considered a variable content type Steps to reproduce Upload an ico file like this one image And try to use a variant of it with Expected behavior It should show the resized variant Actual behavior raises an ActiveStorage InvariableError System configuration Rails version 5 2 Ruby version 2 4 2,,,2018-02-23 23:15:01,2018-02-24 20:31:01
PR,Add nested resources form helper description,Summary Document automated identification of nested resources in form for with array,,kaspth,2018-02-08 22:05:48,2018-02-24 21:18:27
PR,Update default HSTS max age value to 1 year,Summary This PR updates the default HSTS max age value to 31536000 seconds 1 year to meet the minimum max age requirement for This requirement for the browser preload lists seemed to change in October 2017 The HSTS max age default was once set to 1 year but it was lowered r39923850 because at that time 1 year was arbitrary and much more than the 18 week requirement for the browser preload lists Assuming that the Rails defaults are intended to match the minimum requirements for the browser preload list it makes sense to update this value At the very least the documentation could be updated to indicate that the requirements for the browser preload lists at least for Chromium have changed Other Information I also noticed that the preload directive is required to be present in the header for However Rails does not add the directive by default I do not know if it is the intention of the Rails defaults to meet all of the preload list requirements but if it is then perhaps the existing preload directive option should be set to true,,guilleiguaran,2018-01-17 01:31:47,2018-02-24 23:20:22
IS,Ca not update a counter cache column using update,Steps to reproduce Create a new Rails project Sample project available here System configuration Rails version Rails 5 1 5 Ruby version ruby 2 4 2p198 2017 09 14 revision 59899 x86 64 darwin17,,y-yagi,2018-02-24 07:52:27,2018-02-25 01:37:26
PR,Use lazy load hook to configure ActiveStorage Blob,Followup to to prepare callbacks are run during initialization using one here meant that ActiveStorage Blob would be loaded when the app boots which would in turn load ActiveRecord Base By using a lazy load hook to configure ActiveStorage Blob instead we can avoid loading ActiveRecord Base unnecessarily r,,"eugeneius,eugeneius,georgeclaghorn,rafaelfranca",2018-02-25 00:57:43,2018-02-25 01:48:44
PR,Refactored safe assignment in condition,It seems in this example we are not using safe assignment inside a condition I propose to change it even if it is just a comment Here the references regarding why is a good idea to wrap it inside parenthesis Ruby style guide safe assignment in condition Explanation,,"bogdanvlviv,kaspth",2018-02-25 17:18:11,2018-02-25 17:41:49
PR,Use I18n 0 7 but 2,Use range restriction for i18n between 0 7 and 2,,kamipo,2018-02-25 19:18:19,2018-02-25 19:23:16
PR,Remove native Array sum and Enumerable sum detection,Since 32034 Rails 6 requires Ruby 2 4 1,,kamipo,2018-02-25 19:04:23,2018-02-25 20:07:52
PR,Association creation and finding should work consistently,This is an alternative of 29722 and revert of 29601 and a1fcbd9 Currently association creation and normal association finding does not respect store full sti class But eager loading and preloading respect the setting This means that if set store full sti class false true by default eager loading and preloading can not find created polymorphic records Association creation and finding should work consistently,,kamipo,2018-02-18 16:37:00,2018-02-25 20:09:23
IS,5 2 0 rc1 ActiveRecord polymorphic association regression,Steps to reproduce Ignore the perhaps poor naming choices for the moment I do not have an inverse association in User nor do I want one Under Rails 5 1 4 this association is working as expected If I change the name of the association from entity to anything else and rename the database columns the association works correctly again under 5 2 0 rc1 It seems as if the code looking for an inverse association for the belongs to entity is finding the belongs to itself and proceeding with the expectation that User has an inverse association System configuration Rails version 5 2 0 rc1 Ruby version 2 5 0,,kamipo,2018-02-03 17:01:18,2018-02-25 20:15:23
PR,Do not attempt to find inverse for polymorphic associations,Summary Do not attempt to find an inverse association for polymorphic associations This fixes the regression I found in my own rails app when upgrading from Rails 5 1 4 to 5 2 0 rc1 See 31876 Other Information I'm not familiar enough with automatic inverse associations to know if disabling this for all polymorphic associations is a reasonable thing to do This is also my first attempt at contributing to Rails so apologies in advance if I have done anything wrong here I would be happy to make any requested changes,,"kamipo,kamipo,kamipo,kamipo,matthewd,kamipo,matthewd,kamipo,matthewd",2018-02-03 18:19:29,2018-02-25 20:15:23
PR,Make reflection klass raise if polymorphic not to be misused,This is an alternative of 31877 to fix 31876 caused by 28808 This issue was caused by a combination of several loose implementation finding automatic inverse association of polymorphic without context caused by 28808 returning klass even if polymorphic exists before 28808 loose verification by valid inverse reflection exists before 28808 This makes klass raise if polymorphic not to be misused This issue will not happen unless polymorphic klass is misused Fixes 31876 Closes 31877,,"kamipo,matthewd,kamipo",2018-02-05 13:54:22,2018-02-25 20:15:23
PR,Move up activestorage' changelog added by 5292cdf59a2052c453d6016c69b90b790cbf2547,It was not fixed in Rails 5 2 0 rc1 since it was backported after this release,,bogdanvlviv,2018-02-25 22:22:16,2018-02-25 22:25:50
PR,Remove changelogs for Rails 6 0 since they were backported to 5 2 stable,Remove railties' changelog added by 7340596de45dc4c0f62a287b6acc4e71d8ee6c60 since it was backported to 5 2 stable via ac99916fcf7bf27bb1519d4f7387c6b4c5f0463d Remove activesupport is changelog added by 1077ae96b34b5a1dfbf10ee0c40b1ceb1eb6b30b since it was backported to 5 2 stable via a2b97e4ffef971607a1be8fc7909f099b6840f36 Remove activesupport is changelog added by 0d41a76d0c693000005d79456dee7f9299f5e8d4 since it was backported to 5 2 stable via cdce6a709e1cbc98fff009effc3b1b3ce4c7e8db Remove activestorage is changelog added by d57c52a385eb57c6ce8c6d124ab5e186f931d142 since it was backported to 5 2 stable via 5292cdf59a2052c453d6016c69b90b790cbf2547 Follow up c113bdc9d0c2cffd535ca97aff85c4bdc46b11f6 cc,,bogdanvlviv,2018-02-25 22:15:06,2018-02-25 22:29:16
PR,set enforce utf8 to false by default,input name utf8 type hidden value is obsolete It was required for IE5 8 which are not supported by rails ujs and Turbolinks anyway It is time to set enforce utf8 to false by default and to remove it completely in master,,"georgeclaghorn,kaspth",2018-02-25 20:00:17,2018-02-26 00:56:24
PR,Add Rails Generators PoroModelGenerator,Summary This generator is used when we want to generate a model which do not need Active Record as Plain Old Ruby Object In almost use cases that I expect it is executed through the command as bin rails g model Money no orm Examples,,"yhirano55,yhirano55,georgeclaghorn,rafaelfranca",2017-09-20 04:59:03,2018-02-26 01:08:05
PR,Refactor AM AttributeMethods AR AttributeMethods using module builders,This is a lite version of 30895 r This is in response to your comment issuecomment 336690267 This implementation does not add any more modules than would currently be added so that issue is gone I have basically implemented what I described issuecomment 336752791 later in that thread Summary This is a large and substantial refactor of two core modules ActiveModel AttributeMethods and ActiveRecord AttributeMethods The inspiration for this PR is this blog post on the module builder pattern which I wrote a few months ago There are a few issues motivating this refactor the main one being that AR AttributeMethods and AM AttributeMethods are heavily coupled in such a way that among other things it makes it impossible to use them or any other dependent modules like AM AR Dirty alongside each other This is like a straightjacket on AR Core models since it means you lose any flexibility that AM AttributeMethods tries to give you I came face to face with this coupling when I first tried to make a change to AM AttributeMethods in 30895 changing some private methods and found that AR AttributeMethods completely blew up because it depended on generated attribute methods being defined The other related motivation is to make these modules more encapsulated Currently both modules define many methods on the including class in order to bootstrap dynamic method definition e g define proxy call matched attribute method generated attribute methods attribute method matchers matching attribute method matchers cache etc They also depend on class attributes like attribute method matchers Outline Within the constraints of the current API this PR attempts to overcome these issues by extracting much of the method defining logic into two module builders ActiveModel AttributeMethodsBuilder and ActiveRecord AttributeMethodsBuilder These classes each subclass Module so they can define modules themselves and since they contain all the logic they need to define methods on themselves including their own matchers they avoiding the coupling mentioned above Also since the AR module builder is a subclass of the AM module builder the relationship between the two of them is clearer instead of overriding class methods on the model class we override class methods on the module builder class By defining these builders and keeping the core functionality encapsulated within them they become much more versatile If they are used in isolation using AM AttributeMethodsBuilder new etc you can actually define ActiveModel attribute methods alongside ActiveRecord attribute methods on the same model And you can also go further and define your own attribute methods builder that subclasses either of these classes Here is an example of how you could define attribute methods without including ActiveModel AttributeMethods into a class by including an instance of ActiveModel AttributeMethodsBuilder like this This usage does not put any class methods or any class attributes onto the including class everything needed is defined on the module instance mod In order to satisfy existing specs and usage I left the class attribute attribute aliases and defined a new attribute method builders and method attribute method builder but these are really sugar to maintain the current API the core code is all encapsulated in the module builders Other considerations There is a lot more here I'm happy to go through the changes and explain whatever needs to be explained I am aware that any impact on performance will rule out any change like this which is why I closed 30895 This time around I have been careful to check that there is no performance impact that I can detect at any rate I have only tested locally against MRI ruby but it is possible that other implementations may be impacted since I change one def into a define method for the respond to override I'm happy to discuss this part of the code The other main concern was the number of modules added in 30895 This PR does not grow the number of modules so this should not be a concern this time around,,"shioyama,rafaelfranca,rafaelfranca,shioyama,shioyama,matthewd,matthewd,shioyama,shioyama,shioyama,shioyama,shioyama,matthewd,shioyama,shioyama,shioyama,shioyama,shioyama",2017-12-11 07:50:37,2018-02-26 04:55:03
PR,Fix NameError uninitialized constant Categorization Category,Since 31895 build of 2 5 and AR combination failed L1638 It seems to be the reason that model is not loading properly so I added require But I'm not sure if this is correct,,"y-yagi,y-yagi,kamipo,y-yagi",2018-02-26 01:50:36,2018-02-26 07:20:08
IS,hardcode url in activestorage,Steps to reproduce use activestorage Expected behavior can set base url of it Actual behavior hardcode System configuration Rails version 5 2 0 rc1 Ruby version 2 5 0 this can make it easy to detect framework and do some hack,,"georgeclaghorn,georgeclaghorn",2018-02-26 09:47:18,2018-02-26 11:48:31
IS,InvalidAuthenticityToken raised when per form csrf tokens enabled with relative action path in form tag,Steps to reproduce Due to the way per form csrf tokens generates the token from request path and request method using form tag '' or form tag ' ' or any relative path will raise InvalidAuthenticityToken because the form tag is token calculation does not care about form action path relativity For demonstration Clone this repo Navigate to 3000 bug and press submit button If you are on mobile this commit can be self explanatory Expected behavior Form should submit sucessfully Actual behavior Got InvalidAuthenticityToken error System configuration Rails version 5 1 4 Ruby version 2 4 2,,,2017-11-21 11:00:43,2018-02-26 13:21:27
IS,OptionParser InvalidOption with any rake commands arguments,Steps to reproduce Hello I am writing a proposition for rails routes command options In the rake task I added an option to optparser L27 L29 My issue is the option is always invalid OptionParser InvalidOption expanded I wrote a small script to try to reproduce the issue but it is work perfectly It does not seems to be on optparser it happens here L21 on init It seems like if command arguments where validated before the routes rake task was loaded Or do I made something wrong To reproduce the issue clone clear bundle exec ruby w Itest test application rake test rb n test rails routes with expanded option Expected behavior Be able to add option Actual behavior OptionParser InvalidOption System configuration Rails version master Ruby version 2 4 Thanks,,matthewd,2018-02-26 14:47:09,2018-02-26 15:02:27
PR,ActiveRecord Schema Dumper Columns Order,Summary From project to project written with Rails I spectate the similar snag when column definition rows in the schema are shuffled from time to time only for schema rb in ruby mode It is annoying to see the changes in the git index despite I have not touched any of them It is really hard for me to define the steps to reproduce for this bug but let me put here my thoughts and proposed changes First consider the next example for better clarity PRAGMA table info pragma table info lacks the required knowledge that is why ActiveRecord uses L516 sqlite master q7 readonly table to get and parse initial table creation SQL As far as we parse the SQL statements all the time it could be considered as columns order guarantee Here is an excerpt from the ALTER TABLE official documentation regarding column position specification The ADD COLUMN syntax is used to add a new column to an existing table The new column is always appended to the end of the list of existing columns Alternatives Any sorting especially if it is not supported in the database could be performed at schema dumper level For example dumper sorts table names in the alphabetical order right now The same approach could be applied to the columns Moreover we may enforce ordering at both levels database query and schema dumper table info processing Considertations How do different databases consider the columns order AFAIK there are 2 points Columns order from fixed length to variable length provides performance boost because it is easier to find the offset of the fixed field That is why primary key is better to place in the beginning of the table Columns order does not much matter from user point of view because columns order at the logical level could be different from how database spread columns at the physical level That means you do not have to be bothered with column position tuning database engine better knows how to store the data Proposed changes Force MySQL adapter to retrieve columns definition in the same order Does all this make sense Please shout out if I have to cover provided changes with specs somewhere else Also I'm happy for any critics,,"matthewd,matthewd",2018-02-26 09:50:37,2018-02-26 16:25:57
PR,remove utf8 enforce,input name utf8 type hidden value is obsolete It was required for IE5 8 which are not supported by rails ujs and Turbolinks anyway,,"pixeltrix,pixeltrix,pixeltrix,pixeltrix,pixeltrix,pixeltrix,pixeltrix,matthewd,matthewd,rafaelfranca",2018-02-25 19:53:54,2018-02-26 18:10:10
PR,Fix NameError uninitialized constant Dog DogLover,See issue issuecomment 368393774 Follow up cd activerecord bin test test cases finder test rb Travis CI L2135,,"bogdanvlviv,kamipo",2018-02-26 10:49:18,2018-02-26 18:34:40
PR,Update to fix the same error as issue 26132,There is some incompatibility generating the following error when you use the gems JSON and ActiveSupport IOError not opened for reading This change fixes it Summary This fix was implemented for master branch commit 813f8e333d and I'm adding it to the 5 0 stable,,"kaspth,kaspth",2018-02-26 18:10:01,2018-02-26 19:39:51
PR,delegate to with private true option,Summary alternative version for PR pls read description there with private true option issuecomment 364108705,,"kamipo,matthewd,kamipo,kamipo,matthewd,albertoalmagro,matthewd,albertoalmagro,matthewd,albertoalmagro,albertoalmagro,rafaelfranca,dhh,rafaelfranca,kaspth,matthewd,kaspth,kamipo,matthewd,rafaelfranca,kaspth,albertoalmagro,kaspth,kaspth,kaspth",2018-02-09 11:12:09,2018-02-26 19:49:02
PR,Remove extra changelog added by 31944,Previously it was removed by 32106 since it was backported to 5 2 stable ci skip,,bogdanvlviv,2018-02-26 22:39:20,2018-02-26 22:50:04
PR,Correct to option is value of the route in the Bound Parameters sect,ion in routing guide ci skip Summary On defining route get 'photos id ' to display an exception is raised ArgumentError Missing controller key on routes definition please check your routes So changing get 'photos id ' to display to get 'photos id ' to 'photos display',,,2018-02-26 14:14:33,2018-02-27 03:02:47
IS,Amazing bug in AS TimeWithZone,Steps to reproduce AS tries to be smart and allows the comparation of time to a String that is a serialized time It results in a really weird behavior in Expected Behavior AS TimeWithZone to be commutative operation Actual Behavior AS TimeWithZone is not commutative operation System configuration Rails version 5 4 1 but I think a lot of them are affected Ruby version 2 4 2,,"bogdan,matthewd,rafaelfranca",2018-02-26 10:01:49,2018-02-27 03:09:33
IS,Actioncable test if clients are connected on a channel,Expected behavior A way to test if users are subscribed on a channel so that we can decide to do expensive calculations that have clients listening for Actual behavior Unable to check if users are subscribed System configuration Rails version 5 1 2 Ruby version 2 3 0 Currently I have in my app I have cron tasks running that gather information and broadcasts it to the subscribers on the channels On these taks I do view rendering before I broadcast the message to the client But due to being a background cron task there is no user requesting the updated information and there might be no user listening to this broadcast and rendering is useless Therefore I'm looking but could not find it in the documentation if there is a way to check if there are clients listening on this channel stream It could save a lot of cpu Now I send a very small message out and check the return value not 0 means consumers are listening but it should be more simple I could write code to track in the database if there are clients connected disconnected on certain streams but the app already knows this I assume I opened an issue because I did not got any reply on the gitter chat about this,,y-yagi,2018-02-26 20:21:09,2018-02-27 04:11:07
PR,ci skip Change requring order of files in doc,This change was made at 4a835aa3236eedb135ccf8b59ed3c03e040b8b01 Current all rb is rails all rb at f86b221a53e8363b7c8a5688df603fc388b62b7c rails rails,,willnet,2018-02-27 08:16:58,2018-02-27 09:18:02
PR,better docs for ActionView Helpers FormBuilder emitted hidden id,I have added documentation to the method ActionView Helpers FormBuilder emitted hidden id,,"rafaelfranca,rafaelfranca,rafaelfranca",2018-02-26 13:26:24,2018-02-27 12:03:51
PR,Raise an error if advisory lock in migrator was not released,Summary connection release advisory lock lock id may fail for whatever reason When it does it fails silently leaving the advisory lock in the db Session level advisory locks do not work so well with PgBouncer in Transaction mode and we started to have migrations fail randomly Other Information Related to cc Thanks for contributing to Rails,,"tgxworld,sgrif,tgxworld,tgxworld,tgxworld,tgxworld",2017-11-21 05:25:12,2018-02-27 12:21:47
PR,Add nodoc to ActionView Helpers FormBuilder emitted hidden id,add nodoc to ActionView Helpers FormBuilder emitted hidden id,,rafaelfranca,2018-02-27 12:28:22,2018-02-27 12:35:22
PR,Active Record distinct order count regression,Summary ebc09ed9ad9a04338138739226a1a92c7a2707ee Broke count for ordered queries with eager loaded tables 4ada273 shows the break 6fa0d79 shows the fix I'm unsure what the clause distinct value was supposed to guard against,,"kamipo,kamipo,kamipo",2018-02-15 09:58:41,2018-02-27 13:25:35
IS,Incorrect attribute column type fetched for a group by column on an associated table,I have just encountered an interesting edge case that breaks grouped count queries in ActiveRecord Background I'm currently in the process of migrating tables from integer to uuid primary keys in my postgresql db As a result some tables have an id of integer and others have an id of uuid In the following example Note has a uuid id and Organization has an integer id If I execute the following query simplified from my actual usage but enough to demonstrate the issue Note joins organization group 'organizations id' count I will get a result of something like nil 1234 instead of a collection of many organization ids and their counts The reason is when execute grouped calculation is checking for the type of the result set columns L334 It calls type for which simply lops off the table name of the column organization id into id and ends up getting the type of id on the Note class which is uuid not integer L368 The typecast of the integer Organization id to a uuid results in nil for every row in the result set My current quick fix solution is to assume any column names with a in it are references to model tables and to check the type on that model There is clearly ways that this can also break and not the most optimal code splitting the string multiple times etc so I did not think it was necessarily a good solution to submit a pull request for but this monkey patch gets my code working for now and I suspect the maintainers will have better ideas,,composerinteralia,2017-08-30 19:12:00,2018-02-27 13:35:55
PR,Do not accidentally lose includes in serialization,Summary We had a major production bug caused by an includes change that looks like this In this case the last include is a single hash with two keys instead of two hashes with a single value ActiveModel throws away all but the first key in this case silently ignoring a passed option This was tricky to find since it looks like addresses is provided but you do not get addresses back This change will include all keys from a passed hash,,"tenderlove,kamipo",2017-03-03 20:07:02,2018-02-27 15:34:12
IS,Limited ids returns incorrect results,Steps to reproduce This query returns wrong results because issues id is incorrectly used as a condition for the primary key Project eager load issues order 'issues id issues subject' limit 10 Expected behavior I removed issues id from the order statement Project eager load issues order 'issues subject' limit 10 SQL SELECT DISTINCT projects id issues subject AS alias 0 FROM projects LEFT OUTER JOIN issues ON issues project id projects id ORDER BY issues subject LIMIT 10 SQL SELECT projects id AS t0 r0 projects name AS t0 r1 projects description AS t0 r2 projects homepage AS t0 r3 projects is public AS t0 r4 projects parent id AS t0 r5 projects created on AS t0 r6 projects updated on AS t0 r7 projects identifier AS t0 r8 projects status AS t0 r9 projects lft AS t0 r10 projects rgt AS t0 r11 projects easy is easy template AS t0 r12 projects easy due date AS t0 r13 projects author id AS t0 r14 projects easy start date AS t0 r15 projects easy level AS t0 r16 projects easy external id AS t0 r17 projects inherit members AS t0 r18 projects calculation discount AS t0 r19 projects calculation position AS t0 r20 projects client id AS t0 r21 projects calculation discount is percent AS t0 r22 projects client name AS t0 r23 projects calculation date AS t0 r24 projects easy currency id AS t0 r25 projects easy baseline for id AS t0 r26 projects easy currency code AS t0 r27 projects default version id AS t0 r28 projects dmsf description AS t0 r29 projects dmsf notification AS t0 r30 projects easy priority id AS t0 r31 projects easy has custom menu AS t0 r32 issues id AS t1 r0 issues tracker id AS t1 r1 issues project id AS t1 r2 issues subject AS t1 r3 issues description AS t1 r4 issues due date AS t1 r5 issues category id AS t1 r6 issues status id AS t1 r7 issues assigned to id AS t1 r8 issues priority id AS t1 r9 issues fixed version id AS t1 r10 issues author id AS t1 r11 issues lock version AS t1 r12 issues created on AS t1 r13 issues updated on AS t1 r14 issues start date AS t1 r15 issues done ratio AS t1 r16 issues estimated hours AS t1 r17 issues easy is easy template AS t1 r18 issues parent id AS t1 r19 issues root id AS t1 r20 issues lft AS t1 r21 issues rgt AS t1 r22 issues is private AS t1 r23 issues activity id AS t1 r24 issues easy level AS t1 r25 issues easy external id AS t1 r26 issues easy due date time AS t1 r27 issues easy helpdesk mailbox username AS t1 r28 issues easy helpdesk project sla id AS t1 r29 issues closed on AS t1 r30 issues easy is repeating AS t1 r31 issues easy repeat settings AS t1 r32 issues easy next start AS t1 r33 issues easy start date time AS t1 r34 issues calculation position AS t1 r35 issues calculation rate AS t1 r36 issues easy ldap entity mapping AS t1 r37 issues resolved at AS t1 r38 issues closed at AS t1 r39 issues easy response date time AS t1 r40 issues calculation discount AS t1 r41 issues calculation discount is percent AS t1 r42 issues calculation unit AS t1 r43 issues easy time to solve paused at AS t1 r44 issues easy closed by id AS t1 r45 issues easy sms tel num AS t1 r46 issues easy sms binding method AS t1 r47 issues easy status updated on AS t1 r48 issues in easy calculation AS t1 r49 issues easy reopen at AS t1 r50 issues easy sprint id AS t1 r51 issues easy last updated by id AS t1 r52 issues easy time to solve pause AS t1 r53 issues easy helpdesk need reaction AS t1 r54 issues easy story points AS t1 r55 FROM projects LEFT OUTER JOIN issues ON issues project id projects id WHERE projects id IN 167 102 132 168 103 133 169 104 134 171 ORDER BY issues subject ActiveRecord Relation Project id 102 got 10 results Actual behavior Project eager load issues order 'issues id issues subject' limit 10 DISTINCT does not work here like it was intended project ids will not be uniq SQL SELECT DISTINCT projects id issues id issues subject AS alias 0 FROM projects LEFT OUTER JOIN issues ON issues project id projects id ORDER BY issues id issues subject LIMIT 10 SQL SELECT projects id AS t0 r0 projects name AS t0 r1 projects description AS t0 r2 projects homepage AS t0 r3 projects is public AS t0 r4 projects parent id AS t0 r5 projects created on AS t0 r6 projects updated on AS t0 r7 projects identifier AS t0 r8 projects status AS t0 r9 projects lft AS t0 r10 projects rgt AS t0 r11 projects easy is easy template AS t0 r12 projects easy due date AS t0 r13 projects author id AS t0 r14 projects easy start date AS t0 r15 projects easy level AS t0 r16 projects easy external id AS t0 r17 projects inherit members AS t0 r18 projects calculation discount AS t0 r19 projects calculation position AS t0 r20 projects client id AS t0 r21 projects calculation discount is percent AS t0 r22 projects client name AS t0 r23 projects calculation date AS t0 r24 projects easy currency id AS t0 r25 projects easy baseline for id AS t0 r26 projects easy currency code AS t0 r27 projects default version id AS t0 r28 projects dmsf description AS t0 r29 projects dmsf notification AS t0 r30 projects easy priority id AS t0 r31 projects easy has custom menu AS t0 r32 issues id AS t1 r0 issues tracker id AS t1 r1 issues project id AS t1 r2 issues subject AS t1 r3 issues description AS t1 r4 issues due date AS t1 r5 issues category id AS t1 r6 issues status id AS t1 r7 issues assigned to id AS t1 r8 issues priority id AS t1 r9 issues fixed version id AS t1 r10 issues author id AS t1 r11 issues lock version AS t1 r12 issues created on AS t1 r13 issues updated on AS t1 r14 issues start date AS t1 r15 issues done ratio AS t1 r16 issues estimated hours AS t1 r17 issues easy is easy template AS t1 r18 issues parent id AS t1 r19 issues root id AS t1 r20 issues lft AS t1 r21 issues rgt AS t1 r22 issues is private AS t1 r23 issues activity id AS t1 r24 issues easy level AS t1 r25 issues easy external id AS t1 r26 issues easy due date time AS t1 r27 issues easy helpdesk mailbox username AS t1 r28 issues easy helpdesk project sla id AS t1 r29 issues closed on AS t1 r30 issues easy is repeating AS t1 r31 issues easy repeat settings AS t1 r32 issues easy next start AS t1 r33 issues easy start date time AS t1 r34 issues calculation position AS t1 r35 issues calculation rate AS t1 r36 issues easy ldap entity mapping AS t1 r37 issues resolved at AS t1 r38 issues closed at AS t1 r39 issues easy response date time AS t1 r40 issues calculation discount AS t1 r41 issues calculation discount is percent AS t1 r42 issues calculation unit AS t1 r43 issues easy time to solve paused at AS t1 r44 issues easy closed by id AS t1 r45 issues easy sms tel num AS t1 r46 issues easy sms binding method AS t1 r47 issues easy status updated on AS t1 r48 issues in easy calculation AS t1 r49 issues easy reopen at AS t1 r50 issues easy sprint id AS t1 r51 issues easy last updated by id AS t1 r52 issues easy time to solve pause AS t1 r53 issues easy helpdesk need reaction AS t1 r54 issues easy story points AS t1 r55 FROM projects LEFT OUTER JOIN issues ON issues project id projects id WHERE projects id IN NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL ORDER BY issues id issues subject ActiveRecord Relation got no results changing the order should not have any effect on results count System configuration tested on Rails 4 2 7 1 and current master ruby 2 3 3 mingw works correctly on sqlite does not work on mysql postgres,,"al2o3cr,al2o3cr",2017-03-09 22:02:57,2018-02-27 15:51:23
PR,Use column alias of primary key in limited ids for,ActiveRecord FinderMethods limited ids for adds order values to select in some RDBMS e g PostgreSQL MySQL and so on If order values include other table is primary key wrong primary key values may be found because they are ambiguous Using unique column alias makes free from ambiguity Fixes 28364,,"kamipo,kamipo,kamipo,kamipo,georgeclaghorn,kamipo,kamipo,kamipo",2018-02-12 14:20:12,2018-02-27 15:51:23
PR,Do not enforce UTF 8 by default,With the disabling of TLS 1 0 by most major websites continuing to run IE8 or lower becomes increasingly difficult so default to not enforcing UTF 8 encoding as it is not relevant to other browsers,,"pixeltrix,pixeltrix,rafaelfranca",2018-02-27 11:14:54,2018-02-27 15:54:44
IS,unscoped default scope with Joins or includes,It seems unscoped is having some issues with joins and includes any idea how we can fix it class Document ActiveRecord Base include KillMeSoftly has many versions dependent destroy default scope where is deleted false is archived false end class Version ActiveRecord Base include KillMeSoftly belongs to document default scope where is deleted false is archived false end I'm using following versions Rails 4 2 10 upgraded to Rails 5 0 2 ruby 2 4 2p198 Calling this in console Document unscoped do Version unscoped do Document joins versions end end gives this result How I can unscoped default scoped values SELECT documents FROM documents INNER JOIN versions ON versions document id documents id AND versions is deleted 1 AND versions is archived 2 is deleted f is archived f Other Example with includes while joining it is ignoring default scope attributes Document unscoped includes versions where phase id xxxx is archived true versions is archived true is deleted false count SELECT COUNT DISTINCT documents id FROM documents LEFT OUTER JOIN versions ON versions document id documents id AND versions is deleted 1 AND versions is archived 2 WHERE documents phase id 3 AND documents is archived 4 AND versions is archived 5 AND versions is deleted 6 is deleted f is archived f phase id 5363 is archived t is archived t is deleted f,,"y-yagi,y-yagi,kamipo",2018-02-20 15:49:50,2018-02-27 16:12:36
IS,Remove utf8 input or set enforce utf8 to false by default,input name utf8 type hidden value was introduced as a workaround for IE 8 As of today IE5 8 has a 0 3 share worldwide and nothing really works in it Should not we get rid of this input or at least set enforce utf8 to false by default,,"rafaelfranca,kamipo",2017-10-10 21:51:24,2018-02-27 16:25:55
IS,ActionCable An unauthorized connection attempt was rejected for users not logged,ActionCable is continuously checking for null users logged out users even though I have a meta tag wrapped around the JS channel functions I even erased the cookies for my loopback server but nothing seems to stop the functions from firing off Normally there should be no checks for logged out users or null users w how its configured connection rb System configuration Rails version Rails 5 1 1 Ruby version ruby 2 4 3,,jeremy,2018-02-27 16:16:49,2018-02-27 19:07:49
IS,NoMethodError undefined method logger' for MyClass,Hi I'm currently upgrading a Rails application from 4 2 7 1 to 5 0 6 and got the following issue Steps to reproduce I created a gem and for naming purpose added the controllers inside a module In those controllers I do not have access to 'logger' method After debugging I found that it fails in this method L21 Expected behavior The application should handle this Actual behavior The test suite fails with NoMethodError undefined method 'logger' for MyClass System configuration Rails version Rails 5 0 6 Ruby version ruby 2 3 1p112 2016 04 26 revision 54768 x86 64 darwin16 For now I added in my ApplicationController def logger Rails logger end,,rafaelfranca,2017-09-25 08:36:09,2018-02-27 19:10:07
PR,Move rake routes task to rails command,Summary After a discussion with It was mentioned that rake tasks need to be moved to rails command First PR for this subject from me Other Information Is it an issue to do not deal anymore with rake params diff e1c35224a4df7f73d90a9a90e45aab2bL255 and do we need to add a changelog for this Do we want to add more constraints to args,,"rafaelfranca,y-yagi,y-yagi,eileencodes,eileencodes",2018-02-26 22:04:41,2018-02-27 19:18:01
PR,Uses the absolute path for system test screenshots,Summary When getting an error that generates a screenshot it would be helpful to be able to ctrl click it to quickly open it in the browser which does not work with relative paths This changes image path to disregard the relative path and use the absolute one instead,,,2018-02-27 13:55:24,2018-02-27 19:20:43
PR,Use with partial writes helper in activerecord test cases dirty test rb,Related to 948b931925febac3c965ab13470065ced68f7b53 r,,bogdanvlviv,2018-02-27 22:33:41,2018-02-28 02:06:47
PR,Expand AR Base abstract class documentation,The previous documentation is somewhat unclear about the use case for an abstract ActiveRecord class This clears it up by highlighting the following points table name is not derived from the abstract class' name type is not derived on direct descendants of the abstract class validations not abstract class should be used to specify whether the parent model can be instantiated or not Not sure if I should be updating the CHANGELOG for a documentation change cc,,"sikachu,sikachu,sikachu,tjschuck,rafaelfranca",2017-11-16 23:02:27,2018-02-28 02:42:19
IS,Doc mistake with self abstract class true,Steps to reproduce I used the bug report template file bugreport rb TL DR According to the docs you need to use self abstract class true in order to get Rails to use the explicitly overridden table name That is not true and I created a bug report using the bug report template with to illustrate the mistake,,"wycats,kamipo",2018-02-27 22:06:39,2018-02-28 02:44:19
PR,WIP fix limited ids for,should fix 28364,,"rafaelfranca,kamipo",2017-03-09 22:28:36,2018-02-28 02:50:21
PR,Fix new framework defaults 6 0 rb,default enforce utf8 belongs to config action view Update info about skip enforcing utf8 since we can change default behavior via config action controller default enforce utf8 Related to 32125,,bogdanvlviv,2018-02-27 21:13:10,2018-02-28 03:40:21
PR,Let select render default selected option for required field,Summary Let select tag be required and have a selected disabled placeholder option Closes related issue,,"prikha,rafaelfranca,prikha,prikha,rafaelfranca,prikha,rafaelfranca,prikha",2018-02-22 18:42:27,2018-02-28 03:52:54
PR,Add ActiveModel Attributes attributes,This starts to address 31832 ActiveModel Attributes includes ActiveModel AttributeMethods which requires an attributes method that returns a hash with string keys,,"composerinteralia,sgrif",2018-02-07 21:32:00,2018-02-28 05:17:44
IS,if define reader method of ActiveModle AttributeSet that named attributes respond to raise NoMethodError,Steps to reproduce if define reader method of ActiveModle AttributeSet that named attributes respond to raise NoMethodError Expected behavior It should return false use key instead of include L460 Actual behavior NoMethodError System configuration Rails 5 2 0 rc1 Ruby 2 4 3,,"composerinteralia,rafaelfranca,rafaelfranca",2018-01-31 02:55:48,2018-02-28 05:18:07
PR,Fix a typo in activerecord CHANGELOG md,columsn columns,,pixeltrix,2018-02-28 06:19:44,2018-02-28 06:26:04
PR,Backport d004f0a to 5 2 stable,Backport d004f0a to 5 2 stable r,,bogdanvlviv,2018-02-28 08:09:00,2018-02-28 08:11:02
PR,Add separate test to ensure that delegate with private option returns correct value,s Remove extra comments Asking for private method in activesupport test core ext module test rb s Improve docs of using delegate with private Update changelog of 31944,,"bogdanvlviv,kamipo,rafaelfranca,bogdanvlviv,kamipo,bogdanvlviv",2018-02-27 22:21:05,2018-02-28 09:03:22
IS,Freeze when receive multiple requests quickly,Steps to reproduce 1 Start rails app with puma 2 Make multiple request at same time More specifically when my android activity destroys 3 fragments tries to get same resource from the server 3 Rails app freezes ctrl c ctrl d does not work at all System configuration Rails version 5 1 4 Ruby version 2 5 0,,"pixeltrix,pixeltrix,matthewd",2018-02-22 11:49:05,2018-02-28 09:49:07
IS,Give better control on select tag helper in terms of selected and disabled options,Steps to reproduce Consider the following case I have a signup form with a select field The field is required and should contain a placeholder As we all know we can achieve this by using select and prompt option Example from docs I can submit a PR if a proposal would be accepted by the community System configuration Rails version 5 1 4 Ruby version 2 4 2,,"prikha,matthewd,prikha,prikha,y-yagi",2018-02-22 10:28:56,2018-02-28 11:36:31
IS,Rails Multithreading leads to Circular Dependency Error,I would like to start that I think this is a Rails bug but unfortunately this concerns a scarcely documented feature of Rails and I can not find help elsewhere I know the issue tracker is not a support forum but forgive me this time I have asked this on Stack Overflow url but I'm not finding the answer I'm hoping for I have a Rails app in which I have a Rake task that uses multithreading functions supplied by the concurrent ruby gem From time to time I encounter Circular dependency detected while autoloading constant errors After Googling for a bit I found this to be related to using threading in combination with loading Rails constants I stumbled upon the following GitHub issues and As explained here you need to wrap any code that is called from a new thread in a Rails application reloader wrap do or Rails application executor wrap do block which is what I did However this leads to deadlock The recommendation is then to use ActiveSupport Dependencies interlock permit concurrent loads to wrap another blocking call on the main thread However I am unsure which code I should wrap with this Here is what I tried however this still leads to a deadlock Beaneater new ENV fetch HOST host ENV fetch BEANSTALK PORT 11300 tube name ENV fetch BEANSTALK QUEUE NAME queue pool Concurrent FixedThreadPool new Concurrent processor count 2 Process jobs from tube the body of this block gets executed on each message received jobs register tube name do job ActiveSupport Dependencies interlock permit concurrent loads do info Received job job id Concurrent Future execute executor pool do Rails application reloader wrap do Stuff that references Rails constants etc process beanstalk message job body end end end end jobs process reserve timeout 10 Can anyone shed a light as to how I should solve this The odd thing is I encounter this in production while other information on this topic seems to imply it should normally only occur in development In production I use the following settings config eager load true config cache classes true Autoload paths for all environments are Rails default plus two specific folders models validators jobs concerns eager load paths is not modified or set in any of my configs so must be equal to the Rails default I am using Rails 5 so enable dependency loading should equal to false in production,,matthewd,2017-08-21 21:34:06,2018-02-28 13:38:38
PR,Add rails routes expanded mode,Summary When using rails routes with small terminal or complicated routes it can be very difficult to understand where a specific element is especially when using header psql had the same issue that is why they created expanded mode long time ago diff c8870df945d6a1270e9d5ed30e41d3f4R107 that you can switch using x or by starting psql with Other Information I did not add an entry to changelog because it seems too early for me Also I did not know where you want this to be targeted if it was approved App used to display routes,,"jaredbeck,jaredbeck",2018-02-27 20:55:45,2018-02-28 23:34:00
IS,Foreign key replacement in inverse association regression,Steps to reproduce Expected behavior Test does not blow up Actual behavior Test fails with validation error on Post System configuration Rails version 5 2 0 rc1 Ruby version 2 3 3 This regression is traced to The expected behavior is how it works in latest stable EDIT The problem lies with the fact that when saving a parent object its associations go through validation as well before the parent is actually saved This is fine I guess generally I suppose but in my use case I have a presence validation check on the fk see gist which means that since the 31575 sets the fk to nil the validation fails,,"pixeltrix,kamipo,pixeltrix,pixeltrix",2018-02-26 14:43:26,2018-03-01 12:15:36
PR,Remove index true option from belongs to as defaults to true,Summary Remove index true from belongs to options as it is true by default Refer gist for example Gist,,sgrif,2018-03-01 14:06:02,2018-03-01 15:03:01
IS,Getting cookieoverflow exception when uploading a csv file,I'm getting ActionDispatch Cookies CookieOverflow when I tried to upload CSV file I googled this issue to resolve and I came across with a solution that by changing session storage to the database will resolve this Later I found that changing session storage options has been removed from new versions of the rails application Here is the answer I found on StackOverflow Can someone please help me to resolve this I have attached screenshot of the error message System configuration Rails version 5 1 4 Ruby version 2 4 2,,jeremy,2018-03-01 17:12:50,2018-03-01 17:16:42
IS,Double decrement on counter cache under specific conditions,Steps to reproduce The following gist contains a failing unit test Expected behavior Test should succeed counter cache should be decremented once Actual behavior Test fails counter cache is decremented twice System configuration Rails version 5 1 5 master Ruby version 2 4 3 More details Database setup A lecture is given by a person in an institution An institution can hold several lectures and a person can give several lectures Each person and institution has a cache counter counting the number of lectures associated Run the file included in the gist the unit test will succeed The second decrement will not occur Conclusion It seems that the creation of a second cache counter to another record interferes with the the way other cache counters are computed causing a superfluous decrement This happens while updating a record is attributes in bulk A quick survey seemed to show that assign attributes decrements the counter once and save decrements it a second time in the following code L429 L430 May or may not be related to 31491 and 31493,,y-yagi,2018-02-22 10:19:54,2018-03-01 22:55:47
PR,Ruby 2 4 take advantage of String unpack1,Now that we require Ruby 2 4 we can use String unpack1 instead of str unpack first method i unpack1,,jeremy,2018-03-02 05:12:50,2018-03-02 06:42:53
PR,Deprecate active support core ext hash compact,Ruby 2 4 provides Hash compact and Hash compact natively so active support core ext hash compact is no longer necessary,,y-yagi,2018-03-03 00:05:43,2018-03-03 00:40:56
IS,Document what Activerecord can and can not rollback on its own,It would be nice to know what Activerecord migrations can and can not reverse without a custom user method The guides states If you wish for a migration to do something that Active Record does not know how to reverse you can use reversible yet there is no apparent list of what Active Record does not know,,y-yagi,2018-03-03 06:21:13,2018-03-03 07:16:35
PR,Deprecate active support core ext numeric inquiry,Numeric positive and Numeric negative was added to Ruby since 2 3 see Rails 6 requires Ruby 2 4 1 since 32034,,bogdanvlviv,2018-03-03 06:46:16,2018-03-03 07:32:12
IS,config railties order and railties initializers firing in reverse,Steps to reproduce You define this in your application rb config railties order all main app You realise that engine is initializer runs after your own Thus you cannot override things set by it Cry I found issue right here L556 For some reason there is reverse there Removing that reverse seems to make things work again with or without config railties order I will try to make a PR for this Edit Working through existing test Removing reverse makes things fail because other initializers are prepending things routes view paths instead of appending That is why there is reverse in the first place I guess Switching things around worked until I got to append assets path that comes from sprokets Now this is the same oddity L57 It is called append yet it prepends via unshift Is there a reason why it is all set up this way There must be something I'm not seeing Edit2 Ok so this is even worse now Because of this reverse prepending business it is not possible to even override engine is views controllers models assets System configuration Rails version 5 2 alpha Ruby version 2 4,,rafaelfranca,2017-11-24 20:43:08,2018-03-03 16:03:53
PR,Extract all base class name as polymorphic name,This is an alternative of 29722 and follow up of 32048 This does not change the current behavior but makes it easier to modify all polymorphic names consistently,,kamipo,2018-03-01 18:51:58,2018-03-03 17:34:02
PR,Eager loading with polymorphic associations should behave consistently,This reverts ignoring polymorphic error introduced at 02da8ae What the ignoring want to solve was caused by force eager loading regardless of whether it is necessary but it has been fixed by 29043 The ignoring is now only causing a mismatch of exists behavior with to a count etc It should behave consistently,,kamipo,2018-03-01 22:20:16,2018-03-03 17:36:16
PR,Update guides CHANGELOG md,To Rails 5 2 0 beta1 was added Threading and Code Execution in Rails Guide by 8bfa617e9990b05061c2f481afe87e055b6a6106 To Rails 5 2 0 rc1 was added Active Storage Overview Guide by 48fbc4aec845eeb51708a68806453528fab07d14 This commit adds changelogs about adding these guides I think it deserves to be mentioned in guides CHANGELOG md,,"bogdanvlviv,kaspth",2018-03-03 12:50:33,2018-03-03 18:34:27
PR,Merge Previews Variants controller into one Representations controller,Since ActiveStorage Blob Representable unifies the idea of previews and variants under one roof as representation we may as well have the controllers follow suit Thus ActiveStorage RepresentationsController enters the fray I have copied the old tests for both previews and variants and unified those as well,,"kaspth,kaspth,kaspth,kaspth,kaspth",2018-03-03 20:42:11,2018-03-04 10:20:55
PR,Fix links in the psql guide ci skip,,,ydakuka,2018-03-04 08:50:53,2018-03-04 13:13:14
PR,Fix actionview tests execution,On my local environment execution of cd actionview bin test raises error,,"bogdanvlviv,kaspth,bogdanvlviv,kaspth",2018-03-04 16:58:40,2018-03-04 19:35:43
PR,Fix occurrences Fixnum Bignum,Related to r27830891 cc,,"bogdanvlviv,kamipo,bogdanvlviv,kamipo",2018-03-04 13:46:13,2018-03-04 19:38:20
PR,Introduce explicit rails server handler option,I mistype rails server production instead of rails server e production expecting to lunch a server in the production environment all the time However the signature of rails server help is,,"gsamokovarov,kaspth,kaspth,kaspth,kaspth,kaspth,kaspth,matthewd,matthewd,kaspth,gsamokovarov,gsamokovarov,gsamokovarov,kaspth,kaspth,kaspth,kaspth,matthewd,matthewd,gsamokovarov,gsamokovarov,gsamokovarov,gsamokovarov,y-yagi,y-yagi,y-yagi,gsamokovarov,gsamokovarov,gsamokovarov,gsamokovarov,gsamokovarov,kaspth,kaspth,kaspth,kaspth,kaspth,kaspth,gsamokovarov,gsamokovarov,gsamokovarov,gsamokovarov,gsamokovarov,kaspth,kaspth,kaspth,kaspth,kaspth,kaspth,gsamokovarov,matthewd,kaspth,gsamokovarov,kaspth,gsamokovarov,gsamokovarov,gsamokovarov,kaspth,gsamokovarov,kaspth,gsamokovarov",2018-02-19 18:36:11,2018-03-04 19:52:49
PR,id in database should be respected as primary key value for persisted records,Currently primary key value can not be updated if a record has a locking column because of update record in Locking Optimistic does not respect id in database as primary key value unlike in Persistence And also if a record has dirty primary key value it may destroy any other record by the lock version of dirty record itself When updating destroying persisted records it should identify themselves by id in database not by dirty primary key value,,kamipo,2018-03-04 07:13:28,2018-03-05 00:51:13
PR,Add pg 1 0 0 compatibility to 5 2 0 rc1 Changelog,See issuecomment 370163322,,,2018-03-05 09:48:47,2018-03-05 09:55:38
PR,Add pg 1 0 0 compatibility to 5 1 5 Changelog,Was added here,,bogdanvlviv,2018-03-03 16:41:43,2018-03-05 09:57:15
PR,Allow to delegate methods as protected,Change private true to visiblity private and allow to define protected methods,,"matthewd,matthewd,matthewd,kaspth,kaspth",2018-03-05 10:17:11,2018-03-05 10:37:43
PR,Deprecate safe level of ERB new in Ruby 2 6,Summary In a Rails application using Ruby 2 6 0 dev when running bin rails g migration with RUBYOPT w an ERB deprecation warnings will be displayed This PR suppresses the above deprecation warnings in Ruby 2 6 0 dev This warning is due to the interface of ERB new will change from Ruby 2 6 Add trim mode and eoutvar keyword arguments to ERB new Now non keyword arguments other than first one are softly deprecated and will be removed when Ruby 2 5 becomes EOL Feature 14256 stdlib updates outstanding ones only The following addresses are related Ruby is commit Also this PR will change ERB new used in tasks release rb Other Information This PR uses ERB version to switch ERB new interface Because Rails 6 supports multiple Ruby versions Ruby 2 4 1 or higher it need to use the appropriate interface Using ERB version instead of RUBY VERSON is based on the following patch This patch is built into Ruby,,"koic,kamipo,kamipo,koic",2018-03-05 09:29:19,2018-03-05 12:18:01
IS,How do you counter cache active storage,How do you counter cache active storage How do you make a image as default for your views when using has many attached System configuration Rails version rails 5 2 Ruby version ruby 2 5 0,,y-yagi,2018-03-05 07:18:06,2018-03-05 12:45:56
PR,Remove extra arg passed to Rails Command RoutesTest run routes command,Related to 6bd33d66dde015a55912af20b469788ba20ddb4e,,bogdanvlviv,2018-03-05 13:15:37,2018-03-05 16:23:21
IS,ActiveStorage unable to render attachment URLs across subdomains,I am developing a mutli subdomain application and because of that I utilize lvh me as my host to be able to navigate those subdomains locally As of 6fb3ac1536d60bc12cf531e83e4060fe1fdf3d87 on the ActiveStorage Disk service the host was defaulted to localhost 3000 which forces me to set the host setting in my config storage yml I would expect that attached images would be able to look at the current environment is server and build the url from there I would expect that if I upload an image on admin lvh me 5000 it would be able to render on lvh me 5000 Because I have to explicity set the host the generated image urls are only available on the subdomain I specify in the config storage yml With the configuration as seen above when I am on the admin subdomain I receive this error when displaying an attached image img width 631 alt screen shot 2018 02 27 at 12 14 18 pm src Without anyway to dynamically set that ActiveStorage url host I'm not sure how to get around this issue Ruby 2 4 2 Rails 5 2 0 rc1,,"pixeltrix,pixeltrix,stevenharman",2018-02-27 19:17:05,2018-03-05 16:56:41
PR,Add support for root relative path URLs to the disk service,Also caches the url helpers module since that was being created every time an Active Storage url was generated,,"pixeltrix,georgeclaghorn,pixeltrix,georgeclaghorn,georgeclaghorn,georgeclaghorn,pixeltrix,stevenharman",2018-02-28 09:35:02,2018-03-05 17:00:05
PR,Fix after commit on update callback with optimistic locking,When using optimistic locking the after commit on update callback was not firing The commit added a new mechanism that set the instance variable to true when the after commit on update callback should be fired Optimistic locking overrides the normal update record method so we need to properly set the instance variable in there as well The after commit on destroy method calls super so we do not have to worry about that one Fixes,,kamipo,2017-10-06 23:43:40,2018-03-05 17:03:33
PR,Fix after commit on update,The after commit on update callbacks do not be fired when optimistic locking enabled,,,2017-05-16 01:43:33,2018-03-05 17:03:33
PR,Fix that after commit callbacks on update does not triggered when optimistic locking is enabled,This issue is caused by trigger update callback wo not be updated due to update record in Locking Optimistic does not call super when optimistic locking is enabled Now optimistic locking concern when updating is supported by update row low level API therefore overriding update record is no longer necessary Removing the method just fix the issue Closes 29096 Closes 29321 Closes 30823,,kamipo,2018-03-05 02:21:57,2018-03-05 17:03:33
PR,Restore after commit on update with optimistic locking,Fixes introduced trigger update callback but because optimistic locking does not call super when updating rows it was not being set create and destroy callbacks already call super so are not affected,,matthewd,2017-06-02 01:46:33,2018-03-05 17:03:33
PR,WIP failing test for dependent false,This is a failing test for has one attached with dependent false When executed it fails with This error occurs because the generated has one other avatar attachment association does not specify a value for dependent causing the code here L26 to set the association which attempts to nullify record id on the old Attachment Adding dependent destroy to the definition of the association seems to solve the problem but I'm not confident it does not have other unexpected consequences will investigate further This test fails on 5 2 stable as well as master,,"al2o3cr,georgeclaghorn",2018-02-13 22:49:38,2018-03-05 21:04:48
IS,rails ujs prematurely enables disabled elements for XHR requests with redirects,Steps to reproduce for XHR requests This is a HTTP 200 reply and when rails ujs receives it then it enables the button again which allows users to click on it again This is happening in our real world app even if the responses are pretty fast You can see it here ujs test I have reported this issue to the original rails ujs repository some time ago But it does not exist anymore and I can not reference the original report However I have tried to fix it but I did not find a workable solution It should be probably fixed in rails ujs which should not enable elements again if a response contains Turbolinks visit System configuration Rails version 5 1 1 and master branch Ruby version 2 4 1p111 Turbolinks version 5 0 1,,"rafaelfranca,rafaelfranca",2017-06-16 03:55:34,2018-03-05 21:24:48
PR,5 1 stable Fix that after commit callbacks on update does not triggered when optimistic locking is enabled,Backport of 32167,,kamipo,2018-03-05 20:11:38,2018-03-05 22:07:28
IS,ActiveModel Errors should use deep dup,Expected behavior deep dup is used in one place in ActiveModel Errors to dup details in initialize dup here L82 So I'm assuming since details is a hash then deep dup should be used whenever dupping details Actual behavior But in the copy method regular dup is used here L95 There are specs to do with dup but only 3 and they do not cover deepness System configuration Rails version master,,rafaelfranca,2018-03-05 21:15:46,2018-03-05 22:54:31
PR,Allow Capybara 3 x,Summary Capybara 3 0 0 rc1 has been released and contains no changes that affect how Rails system tests integrate with it This PR allows Rails users to use Capybara 3 x Would be great to have it backported to Rails 5 1 and 5 2 too,,"jeremy,rafaelfranca,jeremy,rafaelfranca,jeremy",2018-03-02 17:45:08,2018-03-06 01:44:40
IS,throw abort does not propagate to parent class,Steps to reproduce Define the following classes PS If a foreign key is set which might not be the case for polymorphic associations then parent is not deleted because it would violate a foreign key contraint but rails would try it anyways System configuration Rails version 5 1 5 Ruby version 2 5 0,,"pixeltrix,claudiob,claudiob,rafaelfranca,pixeltrix,pixeltrix",2018-02-16 18:43:10,2018-03-06 12:45:18
PR,Fix dependence on has one belongs to relationships,When a class has a belongs to or has one relationship with dependent destroy option enabled objects of this class should not be deleted if it is dependents cannot be deleted Example class Parent has one child dependent destroy end class Child belongs to parent inverse of child before destroy throw abort end c Child create p Parent create child c p destroy p destroyed expected false actual true Fixes 32022,,"pixeltrix,pixeltrix,rafaelfranca,pixeltrix,pixeltrix,pixeltrix",2018-02-26 19:45:18,2018-03-06 12:54:46
PR,Allow some purge in many rb,This changes the purge method in attachment many rb to allow it to take an array of IDs so that records can be selectively deleted Summary For the has many relationship of attachments I expected there to be a way to delete both the attachment and blob for a single record even if there were multiple attachments In the source I see that purge and purge later in both one rb and many rb remove all records I changed the method to perform an additional check if the user passes an array of IDs to then selectively delete only these If no arguments are passed purge still works as before Other Information I made a small test where you can see the changes in action here,,"kamipo,kamipo,kamipo,rafaelfranca,rafaelfranca,rafaelfranca,kamipo,kamipo,kamipo,kaspth,kaspth,kaspth,kaspth,rafaelfranca,rafaelfranca,kaspth,kamipo,kaspth,georgeclaghorn",2018-02-12 11:54:25,2018-03-06 18:04:52
PR,Implement PDF Previewer Using Poppler,mutool uses AGPL for licensing which has strict distribution rules issuecomment 332276198 Poppler is licensed under GPL so this should provide a free alternative for most Rails apps,,"hone,bogdanvlviv,bogdanvlviv,rafaelfranca,rafaelfranca,rafaelfranca,matthewd,hone,georgeclaghorn,hone,georgeclaghorn,hone,hone,hone,georgeclaghorn,georgeclaghorn",2018-02-06 01:38:16,2018-03-06 18:35:29
PR,Use authenticated cookie options to disable embedding of the expiry information in the cookies,We were generating the cookie value with the expiration embedded what makes the value impossible to be read by a Rails 5 1 application This option is only useful if you need to share your cookies between a Rails 5 1 and a Rails 5 2 application or if you are still validating the deploy and wants to eventually rollback,,"rafaelfranca,eugeneius,kaspth,kaspth,kaspth,kaspth,kaspth,kaspth,rafaelfranca,kaspth,kaspth,kaspth,kaspth,kaspth,kaspth",2018-02-28 23:18:38,2018-03-06 20:19:48
IS,undefined method purge' for nil NilClass,Steps to reproduce I'm not exactly sure how I achieved this somehow I have a user referencing a blob that no longer exists I apologize that I'm not able to contribute more towards a solution to this I'm still wrapping my brain around how ActiveStorage works But I thought this scenario worthy of sharing user User find 155 user avatar attached returns true user avatar purge returns NoMethodError undefined method purge' for nil NilClass ActiveStorage Blob Load 0 3ms SELECT active storage blobs FROM active storage blobs WHERE active storage blobs id 1 id 739 ActiveStorage Blob find 739 Could not find ActiveStorage Attachment where record type 'User' record id 155 returns one record also associated with blob 739 user avatar nil Failed to save the new associated avatar attachment ActiveStorage Attachment where record type 'User' record id 155 take destroy back in action Expected behavior It seems that purge should destroy associated ActiveStorage Blob and ActiveStorage Attachment even in the scenario I encountered Actual behavior purge fails because ActiveStorage Blob no longer exists somehow System configuration Rails version Rails 5 2 0 beta2 Ruby version ruby 2 4 3p205 2017 12 14 revision 61247 x86 64 darwin17,,"eileencodes,georgeclaghorn,georgeclaghorn,georgeclaghorn",2018-01-03 00:05:04,2018-03-06 21:23:44
IS,5 2 0 RC1 Configure ActiveStorage for Disk Storage with DirectUpload,I upgraded our application from 5 2 0 beta2 to 5 2 0 rc1 and can not get the local disk storage to work with our direct upload configuration My tests fail and I suspect it is related to the host running in development mode With beta2 I was able to leave the host out of the configuration and the tests passed How should our test environment be configured if we want to test direct upload,,"rafaelfranca,georgeclaghorn,dixpac,georgeclaghorn,dixpac",2018-01-31 19:13:51,2018-03-06 21:27:54
IS,Rails fails to generate new app with 5 2 0 rc1,Steps to reproduce After running rails new rails playground webpack I'm getting this error details details Expected behavior New application is generated Actual behavior Getting error System configuration Rails version 5 2 0 rc1 Ruby version 2 5 0p0 2017 12 25 revision 61468 x86 64 darwin17,,"rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca,rafaelfranca",2018-02-01 19:53:19,2018-03-06 22:41:10
IS,regression contextual validation not working,Steps to reproduce Expected behavior Update should fail because the validation should prevent it Actual behavior Validation only works 5 1 4 System configuration Rails version 5 1 4 5 1 5 Ruby version 2 5 0 Probably related 31483,,"eugeneius,rafaelfranca,rafaelfranca",2018-03-06 16:42:13,2018-03-06 23:06:48
PR,Hide internal docs from root ActiveSupport module,Summary See scroll down a bit there is a bunch of documentation related to JSON extensions appearing on the top level ActiveSupport module It is not clear that this is intended for inclusion in the API docs so we hide it,,jeremy,2018-03-07 03:09:31,2018-03-07 03:26:24
IS,System tests require Puma single mode configuration,Recently created new app using Ruby 2 5 Rails 5 1 4 Added RSpec FactoryBot Capybara gems and configured as per their instructions to run system tests Created basic system test to to assess devise login in spec system directory using capybara selenium System configuration Rails version 5 1 4 Ruby version 2 5 0 Capybara 2 18 0 RSpec 3 7 2 Factory Bot 4 8 2 Puma 3 11 0,,y-yagi,2018-03-07 00:30:04,2018-03-07 11:44:39
IS,Indices are not created when adding columns,Steps to reproduce Expected behavior I expect Migration 1 to create a username column an index on the column I expect Migration 2 to create a slug column unique index on the column Actual behavior Migration 1 creates the username column but not the index Migration 2 creates the slug column but not the unique index The behavior is unchanged from 4 2 to 5 2 beta So I guess this is how migrations have always been But for me it seems logical that Migration 1 and 2 should have added an index especially Migration 1 as create table and change table appears to have very similar interfaces Another way to handle this could be to raise an exception when index is passed as an option and it actually does not add an index currently you could think you are adding a unique index like in Migration 1 modified with index unique true and Migration 2 because bin rails db migrate will not fail,,yahonda,2017-11-29 16:03:38,2018-03-07 13:58:31
PR,Fixed the typo in routes set rb,Replaced the word we with our to make sentence meaningful,,kaspth,2018-03-07 12:29:54,2018-03-07 15:57:01
PR,URI unescape extension fails with Unicode input,Summary This is a fix for a bug and I have been stepping through together URI unescape in Rails 4 2 throws an Encoding CompatibilityError if the UTF 8 tagged argument contains actual Unicode characters This does not happen on 3 x compare the monkey patches Turns out this was a patch made in our own application Looks like we should be able to just pull this across 3 x patched The issue is that 1 2 hex pack 'C' returns an ASCII 8BIT tagged string which we then fail to gsub into str This was not a problem in the 3 x patched variant where the string was tagged as ASCII 8BIT anyway This PR opens by correcting the test parser escape str returns an US ASCII tagged string so parser unescape succeeds for similar reasons as why the 3 x patched variant succeeded This corrects the test to resemble the actual use case passing UTF 8 tagged strings into URI unescape,,"matthewd,matthewd,eileencodes,tenderlove,eileencodes,eileencodes,matthewd,tenderlove",2018-03-07 00:51:52,2018-03-07 16:18:55
PR,Express ActionDispatch Routing UrlFor route for as public api,This method was added by 28462 but marked as private api Since route for looks good in pair with ActionDispatch Routing Mapper CustomUrls direct let is make it as public api We use it in Closes 31417 r,,"bogdanvlviv,rafaelfranca,pixeltrix",2018-03-05 19:39:02,2018-03-08 09:49:37
PR,Use url helper methods instead of route for in ActiveStorage,Summary Use url helper methods instead of route for L194 L196 route for is a private api,,"yhirano55,yhirano55,georgeclaghorn",2017-12-12 15:34:02,2018-03-08 09:49:37
PR,Rearranged the require statements,Moved and rearranged the require statement at the top,,kamipo,2018-03-08 09:32:00,2018-03-08 10:08:06
PR,Use frozen string literal in activestorage migration schema,Use frozen string literal in activestorage migration schema Updated the sentence in base rb from actioncable,,kamipo,2018-03-08 10:44:43,2018-03-08 10:59:28
PR,Use quotes to express a returned value of a route helper as a string ci skip,r Related to 22777c80b4c6716c120c6c7f4f9221d58a679fad,,"bogdanvlviv,pixeltrix",2018-03-08 10:29:37,2018-03-08 11:58:45
IS,Direct uploads using ActiveStorage local option do not seem to work,tl dr version I'm probably missing something here but in my setup using ActiveStorage is local option with direct upload option set to true System configuration Rails version Rails 5 2 0 rc1 Ruby version Ruby 2 5 0,,"georgeclaghorn,georgeclaghorn",2018-03-07 08:04:55,2018-03-08 12:10:02
PR,Disable content security policy in the internal controllers,We use inline style and script for the view held inside rails like welcome page and mailer preview Therefore if inline is prohibited by CSP they will not work properly I think that this is not as expected These are views that users can not change so I think that CSP should be disabled regardless of the setting,,"y-yagi,matthewd,y-yagi,y-yagi,pixeltrix,y-yagi,pixeltrix,y-yagi,pixeltrix,y-yagi,pixeltrix,y-yagi,pixeltrix,y-yagi,pixeltrix,y-yagi",2018-03-05 12:44:54,2018-03-08 12:17:20
PR,Use of Ternary operator,Removed the if else and replaced it with ternary to make code shorter and simple,,sikachu,2018-03-08 12:40:57,2018-03-08 12:52:43
PR,ActiveRecord Tasks DatabaseTasks should respect VERBOSE unless raise error,Follow up b988ecb99ff6c8854e4b74ef8a7ade8d9ef5d954,,"bogdanvlviv,eileencodes",2018-03-03 07:17:58,2018-03-08 15:59:28
IS,After rake db reset the value of the ar internal metadata is dev in the test database,When I do rake db reset it recreates the development and the test db In the test database the value of the ar internal metadata is development but it should be test For the development database it is fine Maybe it is related to this issue,,"bogdanvlviv,bogdanvlviv",2018-03-08 18:40:03,2018-03-08 19:08:05
IS,Sprockets Asset was not declared to be precompiled in production error on Rails 4 2 6,In development I get the following error Asset was not declared to be precompiled in production img width 1334 alt screen shot 2018 03 08 at 1 51 01 pm src The styles for the faq page are in the assets folder Is there really a need to modified assets rb This would mean to add each asset manually I tried using gem isprockets rails' ' 3 0' without success System configuration Rails version Rails 4 2 6 Ruby version ruby 2 2 2p95 2015 04 13 revision 50295 x86 64 darwin17,,y-yagi,2018-03-08 19:56:54,2018-03-08 21:53:01
IS,Unresolved dependency found during sorting,Steps to reproduce git clone gem build activesupport gemspec sudo gem install activesupport 6 0 0 alpha gem System configuration Rails version 6 0 0 alpha Ruby version 2 5 0,,y-yagi,2018-03-08 21:55:28,2018-03-08 22:06:21
PR,Only apply URI unescape monkey patch if detected to be required,See Commit message included here We test the failing case we are trying to patch only if it throws an Exception do we patch Currently this will always throw but upstream Ruby has patched this bug Tested against current Ruby 2 5 monkey patch applied tests pass and nightly monkey patch not applied tests pass,,pixeltrix,2018-03-09 00:32:48,2018-03-09 01:23:48
PR,Add delegate pick to all,This PR adds delegate pick to all same as pluck,,"kamipo,matthewd,kamipo",2018-03-09 07:10:32,2018-03-09 08:31:40
PR,Fixes a typo and updates active job basics md,Fixes a typo job is an instance which does not have access to name method,,dharamgollapudi,2018-03-09 02:32:58,2018-03-09 08:41:44
PR,Update some i18n references in guides,The Globalize Backend Static class no longer exists in the globalize gem so far as I can tell I think this section of the guide is way out of date,,"shioyama,shioyama,shioyama,shioyama,pixeltrix,shioyama,pixeltrix,shioyama,shioyama",2018-03-07 00:40:19,2018-03-09 10:51:30
IS,Active Storage Redirect always go to localhost 3000 for Disk Storage,Steps to reproduce Expected behavior Using the default local disk service for config active storage and all the defaults in config storage yml a request to an image source for an attached image e g image tag logo should get a redirect to the same domain as the original request should get redirected to something like filename 3D 22logo png 22 3B filename 2A 3DUTF 8 27 27logo png Actual behavior Instead the redirect always goes to 3000 rails active storage disk eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaEpJaDFhYW1kT2QxUnhVRTQxTVdwMWNYUjRha3RJY1ZGSWRGZ0dPZ1pGVkE9PSIsImV4cCI6IjIwMTgtMDMtMDlUMTQ6MzQ6MTEuOTAwWiIsInB1ciI6ImJsb2Jfa2V5In19 7af06b3e84ca9c712835d52b9da7f1fb891e05a9 logo png content type image 2Fpng disposition inline 3B filename 3D 22logo png 22 3B filename 2A 3DUTF 8 27 27logo png This is environment independent Tested on development and production and with Puma and Passenger System configuration Rails version rails 5 2 0 rc1 Ruby version ruby 2 4 1,,georgeclaghorn,2018-03-09 14:36:50,2018-03-09 14:38:12
PR,Change doc for polymorphic path in polymorphic routes rb,Summary Changing docs for the polymorphic path in polymorphic routes rb The method polymorphic path is not using polymorphic url with routing type path anymore in polymorphic routes rb,,schneems,2018-03-09 16:46:08,2018-03-09 16:55:47
PR,update psych gem to 3 2 stable release,,,Gaurav2728,2018-03-09 20:16:30,2018-03-09 21:13:11
IS,bundler command not found spring,Expected behavior how to fix it Actual behavior i had error bundler command not found spring after fresh setup screenshot 2018 03 07 13 18 38 System configuration Rails version 5 1 5 Ruby version 2 5 0 OS Ubuntu 16 04,,"sikachu,sikachu,eugeneius,eugeneius",2018-03-07 06:19:17,2018-03-10 02:33:20
PR,Add Array smoosh,Based on this discussion JS may be getting a smoosh function In anticipation of this Active Support should add one too JS developers who are also using Rails may be confused that Ruby does not have a Array smoosh method To smooth the transition from JS to Ruby in Rails we should have a smoosh method too I really think that JS devs seeing undefined method smoosh for Array would be a bad introduction to Rails We should make it smoother for them Or smooshier Omakase and all that Thanks to for the inspiration,,"radar,rafaelfranca,radar",2018-03-10 05:07:33,2018-03-10 06:09:50
IS,No route matches GET favicon ico,Steps to reproduce Create new rails API project rails new testapp api Run the rails server for the project rails s Open the rails welcome page on 3000 Expected behavior It should just appear the welcome page without errors or warnings Actual behavior The welcome page appears but it also returns an error related with the favicon System configuration Rails version 5 1 1 and 5 2 0 alpha Ruby version 2 4 1 x86 64 darwin16,,"rafaelfranca,composerinteralia",2017-06-26 08:46:43,2018-03-10 06:59:59
IS,ActiveRecord sum returns nil for date time columns,We have been using the sum method on date time columns for many versions of rails We are upgrading from 4 2 to 5 0 on the way to 5 1 and encountered the following issue In rails 4 2 and before the following would return a value PostComments where post id 1 sum updated at 584938820615279 In rails 5 0 6 it is returning nil PostComments where post id 1 sum updated at nil I tried this and it seemed to work PostComments where post id 1 select sum updated at as sum first sum 584938820615279 Rails version 5 0 6 Ruby version 2 3 0 MySQL 5 6,,"pixeltrix,pixeltrix,pixeltrix,pixeltrix",2017-11-16 16:39:45,2018-03-10 11:30:30
IS,limit in has one condition produces different results Rails 4 5,Steps to reproduce This causes User all includes latest post map latest post select present count to always return 1 System configuration Rails version 5 1 5 Ruby version 2 4 3 Personal Note After looking into this I learned that the limit 1 was not required so the immediate problem with my app has been solved I feel a good solution would be to raise a warning or error along the lines of LIMIT IS NOT REQUIRED ALLOWED IN HAS ONE CONDITION because it had worked in previous versions of rails,,pixeltrix,2018-03-08 16:14:39,2018-03-11 07:59:07
PR,Draw line of a route name to the end of row console on rails routes expanded,In order to get width of console use IO console size See method c console size Related to 32130,,"bogdanvlviv,kaspth,bogdanvlviv,kaspth,bogdanvlviv,matthewd,bogdanvlviv,kaspth,kaspth,bogdanvlviv,kaspth",2018-03-03 14:03:17,2018-03-11 19:48:51
IS,Incorrect column type after joins call,Steps to reproduce Gist here This is similar to but more general in that it seems to apply to any joins and not just a follow up with group by If I select a column on a table accessed through a joins and that column shares a name with a column from the original table being joined to then AR will cast the result to the column type of the joined on table rather than using the column type of the joined to table For example as produced in the gist if I have User and a Group where the former has an integer number column and the latter has a string number column then Group joins user pluck 'users number' will produce a string instead of an integer This is true if I use select instead or if I reverse the direction in which case what should be string becomes an integer this is even more egregious if it can not be cast nicely as the gist shows a value of test is changed into 0 However the issue is avoided if I cast the column name to any non clashing name i e Group joins user pluck 'users number AS foo' in which case an integer with the right value is produced Expected behavior Column types of table being queried from are retained after joining to that table Actual behavior Column type of table being used as joins start point is being used instead System configuration Rails version 5 0 5 Ruby version ruby 2 4 1p111 2017 03 22 revision 58053 x86 64 darwin16,,,2017-11-21 20:06:45,2018-03-12 08:22:16
IS,Memory leak through ActiveRecord QueryCache,Summary AR QueryCache has no limits Heavy operations inside of HTTP request are not super common but they happen Also the same problem occurs inside background jobs memory is never released because of infinite cache growth Steps to reproduce Process a large amount of records in batches expecting posts table to have 100k records Expected behavior QueryCache should have a limit on the number of entries that it can hold at a time When limit is reached the last entry should be removed and new entry added Also it is a good idea to have a limit to the size of individual queries that can be cached In other words too large cache entries can be a problem too Actual behavior Infinite cache growth System configuration Rails version 5 0,,"bogdan,matthewd,bogdan,matthewd,bogdan,matthewd,bogdan",2017-11-17 14:26:57,2018-03-12 08:22:17
IS,attribute will change in after save callback produces deprecation warning,Steps to reproduce Just call attribute will change in after save callback It relates I have this backtrace with deprecation warning Expected behavior There should be no deprecation warning Actual behavior There is deprecation warning System configuration Rails version 5 1 4 Ruby version 2 4 0,,rafaelfranca,2017-11-08 10:22:56,2018-03-12 08:22:18
PR,Fix 5 2 stable is changelogs ci skip,Add missing dots Change example of using content security policy report only in controller Remove TODO Related to 32222,,bogdanvlviv,2018-03-12 06:43:53,2018-03-12 10:42:50
PR,Fix CHANGELOGs ci skip,Add missing dots Remove reference to itself on GitHub Usually we add references to fixed issues only in a changelog Follow up 32223,,bogdanvlviv,2018-03-12 06:47:09,2018-03-12 10:43:23
PR,Fix note marks,Before After,,ydakuka,2018-03-12 11:51:03,2018-03-12 11:51:28
PR,Fix note marks,Before After,,"ydakuka,eileencodes",2018-03-12 11:53:40,2018-03-12 13:02:28
IS,routing guide doco,Firstly I'm new to Rails so the mysteries are far and wide Maybe a good test of the doco After installing Rails my routes db contains some basic boilerplate code None of this construct is mentioned in the guide pointed to by the comment in the code So one is left wondering whether this default code should be removed and replaced with samples in the guide or are the examples supposed to be added within the code block do end or perhaps after it If the first line Rails application routes is supposed to be there should it not be mentioned in the documentation Searching the web for examples has not shed any light so far so I guess it is a matter of experimentation,,pixeltrix,2018-03-11 12:37:26,2018-03-12 13:45:14
IS,using keyword arguments in def initialize raises an ArgumentError,Hey all First time submitting a bug here please go easy on me In some of my gems I override the def initialize of an ActiveRecord Base object and use ruby keyword arguments This has worked fine for me up until 5 2 0 rc1 The following test fails when gem activerecord 5 2 0 rc1 but passes in 5 2 0 beta2 and lower Steps to reproduce System configuration Rails version This only affects 5 2 0 rc1 Ruby version I have reproduced the bug in ruby 2 3 2 4 and 2 5 Additional Information I'm 100 sure this commit is the source of the behaviour change diff 3a78900604b345c3b1fec1156f23f43a,,"pixeltrix,kamipo",2018-03-09 23:06:05,2018-03-12 15:17:36
IS,ActiveStorage Azure invalid options provided for SAS token generate,Hello Steps to reproduce I followed all the steps described in edgeguides to setup ActiveStorage in combination with an Azure Storage Account Expected behavior Attaching and uploading of a blob works fine I can see the uploaded files in my Azure Storage container Then I use the url for to display images stored on Azure Actual behavior I got error 500 on requested images and got this error when I try to open generated uri Azure Storage InvalidOptionsError in ActiveStorage BlobsController show invalid options content disposition inline filename image png filename UTF 8''image png content type image png provided for SAS token generate azure storage 0 15 0 preview lib azure storage core auth shared access signature generator rb 174 in 'generate service sas token' azure storage 0 15 0 preview lib azure storage core auth shared access signature generator rb 340 in isigned uri' activestorage 5 2 0 rc1 lib active storage service azure storage service rb 81 in 'block in url' activesupport 5 2 0 rc1 lib active support notifications rb 168 in 'block in instrument' activesupport 5 2 0 rc1 lib active support notifications instrumenter rb 23 in 'instrument' activesupport 5 2 0 rc1 lib active support notifications rb 168 in 'instrument' activestorage 5 2 0 rc1 lib active storage service rb 113 in 'instrument' activestorage 5 2 0 rc1 lib active storage service azure storage service rb 79 in 'url' activestorage 5 2 0 rc1models active storage blob rb 113 in iservice url' activestorage 5 2 0 rc1controllers active storage blobs controller rb 12 in ishow' I asked Azure team they tell me to setup a SAS token As far I know there is no documentation from Rails about such a setup Are you aware of that problem Is there any further configuration I missed Thank you in advance System configuration Rails version 5 2 0 rc1 Ruby version 2 5 0 using gem 'azure storage' 0 15 0 preview,,"pixeltrix,pixeltrix,georgeclaghorn",2018-03-12 10:21:47,2018-03-12 17:42:53
PR,fix casting zero float numbers to boolean,I was a little bit wondering why so if 0 0 is zero it should be casted as 0 and has to be false right now 0 0 0 0000000 etc will be false,,rafaelfranca,2018-03-12 13:59:48,2018-03-12 19:50:43
IS,Rails 5 2 0 rc1 Webpack fresh app webpack dev server fails to start,Steps to reproduce Create a new 5 2 0 rc1 application with webpack enabled rails 5 2 0 rc1 new webpack test webpack Attempt to start the webpack dev server cd webpack test bin webpack dev server Expected behavior webpack dev server starts up Actual behavior Errors out with the following,,rafaelfranca,2018-03-12 22:05:58,2018-03-12 22:19:47
PR,ActiveSupport Cache RedisCacheStore should support Redis instances for redis kwarg,Summary Fixes a bug in ActiveSupport Cache RedisCacheStore should support operating upon a Redis instance given in its initializer via the redis keyword argument Ref L109 L116 In actual fact because Redis new respond to call RedisCacheStore will instead treat a Redis instance like a proc call ing it to populate its redis L121 L122 Obviously this does not have the correct semantics The test case added in my first commit fails with a Redis TimeoutError if indeed a Redis instance is running on 127 0 0 1 6379 With the fix given in my second commit RedisCacheStore redis is precisely equal to the Redis instance given to the initializer if indeed one was given Other Information I'm a first time contributor please let me know if I need to update any changelog or open this PR against a branch other than master,,"matthewd,jeremy",2018-03-13 00:21:57,2018-03-13 01:45:56
IS,OpenSSL Random random bytes significantly slower in Rails than in plain Ruby on Windows,Steps to reproduce So all signs point to this being a seeding issue but I cannot figure out where what how in the process of loading up the Rails environment is causing this Again calling OpenSSL Random random bytes at least once before loading up Rails mitigates the issue This issue has significant negative effect on various aspects of working with Rails on Windows i e it affects many new people coming to Rails E g it affects the time it takes Rails to render the first page at least in dev mode 10 seconds on 4 core 8Gb machine vs 1 second after the fix it makes testing models that use bcrypt intolerable on Windows since bcrypt relies on OpenSSL Random random bytes internally etc Expected behavior OpenSSL Random random bytes should have the same performance profile regardless of whether it is called in Rails environment or in plain Ruby Actual behavior Instead OpenSSL Random random bytes is orders of magnitude slower on first invocation in Rails than in plain Ruby System configuration Rails version Rails 5 0 0 Ruby version ruby 2 3 1p112 2016 04 26 revision 54768 x64 mingw32,,"vipulnsward,vipulnsward,vipulnsward",2016-07-13 05:51:13,2018-03-13 08:51:09
IS,url for skip params which given as defaults,Steps to reproduce I use STI model and one controller with type for initialize different resources It is will be ignored and type skipped Expected behavior For partners in pagination should be partners page number For providers in pagination should be providers page number Actual behavior For partners in pagination i get partners page number For providers i also get partners page number System configuration Rails version Rails 5 1 4 Ruby version ruby 2 3 4p301 2017 03 30 revision 58214 x86 64 darwin16 Related 27132,,"y-yagi,pixeltrix,pixeltrix",2017-11-30 13:02:26,2018-03-13 08:51:10
IS,unscoped not remembering default scope for associations,See related 30267 Steps to reproduce See gist here The basic problem is that unscoped with a block does not seem to be removing default scope when using joins The above gist has two models defined Expected behavior Post unscoped should return an association that remembers that Post is unscoped for the queries inside of the block Actual behavior The default scope seems to remain when using the association returned by unscoped System configuration Rails version 5 1 4 5 2 0 rc1 and 6 0 0 alpha Ruby version 2 5 0,,"pixeltrix,pixeltrix",2018-03-13 06:36:05,2018-03-13 10:27:50
PR,Update Ruby on Rails 5 2 Release Notes Guide ci skip,Add a description of major features in Rails 5 2 Add a reference to Pull Request Commit to every entry in CHANGELOGs note that some of them combined Add section Ruby on Rails Guides with notable changes Note that Skipped this since encrypted secrets are already on the way out Thanks to everyone who has been working on Rails 5 2 3,,"bogdanvlviv,kamipo,bogdanvlviv,kaspth,kaspth,kaspth,bogdanvlviv,deivid-rodriguez,y-yagi,bogdanvlviv,pixeltrix,bogdanvlviv,pixeltrix,kaspth",2018-03-12 06:39:30,2018-03-13 19:06:53
PR,Change message on the empty result of searching routes by rails routes with c or g,Improve docs of ActionDispatch Routing Add a mention about g Improve info about expanded option of rails routes Introduce ActionDispatch Routing ConsoleFormatter Base Create Base and inherit Sheet and Expanded in order to prevent code duplication Remove trailing n for components of Expanded There is no need for Expanded header to return buffer so return nil instead Change no routes message No routes were found for this controller since if use g it sounds incorrect Display No routes were found for this controller if apply c Display No routes were found for this grep pattern if apply g Related to 32130,,"bogdanvlviv,kaspth,kaspth,kaspth,kaspth,bogdanvlviv,bogdanvlviv,eugeneius,bogdanvlviv,kaspth,bogdanvlviv,kaspth,bogdanvlviv,kaspth",2018-03-02 22:18:21,2018-03-13 19:09:30
PR,Perform email jobs in assert emails,Summary Currently ActionMailer is test helpers for asserting emails do not perform enqueued mail jobs With this change code like Are there any strong feelings against this change What would be a scenario where this would not be wanted,,,2018-03-12 19:56:08,2018-03-13 19:20:52
IS,Rails application is not initialized in Rails Configuration after initialize callback,Hello Steps to reproduce 1 create a new rails application 2 add to config environments development rb System configuration Rails version 5 1 5 Ruby version 2 5 0 The docs say Adds a block which will be executed after rails has been fully initialized Useful for per environment configuration which depends on the framework being fully initialized config after initialize takes a block which will be run after Rails has finished initializing the application That includes the initialization of the framework itself engines and all the application is initializers in config initializers Note that this block will be run for rake tasks Useful for configuring values set up by other initializers So I would expect Rails application initialized to be true in config after initialize but it is obviously not the case Is it the expected behavior,,y-yagi,2018-03-13 12:38:24,2018-03-13 22:34:10
IS,image submit tag does not support skip pipeline option,Steps to reproduce image submit tag does not skip asset pipeline when I pass skip pipeline true option System configuration Rails version Rails v5 1 4 Ruby version Ruby v2 4 3,,,2018-03-14 10:20:24,2018-03-14 11:21:51
PR,Respect skip pipeline option in image submit tag,Fixes 32248,,"y-yagi,pixeltrix,y-yagi",2018-03-14 11:17:29,2018-03-14 11:22:45
IS,Use ActiveStorage from within third party libs,This is not a bug and my apologies in advance for polluting the bug tracker with questions but it is becoming increasingly difficult to find documentation or guidance on such a new feature So I was wondering if its possible to use ActiveStorage in conjunction with a third party javascript uploader library like Uppy for example Here is my use case Say I have a user signup form with the following Email Full Name Avatar Using the recommended way of uploading using ActiveStorage and activestorage js and setting direct uploads to true makes everything work beautifully However if I choose to replace the ugly file form field with something more elegant like Uppy or Dropzone I can not think of a way to programmatically use ActiveStorage to handle this Please note that in such a form my model is not yet created and thus the files need to be uploaded along with the entire form Any ideas Thanks Might be related to 32208,,"georgeclaghorn,georgeclaghorn,georgeclaghorn",2018-03-14 13:10:28,2018-03-14 14:54:45
PR,Update Upgrading from Rails 5 1 to Rails 5 2 ci skip,Add section Expiry in signed or encrypted cookie is now embedded in the cookies values to master since it should always be in the guides not only for version 5 2 Add info about config action dispatch use authenticated cookie encryption to the Configuring Rails Applications guide It was committed straight to 5 2 stable since we do not need this functionality in 6 0 Related to b25fcbc074ea688765af62a163698d5449221a8c,,"bogdanvlviv,pixeltrix,bogdanvlviv,pixeltrix",2018-03-14 11:47:10,2018-03-14 14:56:35
PR,Do not marshal ActiveSupport Cache Entry objects twice,When upgrading to Rails 5 2 we are seeing ActiveSupport Cache Entry compress and ActiveSupport Cache Entry should compress as the highest usage of our CPU At least some part of this is coming from the fact that objects are being marshaled multiple times This memoizes the marshaled value to eliminate half the problem,,"sgrif,jeremy,rafaelfranca,sgrif",2018-03-14 19:45:22,2018-03-14 20:52:03
IS,Cannot copy paste master key from password manager,Steps to reproduce 1 rails new 2 add some credentials 3 git add commit push repo 4 add master key content to password manager 5 clone repo 6 vim config master key 7 copy paste from password manager Expected behavior Copy pasting content of master key should work the same as literally copying the master key cp when adding it to a cloned project Actual behavior Receive the following error rbenv versions 2 5 0 lib ruby gems 2 5 0 bundler gems rails bb2fddc3b839 activesupport lib active support message encryptor rb 205 in rescue in decrypt' ActiveSupport MessageEncryptor InvalidMessage ActiveSupport MessageEncryptor InvalidMessage System configuration Rails version 5 2 0 rc1 Ruby version 2 5 0p0,,y-yagi,2018-03-14 00:33:23,2018-03-14 22:13:56
IS,ActiveStorage redirects attachment URLs from HTTPS to HTTP during service url call,I setup a self signed SSL and configured in Puma was working fine for most things but does not get applied to the disk service url in ActiveStorage This occurs for both the original upload files and their variants I have not checked this behavior on other services Here is the log revealing the redirect does not apply the SSL I have truncated the file keys for brevity 4 Run the Rails server 5 Visit a page with an image or variant using Chrome Expected behavior Page should load over HTTPS and the image should load over HTTPS Actual behavior Page loads as normal image URLs are redirect from HTTPS to HTTP which will not load locally when running with SSL with disk service storage System configuration Rails version 5 2 0 rc1 Ruby version 2 5 0p0 2017 12 25 revision 61468 x86 64 darwin15 Chrome version 64 0 3282 186 Official Build 64 bit Safari version 11 0 3 11604 5 6 1 1,,georgeclaghorn,2018-03-15 05:22:13,2018-03-15 07:38:42
IS,AssetPipeline all application js files are precompiled even in node modules,Steps to reproduce Moveover you can not precompile in production anymore RAILS ENV production rake assets precompile fails with ExecJS RuntimeError SyntaxError Unexpected token keyword default Explanation Uglifier fail at minifying vuetify es5 application js because of export default Expected behavior node modules application js should not be precompiled Actual behavior node modules application js are precompiled System configuration Rails version 5 1 4 Ruby version 2 2 5 image,,"schneems,schneems,schneems",2017-11-28 18:21:48,2018-03-15 10:49:54
IS,Time attributes contain different values before and after reloading from DB,Steps to reproduce Expected behavior The created at and updated at times should be the same before and after reloading the record from the database Actual behavior The created at and updated at times display different values before and after reloading This can be seen when comparing the values for post created at nsec and post reload created at nsec System configuration Rails version 5 1 2 Ruby version ruby 2 2 2p95 2015 04 13 revision 50295 x86 64 linux gnu on RHEL6 NOTE This spec passes when using ruby 2 2 2p95 2015 04 13 revision 50295 x86 64 darwin15 on macOS,,"lugray,lugray,al2o3cr,lugray,htanata",2017-08-17 18:51:51,2018-03-15 11:59:48
PR,Time column improvements,Apply precision when assigning values to time columns Fixes 30301 Fixes issues with time columns not being normalised on sqlite Ensures that times with a date component other than 2000 01 01 get stripped when quoting for databases like MySQL and PostgreSQL Probably for Rails 6 0 we might want to introduce storing times without the date component via a config option that defaults to true for new apps cc,,pixeltrix,2018-03-11 18:41:05,2018-03-15 11:59:48
PR,Add config active storage mount path option,Summary In the spirit of convention over configuration I think we should allow custom activestorage route scope In order to support this a new config option config active storage mount path may be introduced This option currently defaults to rails active storage Other Information In order to keep consistency with other rails is parts I think we should change rails active storage scope to just storage like it is cable for actioncable Example Thanks,,georgeclaghorn,2018-03-15 10:33:29,2018-03-15 16:17:40
PR,Fix typo in active job basics md,it is its,,kaspth,2018-03-15 18:35:34,2018-03-15 19:32:49
PR,Partly revert 32231,Remove extra execution of perform enqueued jobs since it performs all enqueued jobs in the duration of the block Fix example of using assert emails without block since we can not use enqueued jobs in this case Related to 32231 r,,bogdanvlviv,2018-03-13 23:33:08,2018-03-15 19:36:52
PR,Only preload misses on multifetch cache,Summary When rendering a collection with cached true for an ActiveRecord Relation that has preload values the preload would normally only be required for rendering the partial when it misses the cache and nor required for generating the cache key Currently we have to chose between using preload which loads unused ActiveRecord instances when the have a high cache hit rate or not preloading the associations which can result in N 1 queries when there are a large number of cache misses This PR attempts to optimise this be only preloading the associations for the records that miss the cache An example application to demonstrate this behaviour is at An example from the log demonstrating this behaviour is Without this change we would either so a query for each of the categories that miss the cache or have to load products for every category Concerns and Further Work There may be instances where we want to preload the associations for generation of cache keys or we may want to have all of the associations loaded because the collection is used in other contexts other than the current rendering Currently there is no API to support this but it is possible to acheive the load behaviour by calling load on the association before it is passed to the render call I am looking for feedback on Is preloading associations only for models that miss the cache reasonable default behaviour Or should this be explicitly opted into when calling render If it is default behaviour is calling load on the relation before rendering a suffient API for opting out or should an additional option to the render call be added If it is ok to be default behaviour then I assume that I would need to add some application config to control this behavour to prevent breaking existing application and to provide deprication warnings I am also not sure about the structure of this code is it is very tightly connected to both ActionView and ActiveRecord so any feedback in that area is welcome,,"lsylvester,rafaelfranca,rafaelfranca,matthewd,rafaelfranca,lsylvester,kaspth",2017-11-28 02:42:32,2018-03-15 19:49:22
PR,Check exclude before flagging cookies as secure in ActionDispatch SSL,Summary Check exclude before flagging cookies as secure in ActionDispatch SSL When config force ssl true it does three things 1 Permanently redirects http requests to https 2 Flags cookies as secure and tells the browser to not send cookies along with http requests 3 Tells the browser to remember the site as TLS only and automatically redirect non TLS requests We would typically want all three of these defaults when we enable config force ssl true However that might not be the case when we want to exclude a request from redirection to an https enabled host I ran into this issue when trying to migrate Review Apps from Heroku is Public Space to Private Space where all of Heroku is Review Apps have a default domain http my pr app herokuapp com and the only way to enable https on an app in the Private Space is to give it a custom domain and an SSL cert Since Review Apps are meant to be spun up temporarily and torn down I think adding a custom domain and SSL cert to an app that is meant to be destroyed 24 hours later is a hassle Heroku recommends in their documentation to exclude redirection to an https enabled site for their default domain herokuapp com in order to access an app without a custom domain in the Private Space With this setup I want all requests that do not match the domain herokuapp com to be redirected to an https enabled host and for all requests that match my example to be excluded from redirection i e http my pr app herokuapp com The problem is even though I am excluding herokuapp com from redirection I never get a session cookie because that is automatically set to secure This means I can never verify the CSRF authenticity token on any forms I submit The error I receive when making any POST PUT or PATCH request is a status 422 unprocessable entity and ActionController InvalidAuthenticityToken,,rafaelfranca,2018-03-15 20:13:57,2018-03-15 21:29:22
PR,Refactored UploadedFile shortcut methods to use delegate,Summary Simple refactor of shortcut methods to use delegate pattern,,,2018-03-15 19:07:38,2018-03-15 23:03:39
IS,HashWithIndifferentAccess returns wrong value when assigning a hash,When you assign a regular hash to a key in a HashWithIndifferentAccess it returns the regular hash but the value stored at the key is a HashWithIndifferentAccess This is very unexpected The following code snippets should all return true but the first one does not,,rafaelfranca,2018-03-15 23:12:46,2018-03-15 23:27:43
IS,Cannot set 'on delete' in migration with MySQL,Steps to reproduce Using gem 'mysql2' for the activerecord adapter In your migration System configuration Rails version 5 4 1 5 1 4 Ruby version 2 4 0 MySQL 5 5 5 10 1 14 MariaDB I have also tried making the second parameter in add foreign key to the plural table name positions Still no luck Have also tried t references position foreign key on delete cascade,,rafaelfranca,2018-03-15 22:16:48,2018-03-16 00:04:31
PR,Fix PostgreSQL index parsing with multiline expression,Hi folks This looks like a small bug in PostgreSQL connection adapter Here is how it goes Given the following index definition which is valid in PostgreSQL Thanks,,fatkodima,2018-03-15 08:19:08,2018-03-16 03:21:25
IS,ActiveRecord Postgres adapter Column rename fails when index with expression exists,In ActiveRecord migrations using PostgresSQL when a table has an index defined using an expression further renaming migrations fail because the regex to parse the index does not support expressions with line breaks This seems to be caused by PostgresSQL formatting the expression when creating the index Move about this in the debugging area at the bottom Steps to reproduce Expected behavior Renaming a column in a table with an index with an expression should work Actual behavior An exception is raised This fixes the problem If you think this solution is good enough or have another suggestion I'm available to submit a fix Thank you for the awesome work,,fatkodima,2017-12-11 22:20:58,2018-03-16 05:19:41
PR,Fix multiline expression indexes for postgresql,Fixes,,"fatkodima,matthewd,fatkodima,georgeclaghorn",2018-01-02 13:45:22,2018-03-16 05:19:41
IS,ActionView options for select selects multiple options for a single value select,We have the following collection And the select is defined with option selected 1 as a result we get Virgin Islands U S 1 selected instead of United States of America 1 Looking at the HTML it shows that all options that match the value were selected img width 826 alt screen shot 2017 12 08 at 20 20 55 src I believe only the first matching option should be selected for a select that does not support multiselection,,,2017-12-08 19:11:31,2018-03-16 09:29:17
PR,Remove all unnecessary freeze on strings,Summary Removing all unnecessary usage of freeze on strings,,"pixeltrix,pixeltrix",2018-03-16 09:49:09,2018-03-16 10:06:26
PR,Make Session MemCacheStore work with Dalli 2 7 7,Session MemCacheStore uses its own method to generate the sid so that it does not use the method provided by rack However by an alias is defined for generate sid and by calling that alias the method provided by rack is called to generate sid However generate sid was called while initialization was not done correctly resulting in an error L1429 L1490 In order to avoid this Session MemCacheStore also defines the same alias so that generate sid held by Session MemCacheStore is called,,"y-yagi,pixeltrix",2018-03-15 12:51:20,2018-03-16 11:58:31
IS,Rails 5 2 0 rc1 Active Support Unable hande Singular Named Controllers,Steps to reproduce Running 5 2 0 rc1 with limited gemset generated a singularly named controller DasboardController with associated helpers etc and a corresponding view Set root to dashboard index Expected behavior Would expect to behave as normal only thing different is the naming style of the controller Actual behavior While running better errors I am able to see that it is failing after running uninitialized constant DashboardsController In particular it is failing on lines 540 and 541 of activesupport 5 2 0 rc1 lib active support dependencies rb System configuration Rails version 5 2 0 rc1 Ruby version 2 5 I would fix submit a PR but am just not good enough to know where it is failing and how to fix it Would love help working through this though so I can help contribute,,"rafaelfranca,matthewd",2018-03-15 22:35:46,2018-03-16 14:39:55
PR,Fix default connection handling with three tier config,If you had a three tier config the establish connection that is called in the Railtie on load can not figure out how to access the default configuration This is because Rails assumes that the config is the first value in the hash and always associated with the key from the environment With a three tier config however we need to go one level deeper This commit includes 2 changes 1 removes a line from resolve all which was parsing out the the environment from the config so instead of getting When you have a three tier config and do not pass any hash symbol env etc to establish connection the resolver will automatically return both the primary and secondary in this case animals db configurations We will get an database configuration does not specify adapter error because AR will try to establish a connection on the primary key rather than the primary key is config It assumes that the development or default env automatically will return a config hash but with a three tier config we actually get a key and config primary config This fix is a bit of a bandaid because it is not the correct way to handle this situation but it does solve our immediate problem The new code here is saying if the config returned from the resolver I know it is called spec in here but we interchange our meanings a LOT and what is returned is a three tier config has a key matching the primary spec name grab the config from the spec and pass that to the estalbish connection method This works because if we pass animals or a hash or primary we will already have the correct configuration to connect with This fixes the case where we want Rail to connect with the default connection Coming soon is a refactoring that should eliminate the need to do this but I need this fix in order to write the multi db rake tasks that I promised in my RailsConf submission tenderlove and I are working on the refactoring of the internals for connection management but it wo not be ready for a few weeks and this issue has been blocking progress cc,,"eileencodes,bogdanvlviv,eileencodes,eileencodes",2018-03-16 15:51:56,2018-03-16 19:18:27
PR,Fix grammar in Getting Started with Rails,Summary I updated some grammar in the Getting Started with Rails guide Thanks,,georgeclaghorn,2018-03-16 22:03:49,2018-03-16 23:41:35
IS,ActionView Template Error undefined method rstrip' for nil NilClass,I am sending email to you user on account creation But rails is throwing following error it is giving me error on mail function My email template is this is test Any one can help me that why i am getting this issue and how can i resolve it,,y-yagi,2018-03-16 17:11:26,2018-03-16 23:45:03
IS,ActiveModel Unexpected or undocumented behavior for run callbacks,Steps to reproduce Create an ActiveModel and at the end of the run callbacks block body final evaluated expression put an expression that evaluates to something falsey Refer to for a functioning example simply clone the repo and run bundle exec rake test Expected behavior I expected the after initialize method after initialize give cooler name to be run after run callbacks but it was not If this is expected I would like the doc summary of active model callbacks rb to be a little more explanatory L6 If this is not expected I would like it to be corrected If perhaps it is not expected but I am doing something horribly wrong it would be nice if someone could explain to me the error of my ways Actual behavior The after initialize method was not run System configuration Rails version 5 1 3 and 4 2 9 The referenced repo has a branch for verifying against 4 x Ruby version ruby 2 3 3p222 2016 11 21 revision 56859 x86 64 linux and ruby 2 3 4p301 2017 03 30 revision 58214 x86 64 linux,,"al2o3cr,matthewd,claudiob,al2o3cr,matthewd,al2o3cr",2017-08-28 14:15:57,2018-03-17 07:12:03
PR,Clarify Redis cache store docs,This should be backported to 5 2 stable along with the other change diff 034764bc2980815d84b7181e29c961f3 made to these docs Summary 1 Fix minor grammatical issues expound on some potentially confusing sections 1 Explain hiredis support 1 Add basic configuration 1 Update example production config activesupport cache rediscachestore to fix syntax errors,,,2018-03-17 20:31:26,2018-03-17 23:09:10
IS,ActiveRecord Rails datetime type column changed method behavior not correct,Steps to reproduce Expected behavior pusher scheduled at changed should be false because two time value same Actual behavior pusher scheduled at changed is true System configuration Rails version Rails 4 1 16 Ruby version Ruby 2 3 4,,"rafaelfranca,composerinteralia,y-yagi",2018-03-16 03:34:17,2018-03-18 01:10:03
IS,t foo default false does not respect the default,Steps to reproduce Try to translate a key supplying a default of false eg t foo default false Expected behavior If the translation is missing it returns false Actual behavior If the translation is missing it returns span class translation missing title translation missing en false False span This is also demonstrated in this sample project rails51 zip System configuration Rails version 5 1 4 Ruby version 2 3 4 This appears to be a change in the i18n gem since 0 8 3 if you downgrade to 0 8 1 t foo default false return false However the problem only occurs if you use Rails t helper if you go via I18n t foo default false it returns false regardless of the i18n version This was originally filed on the i18n repo at,,"jdelStrother,utilum,jdelStrother,jdelStrother,rafaelfranca,fatkodima,y-yagi",2017-12-13 09:51:10,2018-03-18 01:19:52
PR,Randomize order of projects testing,Summary Randomization helps detect order dependent tests aka crappy tests Test methods have been randomized for a long time this commit randomizes the order test suites are run in as well seattlerb minitest 426 2014 This commit randomizes the order that Rails components are are run in,,"utilum,matthewd,utilum,matthewd,utilum,matthewd,utilum",2018-03-17 22:06:12,2018-03-18 05:46:01
PR,Fix Ruby on Rails 5 2 Release Notes ci skip,details summary Summary summary Remove since it was backported to 5 1 stable by 37895311514a35333e5597018852eb0fe2c9eb28 Related to 32252 details Related to 32222 discussion r174256536 Follow up a489cc81b6aa1187b169ddccc92f4c077fe0408f,,"bogdanvlviv,kaspth",2018-03-18 13:28:34,2018-03-18 16:48:47
PR,Use bind params for basic where strings,This is something of a work in progress that starts to address 31219 Post where 'id ' 1 used to generate this query There are cases that this does NOT cover and I am unsure how many of them we should try to cover Keyword binds where 'id id' id 1 this one seems doable Quoted table and column names where ' posts id ' 1 not sure if it makes sense to deal with this Multiple conditions with AND or OR Maybe not This might get out of hand Expressions with LIKE IN SIMILAR TO I'm guessing ideal solution is somewhere between what I have now and a library that parses SQL where clauses into ASTs,,"composerinteralia,composerinteralia,composerinteralia,composerinteralia,composerinteralia,matthewd,composerinteralia,matthewd,composerinteralia,matthewd,composerinteralia,matthewd,matthewd,mastahyeti,composerinteralia,matthewd,composerinteralia,composerinteralia",2018-01-28 13:43:19,2018-03-18 22:25:23
PR,dismiss,dismiss,,,2018-03-19 07:20:50,2018-03-19 07:20:57
IS,Rails 5 1 4 ajax error not trigger when object can not be save,Steps to reproduce Guidelines for creating a bug report are available here creating a bug report When submitting a remote form and the controller failed to save or update the object because some restrictions in the model like the attribute must not be blank the ajax error is not trigger instead it keeps trigger the ajax success method Expected behavior Tell us what should happen The ajax error method should be trigger since the object failed to be created or updated Actual behavior Tell us what happens instead the ajax success method keeps being trigger instead System configuration Rails version 5 1 4 Ruby version 2 4 2,,al2o3cr,2017-12-10 00:57:18,2018-03-19 08:24:46
PR,Readability improvement of activerecord methods,Simplifying create create and update activerecord methods using the Object tap method,,matthewd,2018-03-19 07:48:25,2018-03-19 09:25:51
PR,Fix failing QuotingTest test quoted time utc,This test fails in specific time Example f run this test on the machine with time 01 00 am UTC 2 this test will fail Changing representing of 2000 01 01 01 00 am UTC 2 to UTC 0 change the day month and even year in our case so substitution 2000 01 01 to is not possible Related to 7c479cbf r,,"bogdanvlviv,pixeltrix,bogdanvlviv,pixeltrix",2018-03-18 23:38:22,2018-03-19 10:16:32
PR,Faktory adapter,Summary Adds an ActiveJob adapter for Faktory Other Information Faktory is a language agnostic background job system faktory worker ruby provides a nice API for Ruby that is very similar to Sidekiq,,"y-yagi,eileencodes",2018-03-19 03:52:13,2018-03-19 12:05:50
PR,Move CSP info from 5 2 release notes to guide ci skip,Add mention about nonce Related to issuecomment 372268157 r,,"bogdanvlviv,bogdanvlviv",2018-03-18 21:17:37,2018-03-19 12:06:43
PR,Add MySQL JSON reference to ActiveRecord Store documentation,The current documentation explicitly mentions only PostgreSQL hstore json for use with store accessor making it somewhat confusing what to choose on a MySQL 5 7 setup which introduced a json data type This PR adds explicit mention of MySQL 5 7 making clear all the cases where store accessor is the appropriate choice,,eileencodes,2018-03-17 17:51:19,2018-03-19 12:07:24
PR,Backport 32283,Move CSP info from 5 2 release notes to guide ci skip cherry pick 8647ac0b88d8883e1c638b3b537deb62a40f4b74 r,,bogdanvlviv,2018-03-19 12:49:00,2018-03-19 12:52:05
IS,assets are not loading in production,Expected behavior precompiled assets should get loaded and UI should work perfectly in production Actual behavior assets are not getting loaded in production and application is not working as expected but locally if I run application it works System configuration Rails version 5 1 5 Ruby version 2 4,,"pixeltrix,pixeltrix",2018-03-19 11:04:25,2018-03-19 13:25:56
PR,Permit using the AWS Credentials Provider chain for S3 storage,Summary Allow the use of the AWS Credentials Provider chain for S3 storage If an explicit AWS access key id and secret access key are not provided in storage yml attempt to use environment variables shared credentials or IAM instance or task role credentials Order of precedence is determined by the AWS SDK Access key ids and secret keys provided in storage yml take precedence over any other credentials Therefore this change will not have any upgrade impact Thank you for the consideration,,"georgeclaghorn,pixeltrix,pixeltrix,pixeltrix,pixeltrix,pixeltrix,pixeltrix",2018-03-16 15:20:53,2018-03-19 15:25:41
IS,ActiveStorage select all record with an attachment,Is there a way via a scope to only select all records with an attachment System configuration Rails version 5 2 0 rc1 Ruby version 2 5,,georgeclaghorn,2018-03-19 14:18:23,2018-03-19 17:48:04
PR,Add documentation about not accepting PRs for new adapters,Summary This just adds some documentation that the Rails team is not accepting PRs for new ActiveJob adapters This will prevent future potential contributors from spending time on PRs that will never have a chance of being accepted Other Information Inspired by issuecomment 138813484 issuecomment 176275718,,rafaelfranca,2018-03-19 15:12:30,2018-03-19 18:46:08
PR,Use FileUpdateChecker for Migration CheckPending,Migration CheckPending is a rack middleware normally used in development to raise an exception when there are pending migrations This commit replaces the existing caching which avoided checking all migrations if the newest migration has not changed Instead we now use FileUpdateChecker which has two advantages it can detect new migrations which are not the highest version number and it is faster Improved checking The existing code watched for the value of last migration mtime to change the modification time on the file with the highest version number This works most of the time but when merging rebasing checking out other branches it is likely to have new migrations arrive with a lower version number than the previous highest In this event the CheckPending will not notice and not re check that migrations are up to date What we really want is to check for the greatest mtime of all migrations and re check if any files are new This is exactly what ActiveSupport FileUpdateChecker does for us tada Improved performance This middleware is probably only run in development which we do not heavily optimize for but this check was actually relatively slow I started looking into this because it was taking 10ms on each request in my development server not reported in logs because this middleware is before dispatch This slowness is because last migration is migrations last and migrations for each migration file needs to run File basename a regex to extract version name scope and camelize My first attempt to improve this was to avoid the call to camelize which is faster but still not as fast as just using FileUpdateChecker which surprised me I expected a stat syscall for each file to be slow This will use EventedFileUpdateChecker if it is set as config file watcher it is by default which is much faster Performance testing For testing I made a new rails application and generated 500 migrations It would be awesome to use ActiveSupport EventedFileUpdateChecker if available which is over 1000x faster than the non evented version in my benchmark I could not find a way to properly get access to Rails application config file watcher from either CheckPending itself or where it is initialized in the ActiveRecord railtie L76 L77 Any suggestions This now uses ActiveSupport EventedFileUpdateChecker if configured as config file watcher Thanks for reading,,"matthewd,matthewd,matthewd",2017-07-12 07:06:17,2018-03-19 18:55:21
PR,Appropriately request to unset and set cookie for different sub domains,Summary Currently if we were to delete a cookie and set a same cookie but with a different sub domain only the new cookie gets set The cookie that is marked for removal is still persisted For example In the above scenario single Set Cookie header is sent for xyz bar com Which leaves the earlier cookie persisted in browser because technically those are two different domains This may not be a very common use case but is helpful when working with legacy cookie and introducing new sub domains Hence this PR Where in such a scenario we now send two Set Cookie headers One to remove unset the old cookie and the other to set the new cookie value on new domain I have added new tests and extended an existing test to make sure existing behaviors are persisted,,kaspth,2017-08-24 04:44:18,2018-03-19 21:00:43
PR,ActiveJob Remove support for Qu gem,Summary This patch removes support for Qu gem Reasons are 1 Qu gem was not compatible since Rails 5 1 2 Gem development was stopped in 2014 3 Maintainers have confirmed its demise Additional information See issue 32273,,"albertoalmagro,albertoalmagro",2018-03-19 20:30:58,2018-03-19 21:47:23
IS,ActiveJob Remove Qu gem support,Summary While I was taking a look to ActiveJob is code I found this TODO L5 about the Qu gem The Qu gem is development seems to be discontinued since its last commit was 4 years ago I propose to definitely remove it from the source code and from the documentation I have already started a branch to remove it if you give me the OK I will submit a PR with it Many thanks,,"albertoalmagro,pixeltrix,pixeltrix,albertoalmagro,albertoalmagro",2018-03-16 17:36:28,2018-03-19 21:47:29
IS,Backport loofah version 2 2 1 to latest 5 0 x,loofah reported a XSS Code injection CVE today for all versions prior to 2 2 1 Rails version 5 1 5 upgrades to 2 2 1 but rails 5 0 6 is still at 2 2 0 Expected behavior patch 5 0 x to use loofah 2 2 1,,guilleiguaran,2018-03-19 22:11:57,2018-03-19 23:33:12
IS,Fragment cache digest is blank when HTML partial is rendered inside JS view,Steps to reproduce 1 git clone 2 touch tmp caching dev txt 3 Run rails s and open in browser Note that the paragraph is red 4 Click the link to reload partial over JS The paragraph is still red 5 git checkout blue but do not restart Rails server 6 Reload browser Note that the paragraph is blue 7 Click the link to reload partial over JS The paragraph changes back to red When you review the logs from rails s you will find that the following Loading red partial via index html erb System configuration Rails version 5 0 2 Ruby version 2 4 0,,"javan,javan,javan,javan",2017-03-21 13:23:44,2018-03-20 11:36:27
PR,Fix digesting templates with mixed formats,Fixes 28503 Follow up to 25411,,"javan,javan,javan,javan,javan,javan,javan,rafaelfranca",2018-03-18 14:17:28,2018-03-20 11:36:27
PR,Fix save inside after create commit looping indefinitely,Summary Following along 31106 this PR fixes after create commit being called recursively when the underlying record was saved inside it Before these changes when the added test was executed the callback would loop indefinitely overflowing the stack and erroring it The fix is done by storing state for whether the current transaction was committed for creation or not and avoiding further callbacks in subsequent calls Other Information Feedback is very appreciated as I would like to find a better way to perform this without having to store an instance variable Fixes 31104,,,2018-03-20 03:02:37,2018-03-20 12:50:30
PR,Interpolate '' instead of nil when multiple is false,Summary my string nil results in an additional '' string allocation I'm guessing because the nil has to be converted to a string my string ' ' if multiple results in my string nil if multiple is false Doing my string '' does not result in an extra string allocation I moved the if multiple logic into a method so I only had to make the change once Other Information Benchmarking,,"oniofchaos,pixeltrix,oniofchaos",2018-03-20 02:59:28,2018-03-20 14:17:36
PR,Memoize the result of gsubbing,Summary This gets called many times for each virtual path creating a new string each time that translate is called We can memoize this so that it only happens once per virtual path instead,,"oniofchaos,pixeltrix,oniofchaos,pixeltrix,oniofchaos,pixeltrix,oniofchaos",2018-03-20 04:28:48,2018-03-20 15:42:32
IS,Branch 5 2 stable is missing 5 2 0 rc2,Sorry if this is a normal behavior for a Rails release but I did not expect it so I am opening this issue to notify anyone in case this is a mistake Feel free to close if this is in anyway a misunderstanding on my side Expected behavior Branch 5 2 stable should contain the last commit of 5 2 0 rc2 db7edd81062648281d1e50c8ff9ebfafac5a9c3d Actual behavior Branch 5 2 stable does not contain the version 5 2 0 rc2 but instead there is a new branch 5 2 0 containing the commit Thanks for the great work and congratulations on this 5 2 0 rc2 release,,rafaelfranca,2018-03-20 21:29:34,2018-03-20 21:35:42
PR,Performance improvements for dasherize,Continuation of Add a cache to save the dasherized word so that we only generate the string once This change prevents a string allocation for each time the method is called with a speed up of 1 3x for small strings 5 10 chars and 2 4x for large strings 50 chars,,"oniofchaos,oniofchaos,rafaelfranca,oniofchaos,oniofchaos,oniofchaos,rafaelfranca,oniofchaos,rafaelfranca,oniofchaos,rafaelfranca,oniofchaos",2017-10-23 19:08:04,2018-03-20 21:54:44
IS,favicon requests like Started GET my model name favicon ico,Steps to reproduce branch where i recieve this problem not yet merged dont now how exacly to reproduce maybe gemfile will be helpfull System configuration Rails version Rails 5 1 5 Ruby version ruby 2 3 1p112 2016 04 26 revision 54768 x86 64 linux recently I started getting weird favicon requests from all the paths of my site no matter where I send rails or browser makes favicon requests such as Started GET registry forms favicon ico 1 2018 03 21 00 36 13 0300 registry form my model name Full trace,,"rafaelfranca,rafaelfranca",2018-03-20 21:55:37,2018-03-20 22:31:26
PR,Interpolate '' instead of nil when multiple is false Part two,Summary my string nil results in an additional '' string allocation I'm guessing because the nil has to be converted to a string my string ' ' if multiple results in my string nil if multiple is false Doing my string '' does not result in an extra string allocation This code mainly seems to be executed during the first page load of an app For my app this saved 3698 allocations of around 150 KB of savings See Other Information Benchmarking results,,"oniofchaos,matthewd,oniofchaos,matthewd",2018-03-20 14:23:45,2018-03-21 00:38:57
